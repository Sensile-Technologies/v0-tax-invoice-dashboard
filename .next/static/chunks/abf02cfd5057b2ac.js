(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,60987,e=>{"use strict";var t=e.i(43476),a=e.i(71645),l=e.i(32219),s=e.i(22623),r=e.i(30374),n=e.i(70065),i=e.i(67881),o=e.i(23750),c=e.i(10708),d=e.i(62870),u=e.i(63415),m=e.i(46696),h=e.i(63209),p=e.i(64659),x=e.i(7233),y=e.i(23585),j=e.i(78583),_=e.i(61659),g=e.i(43531),f=e.i(81947),b=e.i(33541),v=e.i(47627),N=e.i(94179),C=e.i(84762),S=e.i(25091),w=e.i(53751),T=e.i(59377),F=e.i(44523),D=e.i(47163),z=e.i(41891),I=e.i(38814),M=e.i(22787),k=e.i(9694),L=e.i(75225),A=e.i(85183),P=e.i(93230),O=e.i(72526),E=e.i(34239),R=e.i(31195),B=e.i(29228),$=e.i(72325);function K(){let e,l,s,K,V,{formatCurrency:q}=(0,b.useCurrency)(),[U,W]=(0,a.useState)([]),[H,J]=(0,a.useState)([]),[G,Y]=(0,a.useState)([]),[Q,X]=(0,a.useState)([]),[Z,ee]=(0,a.useState)(null),[et,ea]=(0,a.useState)(!1),[el,es]=(0,a.useState)(!1),[er,en]=(0,a.useState)(!1),[ei,eo]=(0,a.useState)(!1),[ec,ed]=(0,a.useState)(null),[eu,em]=(0,a.useState)(!1),[eh,ep]=(0,a.useState)(null),[ex,ey]=(0,a.useState)(!1),[ej,e_]=(0,a.useState)(null),[eg,ef]=(0,a.useState)([]),[eb,ev]=(0,a.useState)(!1),[eN,eC]=(0,a.useState)({date:"",invoiceNumber:"",fuelType:"",nozzle:"",loyalty:"all"}),[eS,ew]=(0,a.useState)({nozzle_id:"",fuel_type:"",amount:"",payment_method:"cash",customer_name:"",vehicle_number:"",customer_pin:"",meter_reading_after:"",is_loyalty_sale:!1,loyalty_customer_name:"",loyalty_customer_pin:"",discount_type:"fixed",discount_value:""}),[eT,eF]=(0,a.useState)({reason:"",return_quantity:"",refund_amount:"",approved_by:"",customer_signature:"",notes:""}),[eD,ez]=(0,a.useState)({date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().slice(0,5),closing_cash:"",notes:""});async function eI(){try{ea(!0);let e=localStorage.getItem("selectedBranch");if(!e){m.toast.error("No branch selected"),ea(!1);return}let t=JSON.parse(e).id,[a,l,s,r]=await Promise.all([fetch(`/api/nozzles?branch_id=${t}&status=active`),fetch(`/api/dispensers?branch_id=${t}`),fetch(`/api/fuel-prices?branch_id=${t}`),fetch(`/api/shifts?branch_id=${t}&status=active`)]),[n,i,o,c]=await Promise.all([a.json(),l.json(),s.json(),r.json()]);n.success&&J(n.data||[]),i.success&&Y(i.data||[]),o.success&&X(o.data||[]),c.success&&c.data?ee(c.data):ee(null),await eM()}catch(e){console.error("Error fetching data:",e),m.toast.error("Failed to load sales data")}finally{ea(!1)}}async function eM(){try{let e=localStorage.getItem("selectedBranch");if(!e)return;let t=JSON.parse(e).id,a=await fetch(`/api/sales?branch_id=${t}&limit=50`),l=await a.json();if(l.success){let e=(l.data||[]).map(e=>({...e,quantity:Number(e.quantity)||0,unit_price:Number(e.unit_price)||0,total_amount:Number(e.total_amount)||0,meter_reading_after:Number(e.meter_reading_after)||0,loyalty_points_earned:Number(e.loyalty_points_earned)||0}));W(e)}}catch(e){console.error("Error fetching sales:",e)}}(0,a.useEffect)(()=>{let e=localStorage.getItem("selectedBranch");e&&e_(JSON.parse(e)),eI()},[]),(0,a.useEffect)(()=>{async function e(){try{let e=await fetch(`/api/customers?branch_id=${ej?.id}`),t=await e.json();t.success&&ef((t.data||[]).map(e=>({id:e.id,name:e.cust_nm||"",pin:e.cust_tin||""})))}catch(e){console.error("Error fetching loyalty customers:",e)}}ej?.id&&e()},[ej?.id]);let ek=U.filter(e=>{if(eN.date&&new Date(e.sale_date).toISOString().split("T")[0]!==eN.date||eN.invoiceNumber&&!(e.invoice_number||e.receipt_number||"").toLowerCase().includes(eN.invoiceNumber.toLowerCase())||eN.fuelType&&"all"!==eN.fuelType&&e.fuel_type!==eN.fuelType||eN.nozzle&&"all"!==eN.nozzle&&e.nozzle_id!==eN.nozzle)return!1;if("loyalty"===eN.loyalty){if(!e.is_loyalty_sale)return!1}else if("non-loyalty"===eN.loyalty&&e.is_loyalty_sale)return!1;return!0}),eL=Array.from(new Set(U.map(e=>e.fuel_type))),eA=Array.from(new Set(U.map(e=>e.nozzle_id)));async function eP(){if(!eS.nozzle_id||!eS.fuel_type||!eS.amount)return void m.toast.error("Please fill in all required fields");if(!Z)return void m.toast.error("Please start a shift before recording sales");ea(!0);try{let e=localStorage.getItem("selectedBranch");if(!e)return void m.toast.error("No branch selected");let t=JSON.parse(e).id,a=Q.find(e=>e.fuel_type===eS.fuel_type);if(!a)return void m.toast.error(`No price configured for ${eS.fuel_type}`);let l=H.find(e=>e.id===eS.nozzle_id),s=await fetch(`/api/sales?nozzle_id=${eS.nozzle_id}`),r=await s.json(),n=r.success?r.data:[],i=Number(l?.initial_meter_reading)||0;if(n&&n.length>0){let e=n.reduce((e,t)=>e+Number(t.quantity),0);i+=e}let o=Number.parseFloat(eS.amount),c=Number.parseFloat(a.price),d=0;if(eS.discount_value&&Number.parseFloat(eS.discount_value)>0)if("percentage"===eS.discount_type){let e=Math.min(Number.parseFloat(eS.discount_value),100);d=o*e/100}else d=Math.min(Number.parseFloat(eS.discount_value),o);let u=Math.max(o-d,0),h=u/c;i+=h;let p=`INV-${Date.now()}`,x=`RCP-${Date.now()}`,y=await fetch("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch_id:t,shift_id:Z.id,nozzle_id:eS.nozzle_id,fuel_type:eS.fuel_type,quantity:h,unit_price:c,total_amount:u,payment_method:eS.payment_method,customer_name:eS.customer_name||null,vehicle_number:eS.vehicle_number||null,customer_pin:eS.customer_pin||null,invoice_number:p,meter_reading_after:i,transmission_status:"pending",receipt_number:x,is_loyalty_sale:eS.is_loyalty_sale,loyalty_customer_name:eS.is_loyalty_sale?eS.loyalty_customer_name:null,loyalty_customer_pin:eS.is_loyalty_sale?eS.loyalty_customer_pin:null})}),j=await y.json();if(y.ok&&j.success){let e=j.data;console.log("[Web Sale] Sale created successfully, calling KRA endpoint...");try{let a=await fetch("/api/kra/test-sale",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch_id:t,invoice_number:e.invoice_number,receipt_number:e.receipt_number,fuel_type:eS.fuel_type,quantity:h,unit_price:c,total_amount:u,payment_method:eS.payment_method,customer_name:eS.customer_name||"Walk-in Customer",customer_pin:eS.customer_pin||""})}),l=await a.json();console.log("[Web Sale] KRA API Response:",JSON.stringify(l,null,2)),l.kra_response&&(console.log("[Web Sale] KRA Result Code:",l.kra_response.resultCd),console.log("[Web Sale] KRA Result Message:",l.kra_response.resultMsg))}catch(e){console.error("[Web Sale] Error calling KRA endpoint:",e)}m.toast.success("Sale recorded successfully!"),ew({nozzle_id:"",fuel_type:"",amount:"",payment_method:"cash",customer_name:"",vehicle_number:"",customer_pin:"",meter_reading_after:"",is_loyalty_sale:!1,loyalty_customer_name:"",loyalty_customer_pin:"",discount_type:"fixed",discount_value:""}),en(!1),await eM()}else console.error("[v0] Sale creation error:",j.error),m.toast.error(`Error recording sale: ${j.error||"Unknown error"}`)}catch(e){console.error("[v0] Sale creation error:",e),m.toast.error("Failed to record sale")}finally{ea(!1)}}async function eO(){if(!eh||!eT.reason||!eT.refund_amount)return void m.toast.error("Please fill in all required fields");ea(!0);try{let e=localStorage.getItem("selectedBranch");if(!e)return void m.toast.error("No branch selected");let t=JSON.parse(e).id,a=await fetch("/api/credit-notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sale_id:eh.id,branch_id:t,credit_note_number:`CN-${Date.now()}`,reason:eT.reason,return_quantity:eT.return_quantity?Number.parseFloat(eT.return_quantity):null,refund_amount:Number.parseFloat(eT.refund_amount),approved_by:eT.approved_by||null,customer_signature:eT.customer_signature||null,notes:eT.notes||null,approval_status:"pending"})}),l=await a.json();a.ok&&l.success?(m.toast.success("Credit note created successfully"),eF({reason:"",return_quantity:"",refund_amount:"",approved_by:"",customer_signature:"",notes:""}),em(!1),ep(null),await eM()):(console.error("Error creating credit note:",l.error),m.toast.error("Failed to create credit note"))}catch(e){console.error("Error creating credit note:",e),m.toast.error("Failed to create credit note")}finally{ea(!1)}}async function eE(){if(!eD.date||!eD.time)return void m.toast.error("Please select date and time");es(!0);try{let e=localStorage.getItem("selectedBranch");if(!e){m.toast.error("No branch selected. Please select a branch from the header."),es(!1);return}let t=JSON.parse(e).id,a=new Date(`${eD.date}T${eD.time}`),l={branch_id:t,start_time:a.toISOString(),status:"active",opening_cash:0,notes:eD.notes||null},s=await fetch("/api/shifts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),r=await s.json();s.ok&&r.success?(m.toast.success("Shift started successfully"),ee(r.data),eo(!1),ez({date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().slice(0,5),closing_cash:"",notes:""})):(console.error("Error starting shift:",r.error),m.toast.error(`Failed to start shift: ${r.error||"Unknown error"}`))}catch(e){console.error("Error starting shift:",e),m.toast.error(`Failed to start shift: ${e instanceof Error?e.message:"Unknown error"}`)}finally{es(!1)}}async function eR(){if(!Z)return void m.toast.error("No active shift to end");es(!0);try{let e=await fetch("/api/shifts",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Z.id,end_time:new Date().toISOString(),status:"completed",closing_cash:eD.closing_cash?Number.parseFloat(eD.closing_cash):0,notes:eD.notes||null})}),t=await e.json();e.ok&&t.success?(m.toast.success("Shift ended successfully"),ee(null),eo(!1),ez({date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().slice(0,5),closing_cash:"",notes:""})):(console.error("Error ending shift:",t.error),m.toast.error("Failed to end shift"))}catch(e){console.error("Error ending shift:",e),m.toast.error("Failed to end shift")}finally{es(!1)}}let eB=Z?new Date(Z.start_time).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown";return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"Sales"}),(0,t.jsx)("p",{className:"text-slate-600",children:"Record fuel sales and manage transactions"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(u.DropdownMenu,{children:[(0,t.jsx)(u.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{variant:"outline",children:["Shift Management ",(0,t.jsx)(p.ChevronDown,{className:"ml-2 h-4 w-4"})]})}),(0,t.jsxs)(u.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(u.DropdownMenuItem,{onClick:()=>{ed("start"),eo(!0)},disabled:!!Z,children:"Start Shift"}),(0,t.jsx)(u.DropdownMenuItem,{onClick:()=>ey(!0),disabled:!Z,children:"End Shift (Excel Upload)"}),(0,t.jsx)(u.DropdownMenuItem,{children:"Configure Automatic Shifts"})]})]}),(0,t.jsxs)(i.Button,{onClick:()=>en(!0),disabled:!Z,children:[(0,t.jsx)(x.Plus,{className:"h-4 w-4 mr-2"}),"Record Sale"]})]})]}),Z?(0,t.jsx)(f.Alert,{className:"bg-green-50 border-green-200",children:(0,t.jsxs)(f.AlertDescription,{className:"text-green-800",children:["Current ongoing shift started at ",eB]})}):(0,t.jsxs)(f.Alert,{className:"bg-amber-50 border-amber-200",children:[(0,t.jsx)(h.AlertCircle,{className:"h-4 w-4 text-amber-600"}),(0,t.jsx)(f.AlertDescription,{className:"text-amber-800",children:"No active shift. Please start a shift before recording sales."})]}),U.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-4 mb-4",children:[(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{className:"pb-2",children:[(0,t.jsx)(n.CardTitle,{className:"text-base text-black",children:"Sales by Fuel Type"}),(0,t.jsx)(n.CardDescription,{className:"text-xs text-black/70",children:"Revenue by fuel type"})]}),(0,t.jsx)(n.CardContent,{className:"pt-2",children:(0,t.jsx)(R.ResponsiveContainer,{width:"100%",height:220,children:(0,t.jsxs)(z.PieChart,{children:[(0,t.jsx)(I.Pie,{data:Object.entries(U.reduce((e,t)=>(e[t.fuel_type]=(e[t.fuel_type]||0)+t.total_amount,e),{})).map(([e,t])=>({name:e,value:t})),cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{cx:a,cy:l,midAngle:s,innerRadius:r,outerRadius:n,percent:i,name:o}=e,c=r+(n-r)*.5,d=a+c*Math.cos(-(Math.PI/180*s)),u=l+c*Math.sin(-(Math.PI/180*s));return(0,t.jsx)("text",{x:d,y:u,fill:"#000000",textAnchor:d>a?"start":"end",dominantBaseline:"central",fontSize:"11",fontWeight:"500",children:`${o} ${(100*i).toFixed(0)}%`})},outerRadius:70,fill:"#8884d8",dataKey:"value",children:(e={Diesel:"#FFFF00",Petrol:"#FF0000",Unleaded:"#FF0000",Super:"#10B981"},Object.keys(U.reduce((e,t)=>(e[t.fuel_type]=(e[t.fuel_type]||0)+t.total_amount,e),{})).map((a,l)=>(0,t.jsx)(M.Cell,{fill:e[a]||"#6B7280"},`cell-${l}`)))}),(0,t.jsx)(E.Tooltip,{formatter:e=>q(e),contentStyle:{color:"#000"}})]})})})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{className:"pb-2",children:[(0,t.jsx)(n.CardTitle,{className:"text-base text-black",children:"Payment Methods"}),(0,t.jsx)(n.CardDescription,{className:"text-xs text-black/70",children:"Payment breakdown"})]}),(0,t.jsx)(n.CardContent,{className:"pt-2",children:(0,t.jsx)(R.ResponsiveContainer,{width:"100%",height:220,children:(0,t.jsxs)(z.PieChart,{children:[(0,t.jsx)(I.Pie,{data:Object.entries(U.reduce((e,t)=>{let a,l="mpesa"===(a=(t.payment_method||"cash").toLowerCase())||"m-pesa"===a||"mobile_money"===a?"Mobile Money":"card"===a?"Card":"credit"===a?"Credit":"Cash";return e[l]=(e[l]||0)+t.total_amount,e},{})).map(([e,t])=>({name:e,value:t})),cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{cx:a,cy:l,midAngle:s,innerRadius:r,outerRadius:n,percent:i,name:o}=e,c=r+(n-r)*.5,d=a+c*Math.cos(-(Math.PI/180*s)),u=l+c*Math.sin(-(Math.PI/180*s));return(0,t.jsx)("text",{x:d,y:u,fill:"#000000",textAnchor:d>a?"start":"end",dominantBaseline:"central",fontSize:"11",fontWeight:"500",children:`${"Mobile Money"===o?"M.Money":o} ${(100*i).toFixed(0)}%`})},outerRadius:70,fill:"#8884d8",dataKey:"value",children:(l={Cash:"#3A7085","Mobile Money":"#008C51",Card:"#F59E0B",Credit:"#EF4444"},Object.keys(U.reduce((e,t)=>{let a,l="mpesa"===(a=(t.payment_method||"cash").toLowerCase())||"m-pesa"===a||"mobile_money"===a?"Mobile Money":"card"===a?"Card":"credit"===a?"Credit":"Cash";return e[l]=(e[l]||0)+t.total_amount,e},{})).map((e,a)=>(0,t.jsx)(M.Cell,{fill:l[e]||"#6B7280"},`cell-${a}`)))}),(0,t.jsx)(E.Tooltip,{formatter:e=>q(e),contentStyle:{color:"#000"}})]})})})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{className:"pb-2",children:[(0,t.jsx)(n.CardTitle,{className:"text-base text-black",children:"Loyalty Program"}),(0,t.jsx)(n.CardDescription,{className:"text-xs text-black/70",children:"Loyalty vs Walk-in sales"})]}),(0,t.jsx)(n.CardContent,{className:"pt-2",children:(0,t.jsx)(R.ResponsiveContainer,{width:"100%",height:220,children:(0,t.jsxs)(z.PieChart,{children:[(0,t.jsxs)(I.Pie,{data:[{name:"Loyalty",value:U.filter(e=>e.is_loyalty_sale).reduce((e,t)=>e+t.total_amount,0)},{name:"Walk-in",value:U.filter(e=>!e.is_loyalty_sale).reduce((e,t)=>e+t.total_amount,0)}],cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{cx:a,cy:l,midAngle:s,innerRadius:r,outerRadius:n,percent:i,name:o}=e,c=r+(n-r)*.5,d=a+c*Math.cos(-(Math.PI/180*s)),u=l+c*Math.sin(-(Math.PI/180*s));return(0,t.jsx)("text",{x:d,y:u,fill:"#000000",textAnchor:d>a?"start":"end",dominantBaseline:"central",fontSize:"11",fontWeight:"500",children:`${o} ${(100*i).toFixed(0)}%`})},outerRadius:70,fill:"#8884d8",dataKey:"value",children:[(0,t.jsx)(M.Cell,{fill:"#C8A2C8"}),(0,t.jsx)(M.Cell,{fill:"#87CEEB"})]}),(0,t.jsx)(E.Tooltip,{formatter:e=>q(e),contentStyle:{color:"#000"}})]})})})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{className:"pb-2",children:[(0,t.jsx)(n.CardTitle,{className:"text-base text-black",children:"Revenue vs VAT"}),(0,t.jsx)(n.CardDescription,{className:"text-xs text-black/70",children:"Month-to-date comparison"})]}),(0,t.jsx)(n.CardContent,{className:"pt-2",children:(0,t.jsx)(R.ResponsiveContainer,{width:"100%",height:220,children:(0,t.jsxs)(k.BarChart,{data:(K=new Date((s=new Date).getFullYear(),s.getMonth(),1),[{name:"Revenue",value:V=U.filter(e=>new Date(e.sale_date)>=K).reduce((e,t)=>e+t.total_amount,0)},{name:"VAT",value:.16*V}]),margin:{top:5,right:5,left:5,bottom:5},children:[(0,t.jsx)(O.CartesianGrid,{strokeDasharray:"3 3"}),(0,t.jsx)(A.XAxis,{dataKey:"name",tick:{fill:"#000",fontSize:11}}),(0,t.jsx)(P.YAxis,{tick:{fill:"#000",fontSize:10}}),(0,t.jsx)(E.Tooltip,{formatter:e=>q(e),contentStyle:{color:"#000"}}),(0,t.jsxs)(L.Bar,{dataKey:"value",children:[(0,t.jsx)(M.Cell,{fill:"#15426D"}),(0,t.jsx)(M.Cell,{fill:"#D55402"})]})]})})})]})]}),(0,t.jsxs)(n.Card,{className:"rounded-2xl md:col-span-2",children:[(0,t.jsxs)(n.CardHeader,{className:"pb-2",children:[(0,t.jsx)(n.CardTitle,{className:"text-base text-black",children:"Daily Sales Trend"}),(0,t.jsx)(n.CardDescription,{className:"text-xs text-black/70",children:"Sales per product over 7 days"})]}),(0,t.jsx)(n.CardContent,{className:"pt-2",children:(0,t.jsx)(R.ResponsiveContainer,{width:"100%",height:220,children:(0,t.jsxs)(B.LineChart,{data:(()=>{let e=[];for(let t=6;t>=0;t--){let a=new Date;a.setDate(a.getDate()-t);let l=a.toISOString().split("T")[0],s={date:l};[...new Set(U.map(e=>e.fuel_type))].forEach(e=>{let t=U.filter(t=>t.sale_date.startsWith(l)&&t.fuel_type===e).reduce((e,t)=>e+t.total_amount,0);s[e]=t}),e.push(s)}return e})(),margin:{top:5,right:10,left:0,bottom:5},children:[(0,t.jsx)(O.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,t.jsx)(A.XAxis,{dataKey:"date",tick:{fontSize:10,fill:"#000"},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,t.jsx)(P.YAxis,{tick:{fontSize:11,fill:"#000"}}),(0,t.jsx)(E.Tooltip,{formatter:e=>q(e),contentStyle:{color:"#000"},labelFormatter:e=>new Date(e).toLocaleDateString()}),[...new Set(U.map(e=>e.fuel_type))].map(e=>{let a={Diesel:"#FFFF00",Petrol:"#FF0000",Unleaded:"#FF0000",Super:"#10B981"};return(0,t.jsx)($.Line,{type:"monotone",dataKey:e,stroke:a[e]||"#000",strokeWidth:2,dot:{fill:a[e]||"#000"},name:e},e)})]})})})]})]}),(0,t.jsxs)(n.Card,{className:"rounded-2xl",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.CardTitle,{children:"Sales Report"}),(0,t.jsx)(n.CardDescription,{children:"Latest fuel sales transactions"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 items-center ml-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Label,{htmlFor:"date-filter",className:"text-sm whitespace-nowrap",children:"Date:"}),(0,t.jsx)(o.Input,{id:"date-filter",type:"date",value:eN.date,onChange:e=>eC({...eN,date:e.target.value}),className:"w-40 h-9"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Label,{htmlFor:"invoice-filter",className:"text-sm whitespace-nowrap",children:"Invoice:"}),(0,t.jsx)(o.Input,{id:"invoice-filter",type:"text",placeholder:"Search...",value:eN.invoiceNumber,onChange:e=>eC({...eN,invoiceNumber:e.target.value}),className:"w-32 h-9"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Label,{htmlFor:"fuel-filter",className:"text-sm whitespace-nowrap",children:"Fuel:"}),(0,t.jsxs)(d.Select,{value:eN.fuelType,onValueChange:e=>eC({...eN,fuelType:e}),children:[(0,t.jsx)(d.SelectTrigger,{id:"fuel-filter",className:"w-32 h-9",children:(0,t.jsx)(d.SelectValue,{placeholder:"All"})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"all",children:"All"}),eL.map(e=>(0,t.jsx)(d.SelectItem,{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Label,{htmlFor:"nozzle-filter",className:"text-sm whitespace-nowrap",children:"Nozzle:"}),(0,t.jsxs)(d.Select,{value:eN.nozzle,onValueChange:e=>eC({...eN,nozzle:e}),children:[(0,t.jsx)(d.SelectTrigger,{id:"nozzle-filter",className:"w-32 h-9",children:(0,t.jsx)(d.SelectValue,{placeholder:"All"})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"all",children:"All"}),eA.map(e=>{let a=H.find(t=>t.id===e),l=a?G.find(e=>e.id===a.dispenser_id):null;return(0,t.jsx)(d.SelectItem,{value:e,children:l&&a?`D${l.dispenser_number}N${a.nozzle_number}`:"Unknown"},e)})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Label,{htmlFor:"loyalty-filter",className:"text-sm whitespace-nowrap",children:"Loyalty:"}),(0,t.jsxs)(d.Select,{value:eN.loyalty,onValueChange:e=>eC({...eN,loyalty:e}),children:[(0,t.jsx)(d.SelectTrigger,{id:"loyalty-filter",className:"w-32 h-9",children:(0,t.jsx)(d.SelectValue,{placeholder:"All"})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"all",children:"All"}),(0,t.jsx)(d.SelectItem,{value:"loyalty",children:"Loyalty Only"}),(0,t.jsx)(d.SelectItem,{value:"non-loyalty",children:"Walk-in"})]})]})]}),(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>eC({date:"",invoiceNumber:"",fuelType:"",nozzle:"",loyalty:"all"}),children:"Clear"})]})]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"space-y-2",children:0===ek.length?(0,t.jsx)("p",{className:"text-sm text-slate-500",children:0===U.length?"No sales recorded yet":"No sales match the current filters"}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(v.Table,{className:"w-full",children:[(0,t.jsx)(v.TableHeader,{children:(0,t.jsxs)(v.TableRow,{children:[(0,t.jsx)(v.TableCell,{className:"text-left p-2",children:"Date"}),(0,t.jsx)(v.TableCell,{className:"text-left p-2",children:"Invoice No."}),(0,t.jsx)(v.TableCell,{className:"text-left p-2",children:"Nozzle"}),(0,t.jsx)(v.TableCell,{className:"text-left p-2",children:"Fuel Type"}),(0,t.jsx)(v.TableCell,{className:"text-right p-2",children:"Quantity (L)"}),(0,t.jsx)(v.TableCell,{className:"text-right p-2",children:"Unit Price"}),(0,t.jsx)(v.TableCell,{className:"text-right p-2",children:"Total"}),(0,t.jsx)(v.TableCell,{className:"text-center p-2",children:"Payment"}),(0,t.jsx)(v.TableCell,{className:"text-center p-2",children:"Loyalty"}),(0,t.jsx)(v.TableCell,{className:"text-right p-2",children:"Meter Reading"}),(0,t.jsx)(v.TableCell,{className:"text-center p-2",children:"Status"}),(0,t.jsx)(v.TableCell,{className:"text-center p-2",children:"Actions"})]})}),(0,t.jsx)(v.TableBody,{children:ek.map(e=>{let a,l=H.find(t=>t.id===e.nozzle_id),s=l?G.find(e=>e.id===l.dispenser_id):null;return(0,t.jsxs)(v.TableRow,{className:"hover:bg-slate-50",children:[(0,t.jsx)(v.TableCell,{className:"p-2",children:new Date(e.sale_date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,t.jsx)(v.TableCell,{className:"p-2 text-sm font-mono",children:e.invoice_number||e.receipt_number}),(0,t.jsx)(v.TableCell,{className:"p-2 text-sm",children:s&&l?`D${s.dispenser_number}N${l.nozzle_number}`:"-"}),(0,t.jsx)(v.TableCell,{className:"p-2",children:e.fuel_type}),(0,t.jsx)(v.TableCell,{className:"p-2 text-right",children:Number(e.quantity).toFixed(2)}),(0,t.jsx)(v.TableCell,{className:"p-2 text-right",children:q(e.unit_price)}),(0,t.jsx)(v.TableCell,{className:"p-2 text-right font-medium",children:q(e.total_amount)}),(0,t.jsx)(v.TableCell,{className:"p-2 text-center",children:(0,t.jsx)(N.Badge,{variant:"outline",className:"capitalize",children:"mpesa"===(a=(e.payment_method||"cash").toLowerCase())||"m-pesa"===a||"mobile_money"===a?"Mobile Money":"card"===a?"Card":"credit"===a?"Credit":"Cash"})}),(0,t.jsx)(v.TableCell,{className:"p-2 text-center",children:e.is_loyalty_sale&&(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsxs)("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"}),(0,t.jsx)("path",{d:"M12 4.354a4 4 0 110 5.292M15.465 5.464A5.973 5.973 0 0112 4c-3.314 0-6 2.686-6 6 0 1.369.465 2.628 1.243 3.636l-1.06 1.06a7.966 7.966 0 01-1.383-4.696c0-4.418 3.582-8 8-8 1.823 0 3.5.611 4.85 1.636l-1.185 1.185z"})]})})}),(0,t.jsx)(v.TableCell,{className:"p-2 text-right",children:e.meter_reading_after?Number(e.meter_reading_after).toFixed(2):"-"}),(0,t.jsx)(v.TableCell,{className:"p-2 text-center",children:(0,t.jsx)(N.Badge,{variant:function(e){switch(e){case"transmitted":return"default";case"pending":default:return"secondary";case"flagged":return"destructive"}}(e.transmission_status||"pending"),children:(e.transmission_status||"pending").charAt(0).toUpperCase()+(e.transmission_status||"pending").slice(1)})}),(0,t.jsx)(v.TableCell,{className:"p-2 text-center",children:(0,t.jsxs)(u.DropdownMenu,{children:[(0,t.jsx)(u.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",children:(0,t.jsx)(y.MoreVertical,{className:"h-4 w-4"})})}),(0,t.jsxs)(u.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(u.DropdownMenuItem,{onClick:()=>{m.toast.info(`Viewing invoice ${e.invoice_number}`)},children:[(0,t.jsx)(j.FileText,{className:"h-4 w-4 mr-2"}),"View Invoice"]}),(0,t.jsxs)(u.DropdownMenuItem,{onClick:()=>{ep(e),eF({reason:"",return_quantity:e.quantity.toString(),refund_amount:e.total_amount.toString(),approved_by:"",customer_signature:"",notes:""}),em(!0)},children:[(0,t.jsx)(_.CreditCard,{className:"h-4 w-4 mr-2"}),"Generate Credit Note"]})]})]})})]},e.id)})})]})})})})]}),(0,t.jsx)(r.Dialog,{open:er,onOpenChange:en,children:(0,t.jsxs)(r.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(r.DialogHeader,{children:[(0,t.jsx)(r.DialogTitle,{children:"Record Fuel Sale"}),(0,t.jsx)(r.DialogDescription,{children:"Enter the details of the fuel sale transaction"})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"nozzle",children:"Nozzle"}),(0,t.jsxs)(d.Select,{value:eS.nozzle_id,onValueChange:e=>{let t=H.find(t=>t.id===e);ew({...eS,nozzle_id:e,fuel_type:t?.fuel_type||""})},children:[(0,t.jsx)(d.SelectTrigger,{id:"nozzle",children:(0,t.jsx)(d.SelectValue,{placeholder:"Select nozzle"})}),(0,t.jsx)(d.SelectContent,{children:H.map(e=>{let a=G.find(t=>t.id===e.dispenser_id);return(0,t.jsxs)(d.SelectItem,{value:e.id,children:[a?`D${a.dispenser_number}N${e.nozzle_number}`:`Nozzle ${e.nozzle_number}`," ","- ",e.fuel_type]},e.id)})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"fuel_type_display",children:"Fuel Type"}),(0,t.jsx)(o.Input,{id:"fuel_type_display",value:eS.fuel_type,disabled:!0})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"amount",children:"Sale Amount (KES)"}),(0,t.jsx)(o.Input,{id:"amount",type:"number",step:"0.01",placeholder:"0.00",value:eS.amount,onChange:e=>ew({...eS,amount:e.target.value})}),eS.amount&&eS.fuel_type&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["â‰ˆ"," ",(Number.parseFloat(eS.amount)/(Q.find(e=>e.fuel_type===eS.fuel_type)?.price||1)).toFixed(2)," ","liters"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"payment_method",children:"Payment Method"}),(0,t.jsxs)(d.Select,{value:eS.payment_method,onValueChange:e=>ew({...eS,payment_method:e}),children:[(0,t.jsx)(d.SelectTrigger,{id:"payment_method",children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"cash",children:"Cash"}),(0,t.jsx)(d.SelectItem,{value:"mobile_money",children:"Mobile Money"}),(0,t.jsx)(d.SelectItem,{value:"card",children:"Card"}),(0,t.jsx)(d.SelectItem,{value:"credit",children:"Credit"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"customer_name",children:"Customer Name (Optional)"}),(0,t.jsx)(o.Input,{id:"customer_name",placeholder:"Enter customer name",value:eS.customer_name,onChange:e=>ew({...eS,customer_name:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"customer_pin",children:"PIN/TIN Number (Optional)"}),(0,t.jsx)(o.Input,{id:"customer_pin",placeholder:"Enter PIN or TIN",value:eS.customer_pin,onChange:e=>ew({...eS,customer_pin:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"discount_type",children:"Discount Type (Optional)"}),(0,t.jsxs)(d.Select,{value:eS.discount_type,onValueChange:e=>ew({...eS,discount_type:e}),children:[(0,t.jsx)(d.SelectTrigger,{id:"discount_type",children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"fixed",children:"Fixed Amount (KES)"}),(0,t.jsx)(d.SelectItem,{value:"percentage",children:"Percentage (%)"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(c.Label,{htmlFor:"discount_value",children:["Discount ","percentage"===eS.discount_type?"(%)":"(KES)"]}),(0,t.jsx)(o.Input,{id:"discount_value",type:"number",step:"0.01",placeholder:"percentage"===eS.discount_type?"0":"0.00",value:eS.discount_value,onChange:e=>ew({...eS,discount_value:e.target.value})}),eS.amount&&eS.discount_value&&Number.parseFloat(eS.discount_value)>0&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Net Amount: KES"," ",(Number.parseFloat(eS.amount)-("percentage"===eS.discount_type?Number.parseFloat(eS.amount)*Number.parseFloat(eS.discount_value)/100:Number.parseFloat(eS.discount_value))).toFixed(2)]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"is_loyalty_sale",checked:eS.is_loyalty_sale,onChange:e=>ew({...eS,is_loyalty_sale:e.target.checked}),className:"rounded border-gray-300"}),(0,t.jsxs)(c.Label,{htmlFor:"is_loyalty_sale",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsxs)("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"}),(0,t.jsx)("path",{d:"M12 4.354a4 4 0 110 5.292M15.465 5.464A5.973 5.973 0 0112 4c-3.314 0-6 2.686-6 6 0 1.369.465 2.628 1.243 3.636l-1.06 1.06a7.966 7.966 0 01-1.383-4.696c0-4.418 3.582-8 8-8 1.823 0 3.5.611 4.85 1.636l-1.185 1.185z"})]}),"Loyalty Customer Transaction"]})]}),eS.is_loyalty_sale&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 bg-green-50 p-4 rounded-lg",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"loyalty_customer_name",children:"Loyalty Customer Name *"}),(0,t.jsxs)(T.Popover,{open:eb,onOpenChange:ev,children:[(0,t.jsx)(T.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{variant:"outline",role:"combobox","aria-expanded":eb,className:"w-full justify-between bg-transparent",children:[eS.loyalty_customer_name||"Select customer...",(0,t.jsx)(F.ChevronsUpDown,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,t.jsx)(T.PopoverContent,{className:"w-[400px] p-0",children:(0,t.jsxs)(w.Command,{children:[(0,t.jsx)(w.CommandInput,{placeholder:"Search customer..."}),(0,t.jsxs)(w.CommandList,{children:[(0,t.jsx)(w.CommandEmpty,{children:"No customer found."}),(0,t.jsx)(w.CommandGroup,{className:"max-h-[200px] overflow-y-auto",children:eg.map(e=>(0,t.jsxs)(w.CommandItem,{value:e.name,onSelect:()=>{ew({...eS,loyalty_customer_name:e.name,loyalty_customer_pin:e.pin}),ev(!1)},children:[(0,t.jsx)(g.Check,{className:(0,D.cn)("mr-2 h-4 w-4",eS.loyalty_customer_name===e.name?"opacity-100":"opacity-0")}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-medium",children:e.name}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:e.pin})]})]},e.id))})]})]})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"loyalty_customer_pin",children:"Loyalty Customer PIN *"}),(0,t.jsx)(o.Input,{id:"loyalty_customer_pin",placeholder:"Auto-filled from customer",value:eS.loyalty_customer_pin,readOnly:!0,className:"bg-gray-50"})]}),(0,t.jsx)("div",{className:"col-span-2 text-sm text-green-700 bg-green-100 p-2 rounded",children:"Points will be calculated at 1 point per KES 100 spent"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"vehicle_number",children:"Vehicle Number (Optional)"}),(0,t.jsx)(o.Input,{id:"vehicle_number",placeholder:"Enter vehicle registration",value:eS.vehicle_number,onChange:e=>ew({...eS,vehicle_number:e.target.value})})]})]}),(0,t.jsxs)(r.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>en(!1),children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:eP,disabled:et,children:et?"Recording...":"Record Sale"})]})]})}),(0,t.jsx)(r.Dialog,{open:eu,onOpenChange:em,children:(0,t.jsxs)(r.DialogContent,{className:"max-w-2xl",children:[(0,t.jsxs)(r.DialogHeader,{children:[(0,t.jsx)(r.DialogTitle,{children:"Generate Credit Note"}),(0,t.jsxs)(r.DialogDescription,{children:["Create a credit note for invoice ",eh?.invoice_number||eh?.receipt_number]})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"reason",children:"Reason for Credit Note *"}),(0,t.jsx)(C.Textarea,{id:"reason",placeholder:"Enter reason for issuing credit note",value:eT.reason,onChange:e=>eF({...eT,reason:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"return_quantity",children:"Return Quantity (Liters)"}),(0,t.jsx)(o.Input,{id:"return_quantity",type:"number",step:"0.001",placeholder:"0.000",value:eT.return_quantity,onChange:e=>eF({...eT,return_quantity:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"refund_amount",children:"Refund Amount (KES) *"}),(0,t.jsx)(o.Input,{id:"refund_amount",type:"number",step:"0.01",placeholder:"0.00",value:eT.refund_amount,onChange:e=>eF({...eT,refund_amount:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"approved_by",children:"Approved By"}),(0,t.jsx)(o.Input,{id:"approved_by",placeholder:"Manager/Supervisor name",value:eT.approved_by,onChange:e=>eF({...eT,approved_by:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"customer_signature",children:"Customer Signature"}),(0,t.jsx)(o.Input,{id:"customer_signature",placeholder:"Customer name/signature",value:eT.customer_signature,onChange:e=>eF({...eT,customer_signature:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"cn_notes",children:"Additional Notes"}),(0,t.jsx)(C.Textarea,{id:"cn_notes",placeholder:"Any additional information",value:eT.notes,onChange:e=>eF({...eT,notes:e.target.value})})]})]}),(0,t.jsxs)(r.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>em(!1),children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:eO,disabled:et,children:"Generate Credit Note"})]})]})}),(0,t.jsx)(r.Dialog,{open:ei,onOpenChange:eo,children:(0,t.jsxs)(r.DialogContent,{children:[(0,t.jsxs)(r.DialogHeader,{children:[(0,t.jsx)(r.DialogTitle,{children:"start"===ec?"Start New Shift":"End Current Shift"}),(0,t.jsx)(r.DialogDescription,{children:"start"===ec?"Enter the shift start details":"Enter the shift closing details"})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:["start"===ec&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"date",children:"Date"}),(0,t.jsx)(o.Input,{id:"date",type:"date",value:eD.date,onChange:e=>ez({...eD,date:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"time",children:"Time"}),(0,t.jsx)(o.Input,{id:"time",type:"time",value:eD.time,onChange:e=>ez({...eD,time:e.target.value})})]})]}),"end"===ec&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"closing_cash",children:"Closing Cash (Optional)"}),(0,t.jsx)(o.Input,{id:"closing_cash",type:"number",step:"0.01",placeholder:"0.00",value:eD.closing_cash,onChange:e=>ez({...eD,closing_cash:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"notes",children:"Notes (Optional)"}),(0,t.jsx)(C.Textarea,{id:"notes",placeholder:"Add any notes about this shift",value:eD.notes,onChange:e=>ez({...eD,notes:e.target.value})})]})]}),(0,t.jsxs)(r.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>eo(!1),children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:"start"===ec?eE:eR,disabled:el,children:"start"===ec?"Start Shift":"End Shift"})]})]})}),(0,t.jsx)(S.ShiftManagementDialog,{open:ex,onOpenChange:ey,branchName:ej?.name,branchId:ej?.id})]})}function V(){let[e,r]=(0,a.useState)(!1);return(0,t.jsxs)("div",{className:"flex min-h-screen bg-gradient-to-b from-slate-900 via-blue-900 to-white",children:[(0,t.jsx)(l.DashboardSidebar,{collapsed:e,onToggle:()=>r(!e)}),(0,t.jsx)("div",{className:"flex-1 flex flex-col ml-8 my-6 mr-6",children:(0,t.jsxs)("div",{className:"bg-white rounded-tl-3xl shadow-2xl flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)(s.DashboardHeader,{}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto bg-slate-50 p-6",children:(0,t.jsxs)("div",{className:"mx-auto max-w-7xl space-y-6",children:[(0,t.jsx)(K,{}),(0,t.jsxs)("footer",{className:"mt-12 border-t pt-6 pb-4 text-center text-sm text-muted-foreground",children:["Powered by ",(0,t.jsx)("span",{className:"font-semibold text-foreground",children:"Sensile Technologies East Africa Ltd"})]})]})})]})})]})}e.s(["default",()=>V],60987)}]);