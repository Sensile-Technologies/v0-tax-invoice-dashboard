(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var s=e.i(43476),t=e.i(47163);function r({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function a({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function i({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...r})}function l({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...r})}function n({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>n,"CardDescription",()=>l,"CardHeader",()=>a,"CardTitle",()=>i])},63209,e=>{"use strict";let s=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>s],63209)},3116,e=>{"use strict";let s=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>s],3116)},23261,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(70065),a=e.i(94179),i=e.i(7486),l=e.i(8402),n=e.i(78583),c=e.i(25652),d=e.i(63209),x=e.i(3116);function o(){let[e,o]=(0,t.useState)(null),[m,h]=(0,t.useState)(!0);(0,t.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("/api/admin/dashboard"),s=await e.json();o(s)}catch(e){console.error("Error fetching dashboard:",e)}finally{h(!1)}},j=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(e);return m?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Admin Dashboard"}),(0,s.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage vendors, support, and billing across Flow360 platform"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsxs)(r.Card,{children:[(0,s.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(r.CardTitle,{className:"text-sm font-medium text-slate-600",children:"Total Vendors"}),(0,s.jsx)(i.Building2,{className:"h-5 w-5 text-blue-600"})]}),(0,s.jsxs)(r.CardContent,{children:[(0,s.jsx)("div",{className:"text-3xl font-bold",children:Number(e?.vendors?.total_vendors||0)}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[Number(e?.vendors?.active_vendors||0)," active"]})]})]}),(0,s.jsxs)(r.Card,{children:[(0,s.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(r.CardTitle,{className:"text-sm font-medium text-slate-600",children:"Open Tickets"}),(0,s.jsx)(l.Ticket,{className:"h-5 w-5 text-orange-600"})]}),(0,s.jsxs)(r.CardContent,{children:[(0,s.jsx)("div",{className:"text-3xl font-bold",children:Number(e?.tickets?.open_tickets||0)}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[Number(e?.tickets?.high_priority_open||0)," high priority"]})]})]}),(0,s.jsxs)(r.Card,{children:[(0,s.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(r.CardTitle,{className:"text-sm font-medium text-slate-600",children:"Pending Invoices"}),(0,s.jsx)(n.FileText,{className:"h-5 w-5 text-yellow-600"})]}),(0,s.jsxs)(r.CardContent,{children:[(0,s.jsx)("div",{className:"text-3xl font-bold",children:Number(e?.invoices?.pending_invoices||0)}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[j(Number(e?.invoices?.pending_amount||0))," outstanding"]})]})]}),(0,s.jsxs)(r.Card,{children:[(0,s.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(r.CardTitle,{className:"text-sm font-medium text-slate-600",children:"Revenue (Paid)"}),(0,s.jsx)(c.TrendingUp,{className:"h-5 w-5 text-green-600"})]}),(0,s.jsxs)(r.CardContent,{children:[(0,s.jsx)("div",{className:"text-3xl font-bold",children:j(Number(e?.invoices?.received_amount||0))}),(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[Number(e?.invoices?.paid_invoices||0)," invoices paid"]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(r.Card,{children:[(0,s.jsxs)(r.CardHeader,{children:[(0,s.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(d.AlertCircle,{className:"h-5 w-5 text-orange-600"}),"Recent Tickets"]}),(0,s.jsx)(r.CardDescription,{children:"Open and in-progress support tickets"})]}),(0,s.jsx)(r.CardContent,{children:e?.recentTickets&&e.recentTickets.length>0?(0,s.jsx)("div",{className:"space-y-3",children:e.recentTickets.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-sm",children:e.subject}),(0,s.jsx)(a.Badge,{variant:"high"===e.priority?"destructive":"secondary",className:"text-xs",children:e.priority})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:e.vendor_name})]}),(0,s.jsx)(a.Badge,{style:{backgroundColor:e.category_color},className:"text-white text-xs",children:e.category_name||"General"})]},e.id))}):(0,s.jsx)("p",{className:"text-slate-500 text-center py-8",children:"No open tickets"})})]}),(0,s.jsxs)(r.Card,{children:[(0,s.jsxs)(r.CardHeader,{children:[(0,s.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(x.Clock,{className:"h-5 w-5 text-blue-600"}),"Recent Vendors"]}),(0,s.jsx)(r.CardDescription,{children:"Newly registered vendors"})]}),(0,s.jsx)(r.CardContent,{children:e?.recentVendors&&e.recentVendors.length>0?(0,s.jsx)("div",{className:"space-y-3",children:e.recentVendors.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:e.email})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)(a.Badge,{variant:"outline",children:[Number(e.branch_count)," branches"]})})]},e.id))}):(0,s.jsx)("p",{className:"text-slate-500 text-center py-8",children:"No vendors yet"})})]})]})]})}e.s(["default",()=>o])}]);