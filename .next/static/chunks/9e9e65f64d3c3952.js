(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11530,e=>{"use strict";var a=e.i(43476),s=e.i(71645),l=e.i(70065),r=e.i(67881),n=e.i(94179),i=e.i(23750),t=e.i(27341),c=e.i(84762),d=e.i(30374),o=e.i(62870),h=e.i(10708),x=e.i(25959),m=e.i(47627),u=e.i(75254);let j=(0,u.default)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),g=(0,u.default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var p=e.i(91741),v=e.i(55436),b=e.i(7233),y=e.i(7486),N=e.i(18393),f=e.i(43531),S=e.i(63209);let w=(0,u.default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var C=e.i(41071);let _=(0,u.default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var T=e.i(40160),k=e.i(26707),D=e.i(27612),I=e.i(39312),A=e.i(31278),L=e.i(63415),P=e.i(46696),H=e.i(1851);function B(){let[e,u]=(0,s.useState)("hardware"),[B,O]=(0,s.useState)([]),[V,F]=(0,s.useState)([]),[R,M]=(0,s.useState)([]),[E,X]=(0,s.useState)([]),[z,q]=(0,s.useState)([]),[$,U]=(0,s.useState)(!0),[K,J]=(0,s.useState)(""),[Z,G]=(0,s.useState)(!1),[Y,Q]=(0,s.useState)(!1),[W,ee]=(0,s.useState)(!1),[ea,es]=(0,s.useState)(null),[el,er]=(0,s.useState)(null),[en,ei]=(0,s.useState)([]),[et,ec]=(0,s.useState)(!1),[ed,eo]=(0,s.useState)(""),[eh,ex]=(0,s.useState)(""),[em,eu]=(0,s.useState)({serial_number:"",device_type:"token",status:"active",branch_id:"",assigned_to:""}),[ej,eg]=(0,s.useState)(!1),[ep,ev]=(0,s.useState)(null),[eb,ey]=(0,s.useState)(""),[eN,ef]=(0,s.useState)(""),[eS,ew]=(0,s.useState)([]),[eC,e_]=(0,s.useState)(!1),[eT,ek]=(0,s.useState)(null),[eD,eI]=(0,s.useState)({company_name:"",contact_name:"",email:"",phone:"",trading_name:"",kra_pin:"",location:"",county:"",address:""}),[eA,eL]=(0,s.useState)({device_token:"",bhf_id:"",server_address:"",server_port:"",hardware_type:"",hardware_serial:"",device_serial_number:"",sr_number:"",pts_id:""}),[eP,eH]=(0,s.useState)(!1);(0,s.useEffect)(()=>{eB()},[]);let eB=async()=>{try{let[e,a,s,l]=await Promise.all([fetch("/api/admin/operations/hardware"),fetch("/api/admin/operations/onboarding"),fetch("/api/admin/operations/signups"),fetch("/api/admin/vendors")]),r=await e.json(),n=await a.json(),i=await s.json(),t=await l.json();O(Array.isArray(r)?r:[]),F(Array.isArray(n)?n:[]),M(Array.isArray(i)?i:[]),X(Array.isArray(t)?t:[])}catch(e){console.error("Error fetching data:",e)}finally{U(!1)}},eO=async e=>{try{let a=await fetch(`/api/admin/vendors/${e}/branches`),s=await a.json();q(Array.isArray(s)?s:[])}catch(e){console.error("Error fetching branches:",e),q([])}},eV=async()=>{if(!em.serial_number)return void P.toast.error("Please enter a serial number");if(!eN)return void P.toast.error("Please select a merchant");if(!em.branch_id)return void P.toast.error("Please select a branch");try{if(!(await fetch("/api/admin/operations/hardware",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({serial_number:em.serial_number,device_type:em.device_type,status:em.status,branch_id:em.branch_id,assigned_to:em.assigned_to||null})})).ok)throw Error("Failed to add hardware");P.toast.success("Hardware added successfully"),G(!1),eu({serial_number:"",device_type:"token",status:"active",branch_id:"",assigned_to:""}),ef(""),ew([]),eB()}catch(e){P.toast.error("Failed to add hardware")}},eF=async()=>{if(ep)try{if(!(await fetch("/api/admin/operations/hardware",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ep.id,serial_number:ep.serial_number,device_type:ep.device_type,status:ep.status})})).ok)throw Error("Failed to update hardware");P.toast.success("Hardware updated successfully"),eg(!1),ev(null),eB()}catch(e){P.toast.error("Failed to update hardware")}},eR=async e=>{try{let a=await fetch("/api/admin/operations/signups",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({lead_id:e,...eD})}),s=await a.json();if(!a.ok)return void(s.message?P.toast.error(s.message):P.toast.error(s.error||"Failed to save changes"));P.toast.success("Changes saved successfully"),e_(!1),ek(null),eB()}catch(e){P.toast.error("Failed to save changes")}},eM=async(e,a)=>{if(confirm(`Remove "${a}" from signup requests? This will move the lead back to the contracting stage in the sales pipeline.`))try{let a=await fetch(`/api/admin/operations/signups?id=${e}`,{method:"DELETE"}),s=await a.json();if(!a.ok)return void P.toast.error(s.error||"Failed to remove from signup requests");P.toast.success("Lead moved back to contracting stage"),eB()}catch(e){P.toast.error("Failed to remove from signup requests")}},eE=async e=>{if(ea)try{if(!(await fetch("/api/admin/operations/hardware",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ea.id,branch_id:e})})).ok)throw Error("Failed to assign hardware");P.toast.success("Hardware assigned successfully"),Q(!1),es(null),eB()}catch(e){P.toast.error("Failed to assign hardware")}},eX=async()=>{if(0===en.length||!eh)return void P.toast.error("Please select hardware and a branch");try{let e=0,a=0;for(let s of en)(await fetch("/api/admin/operations/hardware",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s,branch_id:eh})})).ok?e++:a++;a>0?P.toast.warning(`${e} device(s) assigned, ${a} failed`):P.toast.success(`${e} device(s) assigned successfully`),ec(!1),ei([]),eo(""),ex(""),eB()}catch(e){P.toast.error("Failed to assign hardware")}},ez=B.filter(e=>"available"===e.status),eq=async()=>{if(!el){console.error("[Onboarding] No selected request"),P.toast.error("No request selected");return}console.log("[Onboarding] Saving configuration for:",el.id,eA);try{let e=await fetch("/api/admin/operations/onboarding",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:el.id,branch_id:el.branch_id,...eA})});if(console.log("[Onboarding] Response status:",e.status),!e.ok){let a=await e.json();throw console.error("[Onboarding] Error:",a),Error(a.error||"Failed to configure")}let a=await e.json();console.log("[Onboarding] Success:",a),P.toast.success("Configuration saved successfully"),ee(!1),er(null),eL({device_token:"",bhf_id:"",server_address:"",server_port:"",hardware_type:"",hardware_serial:"",device_serial_number:"",sr_number:"",pts_id:""}),eB()}catch(e){console.error("[Onboarding] Error:",e),P.toast.error(e.message||"Failed to save configuration")}},e$=async()=>{if(!el?.branch_id)return void P.toast.error("Branch ID not available for initialization");eH(!0);try{let e=await fetch("/api/kra/initialize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch_id:el.branch_id})}),a=await e.json();if(!e.ok)return void P.toast.error(a.error||"Failed to initialize");a.success?P.toast.success("KRA initialization successful - logged to branch profile"):P.toast.warning("KRA initialization completed with errors - check branch logs")}catch(e){P.toast.error(e.message||"Failed to initialize branch")}finally{eH(!1)}},eU=B.filter(e=>e.serial_number?.toLowerCase().includes(K.toLowerCase())||e.merchant_name?.toLowerCase().includes(K.toLowerCase())||e.branch_name?.toLowerCase().includes(K.toLowerCase()));return $?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Operations"}),(0,a.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage hardware, onboarding, and merchant signups"})]})}),(0,a.jsxs)(t.Tabs,{value:e,onValueChange:u,children:[(0,a.jsxs)(t.TabsList,{children:[(0,a.jsxs)(t.TabsTrigger,{value:"hardware",children:[(0,a.jsx)(j,{className:"h-4 w-4 mr-2"}),"Hardware"]}),(0,a.jsxs)(t.TabsTrigger,{value:"onboarding",children:[(0,a.jsx)(p.ClipboardList,{className:"h-4 w-4 mr-2"}),"Onboarding Requests",V.length>0&&(0,a.jsx)(n.Badge,{className:"ml-2 bg-orange-500",children:V.length})]}),(0,a.jsxs)(t.TabsTrigger,{value:"signups",children:[(0,a.jsx)(g,{className:"h-4 w-4 mr-2"}),"Signup Requests",R.length>0&&(0,a.jsx)(n.Badge,{className:"ml-2 bg-blue-500",children:R.length})]})]}),(0,a.jsxs)(t.TabsContent,{value:"hardware",className:"space-y-4 mt-4",children:[(0,a.jsx)(l.Card,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:(0,a.jsxs)(l.CardContent,{className:"flex items-center justify-between py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(k.Smartphone,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900",children:"Flow360 Mobile App (APK)"}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Download and install on Sunmi V2S POS devices"})]})]}),(0,a.jsx)(r.Button,{asChild:!0,className:"bg-blue-600 hover:bg-blue-700",children:(0,a.jsxs)("a",{href:"https://expo.dev/artifacts/eas/dcUYY5o4dxff5X3VZU23f8.apk",target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)(T.Download,{className:"h-4 w-4 mr-2"}),"Download APK"]})})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(v.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),(0,a.jsx)(i.Input,{placeholder:"Search hardware...",value:K,onChange:e=>J(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[en.length>0&&(0,a.jsxs)(d.Dialog,{open:et,onOpenChange:ec,children:[(0,a.jsx)(d.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(r.Button,{variant:"outline",children:[(0,a.jsx)(y.Building2,{className:"h-4 w-4 mr-2"}),"Assign ",en.length," Device(s)"]})}),(0,a.jsxs)(d.DialogContent,{children:[(0,a.jsxs)(d.DialogHeader,{children:[(0,a.jsx)(d.DialogTitle,{children:"Assign Hardware to Branch"}),(0,a.jsxs)(d.DialogDescription,{children:["Assign ",en.length," selected device(s) to a branch"]})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Merchant"}),(0,a.jsxs)(o.Select,{value:ed,onValueChange:e=>{eo(e),ex(""),eO(e)},children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{placeholder:"Select merchant"})}),(0,a.jsx)(o.SelectContent,{children:E.map(e=>(0,a.jsx)(o.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),ed&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Branch"}),(0,a.jsxs)(o.Select,{value:eh,onValueChange:ex,children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{placeholder:"Select branch"})}),(0,a.jsx)(o.SelectContent,{children:z.map(e=>(0,a.jsx)(o.SelectItem,{value:e.id,children:e.bhf_nm||e.name},e.id))})]})]}),(0,a.jsx)(r.Button,{onClick:eX,className:"w-full",disabled:!eh,children:"Assign to Branch"})]})]})]}),(0,a.jsxs)(d.Dialog,{open:Z,onOpenChange:G,children:[(0,a.jsx)(d.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(r.Button,{children:[(0,a.jsx)(b.Plus,{className:"h-4 w-4 mr-2"}),"Add Hardware"]})}),(0,a.jsxs)(d.DialogContent,{className:"max-w-lg",children:[(0,a.jsxs)(d.DialogHeader,{children:[(0,a.jsx)(d.DialogTitle,{children:"Add Hardware"}),(0,a.jsx)(d.DialogDescription,{children:"Register a new hardware device"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Serial Number *"}),(0,a.jsx)(i.Input,{value:em.serial_number,onChange:e=>eu({...em,serial_number:e.target.value}),placeholder:"SN-XXXX-XXXX"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Device Type *"}),(0,a.jsxs)(o.Select,{value:em.device_type,onValueChange:e=>eu({...em,device_type:e}),children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{})}),(0,a.jsxs)(o.SelectContent,{children:[(0,a.jsx)(o.SelectItem,{value:"token",children:"Hardware Token"}),(0,a.jsx)(o.SelectItem,{value:"printer",children:"Fiscal Printer"}),(0,a.jsx)(o.SelectItem,{value:"terminal",children:"POS Terminal"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Status"}),(0,a.jsxs)(o.Select,{value:em.status,onValueChange:e=>eu({...em,status:e}),children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{})}),(0,a.jsxs)(o.SelectContent,{children:[(0,a.jsx)(o.SelectItem,{value:"active",children:"Active"}),(0,a.jsx)(o.SelectItem,{value:"inactive",children:"Inactive"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Merchant *"}),(0,a.jsxs)(o.Select,{value:eN,onValueChange:e=>{ef(e),eu({...em,branch_id:""}),fetch(`/api/admin/vendors/${e}/branches`).then(e=>e.json()).then(e=>ew(Array.isArray(e)?e:[])).catch(()=>ew([]))},children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{placeholder:"Select merchant"})}),(0,a.jsx)(o.SelectContent,{children:E.map(e=>(0,a.jsx)(o.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Branch *"}),(0,a.jsxs)(o.Select,{value:em.branch_id,onValueChange:e=>eu({...em,branch_id:e}),disabled:!eN,children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{placeholder:eN?"Select branch":"Select merchant first"})}),(0,a.jsx)(o.SelectContent,{children:eS.map(e=>(0,a.jsx)(o.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsx)(r.Button,{onClick:eV,className:"w-full",children:"Add Hardware"})]})]})]})]})]}),(0,a.jsx)(l.Card,{children:(0,a.jsx)(l.CardContent,{className:"p-0",children:(0,a.jsxs)(m.Table,{children:[(0,a.jsx)(m.TableHeader,{children:(0,a.jsxs)(m.TableRow,{children:[(0,a.jsx)(m.TableHead,{className:"w-12",children:(0,a.jsx)(x.Checkbox,{checked:ez.length>0&&en.length===ez.length,onCheckedChange:e=>{e?ei(ez.map(e=>e.id)):ei([])}})}),(0,a.jsx)(m.TableHead,{children:"Serial Number"}),(0,a.jsx)(m.TableHead,{children:"Device Type"}),(0,a.jsx)(m.TableHead,{children:"Status"}),(0,a.jsx)(m.TableHead,{children:"Assigned To"}),(0,a.jsx)(m.TableHead,{children:"Date Added"}),(0,a.jsx)(m.TableHead,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(m.TableBody,{children:eU.map(e=>(0,a.jsxs)(m.TableRow,{children:[(0,a.jsx)(m.TableCell,{children:"available"===e.status&&(0,a.jsx)(x.Checkbox,{checked:en.includes(e.id),onCheckedChange:()=>{var a;return a=e.id,void ei(e=>e.includes(a)?e.filter(e=>e!==a):[...e,a])}})}),(0,a.jsx)(m.TableCell,{className:"font-mono font-semibold",children:e.serial_number}),(0,a.jsx)(m.TableCell,{className:"capitalize",children:e.device_type}),(0,a.jsx)(m.TableCell,{children:(0,a.jsx)(n.Badge,{className:(e=>{switch(e){case"available":case"completed":return"bg-green-100 text-green-800";case"assigned":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-slate-100 text-slate-800"}})(e.status),children:e.status})}),(0,a.jsx)(m.TableCell,{children:e.branch_name?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.branch_name}),e.merchant_name&&(0,a.jsx)("div",{className:"text-sm text-slate-500",children:e.merchant_name})]}):(0,a.jsx)("span",{className:"text-slate-400",children:"-"})}),(0,a.jsx)(m.TableCell,{children:(0,H.format)(new Date(e.created_at),"MMM d, yyyy")}),(0,a.jsx)(m.TableCell,{className:"text-right",children:(0,a.jsxs)(L.DropdownMenu,{children:[(0,a.jsx)(L.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(r.Button,{variant:"ghost",size:"icon",children:(0,a.jsx)(C.MoreHorizontal,{className:"h-4 w-4"})})}),(0,a.jsxs)(L.DropdownMenuContent,{align:"end",children:[(0,a.jsxs)(L.DropdownMenuItem,{onClick:()=>{ev(e),eg(!0)},children:[(0,a.jsx)(_,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,a.jsxs)(L.DropdownMenuItem,{onClick:()=>{es(e),Q(!0)},children:[(0,a.jsx)(y.Building2,{className:"h-4 w-4 mr-2"}),e.branch_id?"Reassign":"Assign"]})]})]})})]},e.id))})]})})}),0===eU.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(j,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-500",children:"No hardware registered yet"})]})]}),(0,a.jsxs)(t.TabsContent,{value:"onboarding",className:"space-y-4 mt-4",children:[(0,a.jsx)("div",{className:"grid gap-4",children:V.map(e=>(0,a.jsx)(l.Card,{className:"border-orange-200 bg-orange-50",children:(0,a.jsx)(l.CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-orange-100",children:(0,a.jsx)(S.AlertCircle,{className:"h-5 w-5 text-orange-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:e.merchant_name}),(0,a.jsx)(n.Badge,{className:"bg-orange-100 text-orange-700",children:"Pending Onboarding"})]}),e.trading_name&&(0,a.jsxs)("div",{className:"text-sm text-slate-600",children:["Trading Name: ",e.trading_name]}),e.kra_pin&&(0,a.jsxs)("div",{className:"text-sm text-slate-600",children:["KRA PIN: ",e.kra_pin]}),(0,a.jsxs)("div",{className:"text-sm text-slate-500",children:[e.contact_name&&`Contact: ${e.contact_name}`,e.contact_email&&` - ${e.contact_email}`,e.contact_phone&&` - ${e.contact_phone}`]}),(0,a.jsxs)("div",{className:"text-sm text-slate-500",children:[e.location&&`${e.location}`,e.county&&`, ${e.county}`,(e.location||e.county)&&" - ",(0,H.format)(new Date(e.created_at),"MMM d, yyyy")]})]})]}),(0,a.jsxs)(r.Button,{onClick:()=>{er(e),ee(!0)},children:[(0,a.jsx)(N.Server,{className:"h-4 w-4 mr-2"}),"Configure"]})]})})},e.id))}),0===V.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(p.ClipboardList,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-500",children:"No leads pending onboarding configuration"}),(0,a.jsx)("p",{className:"text-sm text-slate-400 mt-2",children:"Leads that have signed up will appear here for configuration"})]})]}),(0,a.jsx)(t.TabsContent,{value:"signups",className:"space-y-4 mt-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Pending Signups (Onboarding Stage)"}),R.map(e=>(0,a.jsx)(l.Card,{children:(0,a.jsx)(l.CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(g,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:e.company_name}),(0,a.jsxs)("div",{className:"text-sm text-slate-500",children:[e.contact_name," - ",e.email]}),(0,a.jsxs)("div",{className:"text-sm text-slate-500",children:[e.phone,e.sales_person_name&&` - Sales: ${e.sales_person_name}`]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(r.Button,{variant:"outline",size:"sm",children:[(0,a.jsx)(w,{className:"h-4 w-4 mr-2"}),"Contact"]}),(0,a.jsxs)(r.Button,{size:"sm",onClick:()=>{ek(e),eI({company_name:e.company_name||"",contact_name:e.contact_name||"",email:e.email||"",phone:e.phone||"",trading_name:e.trading_name||"",kra_pin:e.kra_pin||"",location:e.location||"",county:e.county||"",address:e.address||""}),e_(!0)},children:[(0,a.jsx)(_,{className:"h-4 w-4 mr-2"}),"Review"]}),(0,a.jsxs)(r.Button,{variant:"destructive",size:"sm",onClick:()=>eM(e.lead_id,e.company_name),children:[(0,a.jsx)(D.Trash2,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]})})},e.lead_id)),0===R.length&&(0,a.jsxs)("div",{className:"text-center py-12 bg-slate-50 rounded-lg",children:[(0,a.jsx)(g,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-500",children:"No pending signup requests"})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)(l.Card,{children:[(0,a.jsxs)(l.CardHeader,{children:[(0,a.jsx)(l.CardTitle,{children:"Signup Instructions"}),(0,a.jsx)(l.CardDescription,{children:"Guide for merchants on how to sign up"})]}),(0,a.jsx)(l.CardContent,{children:(0,a.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,a.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-base mb-2",children:"Step 1: Account Creation"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-slate-600",children:[(0,a.jsx)("li",{children:"Go to the Flow360 portal"}),(0,a.jsx)("li",{children:'Click on "Sign Up" or "Register"'}),(0,a.jsx)("li",{children:"Fill in company details (Name, KRA PIN, Email, Phone)"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-base mb-2",children:"Step 2: Branch Setup"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-slate-600",children:[(0,a.jsx)("li",{children:"Log in to the dashboard"}),(0,a.jsx)("li",{children:'Navigate to "Branches" section'}),(0,a.jsx)("li",{children:"Add each fuel station location"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-base mb-2",children:"Step 3: Operations Configuration"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-slate-600",children:[(0,a.jsx)("li",{children:"Contact Operations team for Device Token, BHF ID"}),(0,a.jsx)("li",{children:"Receive Server Address and Port"}),(0,a.jsx)("li",{children:"Configuration done by Operations team"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-base mb-2",children:"Support"}),(0,a.jsxs)("ul",{className:"space-y-1 text-slate-600",children:[(0,a.jsx)("li",{children:"Email: support@flow360.co.ke"}),(0,a.jsx)("li",{children:"Phone: +254 700 000 000"})]})]})]})})})]})})]})})]}),(0,a.jsx)(d.Dialog,{open:Y,onOpenChange:Q,children:(0,a.jsxs)(d.DialogContent,{children:[(0,a.jsxs)(d.DialogHeader,{children:[(0,a.jsx)(d.DialogTitle,{children:"Assign Hardware"}),(0,a.jsxs)(d.DialogDescription,{children:["Assign ",ea?.serial_number," to a branch"]})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Merchant"}),(0,a.jsxs)(o.Select,{onValueChange:e=>eO(e),children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{placeholder:"Select merchant"})}),(0,a.jsx)(o.SelectContent,{children:E.map(e=>(0,a.jsx)(o.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Branch"}),(0,a.jsxs)(o.Select,{onValueChange:eE,children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{placeholder:"Select branch"})}),(0,a.jsx)(o.SelectContent,{children:z.map(e=>(0,a.jsx)(o.SelectItem,{value:e.id,children:e.bhf_nm},e.id))})]})]})]})]})}),(0,a.jsx)(d.Dialog,{open:W,onOpenChange:ee,children:(0,a.jsxs)(d.DialogContent,{children:[(0,a.jsxs)(d.DialogHeader,{children:[(0,a.jsx)(d.DialogTitle,{children:"Configure Onboarding"}),(0,a.jsxs)(d.DialogDescription,{children:["Configure device settings for ",el?.merchant_name,el?.branch_name&&` - ${el.branch_name}`]})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(el?.trading_name||el?.kra_pin)&&(0,a.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg space-y-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-slate-700",children:"Business Details"}),el?.trading_name&&(0,a.jsxs)("div",{className:"text-sm text-slate-600",children:["Trading Name: ",(0,a.jsx)("span",{className:"font-medium",children:el.trading_name})]}),el?.kra_pin&&(0,a.jsxs)("div",{className:"text-sm text-slate-600",children:["KRA PIN: ",(0,a.jsx)("span",{className:"font-medium",children:el.kra_pin})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Device Token"}),(0,a.jsx)(i.Input,{value:eA.device_token,onChange:e=>eL({...eA,device_token:e.target.value}),placeholder:"Enter device token"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"BHF ID (Branch Fiscal ID)"}),(0,a.jsx)(i.Input,{value:eA.bhf_id,onChange:e=>eL({...eA,bhf_id:e.target.value}),placeholder:"e.g., 01"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Server Address"}),(0,a.jsx)(i.Input,{value:eA.server_address,onChange:e=>eL({...eA,server_address:e.target.value}),placeholder:"api.kra.go.ke"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Server Port"}),(0,a.jsx)(i.Input,{value:eA.server_port,onChange:e=>eL({...eA,server_port:e.target.value}),placeholder:"8080"})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4 mt-2",children:[(0,a.jsx)(h.Label,{className:"text-base font-semibold mb-3 block",children:"Device Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Device Serial Number"}),(0,a.jsx)(i.Input,{value:eA.device_serial_number,onChange:e=>eL({...eA,device_serial_number:e.target.value}),placeholder:"Device serial number"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"SR Number"}),(0,a.jsx)(i.Input,{value:eA.sr_number,onChange:e=>eL({...eA,sr_number:e.target.value}),placeholder:"SR number"})]})]}),(0,a.jsxs)("div",{className:"space-y-2 mt-4",children:[(0,a.jsx)(h.Label,{children:"PTS ID (Controller ID)"}),(0,a.jsx)(i.Input,{value:eA.pts_id,onChange:e=>eL({...eA,pts_id:e.target.value}),placeholder:"e.g., 003A003A..."}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"The unique identifier for the pump controller. Used to match pump callbacks to this branch."})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4 mt-2",children:[(0,a.jsx)(h.Label,{className:"text-base font-semibold mb-3 block",children:"Hardware Assignment"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Hardware Type"}),(0,a.jsxs)(o.Select,{value:eA.hardware_type,onValueChange:e=>eL({...eA,hardware_type:e}),children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{placeholder:"Select type"})}),(0,a.jsxs)(o.SelectContent,{children:[(0,a.jsx)(o.SelectItem,{value:"token",children:"Hardware Token"}),(0,a.jsx)(o.SelectItem,{value:"printer",children:"Fiscal Printer"}),(0,a.jsx)(o.SelectItem,{value:"terminal",children:"POS Terminal"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Serial Number"}),(0,a.jsx)(i.Input,{value:eA.hardware_serial,onChange:e=>eL({...eA,hardware_serial:e.target.value}),placeholder:"SN-XXXX-XXXX"})]})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Hardware will be registered and assigned to this branch when configuration is saved."})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(r.Button,{variant:"outline",onClick:e$,disabled:eP,className:"gap-2",children:[eP?(0,a.jsx)(A.Loader2,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(I.Zap,{className:"h-4 w-4"}),"Initialize"]}),(0,a.jsxs)(r.Button,{onClick:eq,className:"flex-1",children:[(0,a.jsx)(f.Check,{className:"h-4 w-4 mr-2"}),"Save Configuration"]})]})]})]})}),(0,a.jsx)(d.Dialog,{open:eC,onOpenChange:e_,children:(0,a.jsxs)(d.DialogContent,{className:"max-w-2xl",children:[(0,a.jsxs)(d.DialogHeader,{children:[(0,a.jsx)(d.DialogTitle,{children:"Review Signup Request"}),(0,a.jsx)(d.DialogDescription,{children:"Review and edit details before moving to onboarding"})]}),eT&&(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Company Name *"}),(0,a.jsx)(i.Input,{value:eD.company_name,onChange:e=>eI({...eD,company_name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Trading Name"}),(0,a.jsx)(i.Input,{value:eD.trading_name,onChange:e=>eI({...eD,trading_name:e.target.value}),placeholder:"Trading/Business Name"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Contact Name *"}),(0,a.jsx)(i.Input,{value:eD.contact_name,onChange:e=>eI({...eD,contact_name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"KRA PIN"}),(0,a.jsx)(i.Input,{value:eD.kra_pin,onChange:e=>eI({...eD,kra_pin:e.target.value}),placeholder:"e.g., P051234567Z"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Email *"}),(0,a.jsx)(i.Input,{type:"email",value:eD.email,onChange:e=>eI({...eD,email:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Phone *"}),(0,a.jsx)(i.Input,{value:eD.phone,onChange:e=>eI({...eD,phone:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Location"}),(0,a.jsx)(i.Input,{value:eD.location,onChange:e=>eI({...eD,location:e.target.value}),placeholder:"Town/Area"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"County"}),(0,a.jsx)(i.Input,{value:eD.county,onChange:e=>eI({...eD,county:e.target.value}),placeholder:"County"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Address"}),(0,a.jsx)(c.Textarea,{value:eD.address,onChange:e=>eI({...eD,address:e.target.value}),placeholder:"Full address",rows:2})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(r.Button,{variant:"outline",onClick:()=>e_(!1),className:"flex-1",children:"Cancel"}),(0,a.jsxs)(r.Button,{onClick:()=>eR(eT.lead_id),className:"flex-1",children:[(0,a.jsx)(f.Check,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})}),(0,a.jsx)(d.Dialog,{open:ej,onOpenChange:eg,children:(0,a.jsxs)(d.DialogContent,{children:[(0,a.jsxs)(d.DialogHeader,{children:[(0,a.jsx)(d.DialogTitle,{children:"Edit Hardware"}),(0,a.jsx)(d.DialogDescription,{children:"Update hardware device details"})]}),ep&&(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Serial Number"}),(0,a.jsx)(i.Input,{value:ep.serial_number,onChange:e=>ev({...ep,serial_number:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Device Type"}),(0,a.jsxs)(o.Select,{value:ep.device_type,onValueChange:e=>ev({...ep,device_type:e}),children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{})}),(0,a.jsxs)(o.SelectContent,{children:[(0,a.jsx)(o.SelectItem,{value:"token",children:"Hardware Token"}),(0,a.jsx)(o.SelectItem,{value:"printer",children:"Fiscal Printer"}),(0,a.jsx)(o.SelectItem,{value:"terminal",children:"POS Terminal"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Status"}),(0,a.jsxs)(o.Select,{value:ep.status,onValueChange:e=>ev({...ep,status:e}),children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{})}),(0,a.jsxs)(o.SelectContent,{children:[(0,a.jsx)(o.SelectItem,{value:"active",children:"Active"}),(0,a.jsx)(o.SelectItem,{value:"inactive",children:"Inactive"})]})]})]}),(0,a.jsx)(r.Button,{onClick:eF,className:"w-full",children:"Save Changes"})]})]})})]})}e.s(["default",()=>B],11530)}]);