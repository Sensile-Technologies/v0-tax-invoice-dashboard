(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11530,e=>{"use strict";var a=e.i(43476),s=e.i(71645),l=e.i(70065),n=e.i(67881),i=e.i(94179),r=e.i(23750),t=e.i(27341),c=e.i(84762),d=e.i(30374),o=e.i(62870),h=e.i(10708),x=e.i(25959),m=e.i(47627),j=e.i(75254);let u=(0,j.default)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),g=(0,j.default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),p=(0,j.default)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var v=e.i(55436),y=e.i(7233),b=e.i(7486),N=e.i(18393),S=e.i(43531),f=e.i(63209);let w=(0,j.default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),C=(0,j.default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),_=(0,j.default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var T=e.i(63415),k=e.i(46696),D=e.i(1851);function I(){let[e,j]=(0,s.useState)("hardware"),[I,A]=(0,s.useState)([]),[L,H]=(0,s.useState)([]),[B,P]=(0,s.useState)([]),[O,M]=(0,s.useState)([]),[V,F]=(0,s.useState)([]),[R,X]=(0,s.useState)(!0),[E,$]=(0,s.useState)(""),[U,q]=(0,s.useState)(!1),[z,J]=(0,s.useState)(!1),[K,G]=(0,s.useState)(!1),[Z,Q]=(0,s.useState)(null),[W,Y]=(0,s.useState)(null),[ee,ea]=(0,s.useState)([]),[es,el]=(0,s.useState)(!1),[en,ei]=(0,s.useState)(""),[er,et]=(0,s.useState)(""),[ec,ed]=(0,s.useState)({serial_number:"",device_type:"token",status:"active",branch_id:"",assigned_to:""}),[eo,eh]=(0,s.useState)(!1),[ex,em]=(0,s.useState)(null),[ej,eu]=(0,s.useState)(""),[eg,ep]=(0,s.useState)(""),[ev,ey]=(0,s.useState)([]),[eb,eN]=(0,s.useState)(!1),[eS,ef]=(0,s.useState)(null),[ew,eC]=(0,s.useState)({company_name:"",contact_name:"",email:"",phone:"",trading_name:"",kra_pin:"",location:"",county:"",address:""}),[e_,eT]=(0,s.useState)({device_token:"",bhf_id:"",server_address:"",server_port:"",hardware_type:"",hardware_serial:""});(0,s.useEffect)(()=>{ek()},[]);let ek=async()=>{try{let[e,a,s,l]=await Promise.all([fetch("/api/admin/operations/hardware"),fetch("/api/admin/operations/onboarding"),fetch("/api/admin/operations/signups"),fetch("/api/admin/vendors")]),n=await e.json(),i=await a.json(),r=await s.json(),t=await l.json();A(Array.isArray(n)?n:[]),H(Array.isArray(i)?i:[]),P(Array.isArray(r)?r:[]),M(Array.isArray(t)?t:[])}catch(e){console.error("Error fetching data:",e)}finally{X(!1)}},eD=async e=>{try{let a=await fetch(`/api/admin/vendors/${e}/branches`),s=await a.json();F(Array.isArray(s)?s:[])}catch(e){console.error("Error fetching branches:",e),F([])}},eI=async()=>{if(!ec.serial_number)return void k.toast.error("Please enter a serial number");if(!eg)return void k.toast.error("Please select a merchant");if(!ec.branch_id)return void k.toast.error("Please select a branch");try{if(!(await fetch("/api/admin/operations/hardware",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({serial_number:ec.serial_number,device_type:ec.device_type,status:ec.status,branch_id:ec.branch_id,assigned_to:ec.assigned_to||null})})).ok)throw Error("Failed to add hardware");k.toast.success("Hardware added successfully"),q(!1),ed({serial_number:"",device_type:"token",status:"active",branch_id:"",assigned_to:""}),ep(""),ey([]),ek()}catch(e){k.toast.error("Failed to add hardware")}},eA=async()=>{if(ex)try{if(!(await fetch("/api/admin/operations/hardware",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ex.id,serial_number:ex.serial_number,device_type:ex.device_type,status:ex.status})})).ok)throw Error("Failed to update hardware");k.toast.success("Hardware updated successfully"),eh(!1),em(null),ek()}catch(e){k.toast.error("Failed to update hardware")}},eL=async e=>{try{let a=await fetch("/api/admin/operations/signups",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({lead_id:e,...ew})}),s=await a.json();if(!a.ok)return void(s.message?k.toast.error(s.message):k.toast.error(s.error||"Failed to move to onboarding"));k.toast.success("Branch verified! Lead moved to Onboarding Requests"),eN(!1),ef(null),ek()}catch(e){k.toast.error("Failed to move to onboarding")}},eH=async e=>{if(Z)try{if(!(await fetch("/api/admin/operations/hardware",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Z.id,branch_id:e})})).ok)throw Error("Failed to assign hardware");k.toast.success("Hardware assigned successfully"),J(!1),Q(null),ek()}catch(e){k.toast.error("Failed to assign hardware")}},eB=async()=>{if(0===ee.length||!er)return void k.toast.error("Please select hardware and a branch");try{let e=0,a=0;for(let s of ee)(await fetch("/api/admin/operations/hardware",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s,branch_id:er})})).ok?e++:a++;a>0?k.toast.warning(`${e} device(s) assigned, ${a} failed`):k.toast.success(`${e} device(s) assigned successfully`),el(!1),ea([]),ei(""),et(""),ek()}catch(e){k.toast.error("Failed to assign hardware")}},eP=I.filter(e=>"available"===e.status),eO=async()=>{if(W)try{if(!(await fetch("/api/admin/operations/onboarding",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:W.id,branch_id:W.branch_id,...e_})})).ok)throw Error("Failed to configure");k.toast.success("Configuration saved successfully"),G(!1),Y(null),eT({device_token:"",bhf_id:"",server_address:"",server_port:"",hardware_type:"",hardware_serial:""}),ek()}catch(e){k.toast.error("Failed to save configuration")}},eM=I.filter(e=>e.serial_number?.toLowerCase().includes(E.toLowerCase())||e.merchant_name?.toLowerCase().includes(E.toLowerCase())||e.branch_name?.toLowerCase().includes(E.toLowerCase()));return R?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Operations"}),(0,a.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage hardware, onboarding, and merchant signups"})]})}),(0,a.jsxs)(t.Tabs,{value:e,onValueChange:j,children:[(0,a.jsxs)(t.TabsList,{children:[(0,a.jsxs)(t.TabsTrigger,{value:"hardware",children:[(0,a.jsx)(u,{className:"h-4 w-4 mr-2"}),"Hardware"]}),(0,a.jsxs)(t.TabsTrigger,{value:"onboarding",children:[(0,a.jsx)(p,{className:"h-4 w-4 mr-2"}),"Onboarding Requests",L.length>0&&(0,a.jsx)(i.Badge,{className:"ml-2 bg-orange-500",children:L.length})]}),(0,a.jsxs)(t.TabsTrigger,{value:"signups",children:[(0,a.jsx)(g,{className:"h-4 w-4 mr-2"}),"Signup Requests",B.length>0&&(0,a.jsx)(i.Badge,{className:"ml-2 bg-blue-500",children:B.length})]})]}),(0,a.jsxs)(t.TabsContent,{value:"hardware",className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(v.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),(0,a.jsx)(r.Input,{placeholder:"Search hardware...",value:E,onChange:e=>$(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[ee.length>0&&(0,a.jsxs)(d.Dialog,{open:es,onOpenChange:el,children:[(0,a.jsx)(d.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(n.Button,{variant:"outline",children:[(0,a.jsx)(b.Building2,{className:"h-4 w-4 mr-2"}),"Assign ",ee.length," Device(s)"]})}),(0,a.jsxs)(d.DialogContent,{children:[(0,a.jsxs)(d.DialogHeader,{children:[(0,a.jsx)(d.DialogTitle,{children:"Assign Hardware to Branch"}),(0,a.jsxs)(d.DialogDescription,{children:["Assign ",ee.length," selected device(s) to a branch"]})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Merchant"}),(0,a.jsxs)(o.Select,{value:en,onValueChange:e=>{ei(e),et(""),eD(e)},children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{placeholder:"Select merchant"})}),(0,a.jsx)(o.SelectContent,{children:O.map(e=>(0,a.jsx)(o.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),en&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Branch"}),(0,a.jsxs)(o.Select,{value:er,onValueChange:et,children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{placeholder:"Select branch"})}),(0,a.jsx)(o.SelectContent,{children:V.map(e=>(0,a.jsx)(o.SelectItem,{value:e.id,children:e.bhf_nm||e.name},e.id))})]})]}),(0,a.jsx)(n.Button,{onClick:eB,className:"w-full",disabled:!er,children:"Assign to Branch"})]})]})]}),(0,a.jsxs)(d.Dialog,{open:U,onOpenChange:q,children:[(0,a.jsx)(d.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(n.Button,{children:[(0,a.jsx)(y.Plus,{className:"h-4 w-4 mr-2"}),"Add Hardware"]})}),(0,a.jsxs)(d.DialogContent,{className:"max-w-lg",children:[(0,a.jsxs)(d.DialogHeader,{children:[(0,a.jsx)(d.DialogTitle,{children:"Add Hardware"}),(0,a.jsx)(d.DialogDescription,{children:"Register a new hardware device"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Serial Number *"}),(0,a.jsx)(r.Input,{value:ec.serial_number,onChange:e=>ed({...ec,serial_number:e.target.value}),placeholder:"SN-XXXX-XXXX"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Device Type *"}),(0,a.jsxs)(o.Select,{value:ec.device_type,onValueChange:e=>ed({...ec,device_type:e}),children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{})}),(0,a.jsxs)(o.SelectContent,{children:[(0,a.jsx)(o.SelectItem,{value:"token",children:"Hardware Token"}),(0,a.jsx)(o.SelectItem,{value:"printer",children:"Fiscal Printer"}),(0,a.jsx)(o.SelectItem,{value:"terminal",children:"POS Terminal"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Status"}),(0,a.jsxs)(o.Select,{value:ec.status,onValueChange:e=>ed({...ec,status:e}),children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{})}),(0,a.jsxs)(o.SelectContent,{children:[(0,a.jsx)(o.SelectItem,{value:"active",children:"Active"}),(0,a.jsx)(o.SelectItem,{value:"inactive",children:"Inactive"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Merchant *"}),(0,a.jsxs)(o.Select,{value:eg,onValueChange:e=>{ep(e),ed({...ec,branch_id:""}),fetch(`/api/admin/vendors/${e}/branches`).then(e=>e.json()).then(e=>ey(Array.isArray(e)?e:[])).catch(()=>ey([]))},children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{placeholder:"Select merchant"})}),(0,a.jsx)(o.SelectContent,{children:O.map(e=>(0,a.jsx)(o.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Branch *"}),(0,a.jsxs)(o.Select,{value:ec.branch_id,onValueChange:e=>ed({...ec,branch_id:e}),disabled:!eg,children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{placeholder:eg?"Select branch":"Select merchant first"})}),(0,a.jsx)(o.SelectContent,{children:ev.map(e=>(0,a.jsx)(o.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsx)(n.Button,{onClick:eI,className:"w-full",children:"Add Hardware"})]})]})]})]})]}),(0,a.jsx)(l.Card,{children:(0,a.jsx)(l.CardContent,{className:"p-0",children:(0,a.jsxs)(m.Table,{children:[(0,a.jsx)(m.TableHeader,{children:(0,a.jsxs)(m.TableRow,{children:[(0,a.jsx)(m.TableHead,{className:"w-12",children:(0,a.jsx)(x.Checkbox,{checked:eP.length>0&&ee.length===eP.length,onCheckedChange:e=>{e?ea(eP.map(e=>e.id)):ea([])}})}),(0,a.jsx)(m.TableHead,{children:"Serial Number"}),(0,a.jsx)(m.TableHead,{children:"Device Type"}),(0,a.jsx)(m.TableHead,{children:"Status"}),(0,a.jsx)(m.TableHead,{children:"Assigned To"}),(0,a.jsx)(m.TableHead,{children:"Date Added"}),(0,a.jsx)(m.TableHead,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(m.TableBody,{children:eM.map(e=>(0,a.jsxs)(m.TableRow,{children:[(0,a.jsx)(m.TableCell,{children:"available"===e.status&&(0,a.jsx)(x.Checkbox,{checked:ee.includes(e.id),onCheckedChange:()=>{var a;return a=e.id,void ea(e=>e.includes(a)?e.filter(e=>e!==a):[...e,a])}})}),(0,a.jsx)(m.TableCell,{className:"font-mono font-semibold",children:e.serial_number}),(0,a.jsx)(m.TableCell,{className:"capitalize",children:e.device_type}),(0,a.jsx)(m.TableCell,{children:(0,a.jsx)(i.Badge,{className:(e=>{switch(e){case"available":case"completed":return"bg-green-100 text-green-800";case"assigned":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-slate-100 text-slate-800"}})(e.status),children:e.status})}),(0,a.jsx)(m.TableCell,{children:e.branch_name?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.branch_name}),e.merchant_name&&(0,a.jsx)("div",{className:"text-sm text-slate-500",children:e.merchant_name})]}):(0,a.jsx)("span",{className:"text-slate-400",children:"-"})}),(0,a.jsx)(m.TableCell,{children:(0,D.format)(new Date(e.created_at),"MMM d, yyyy")}),(0,a.jsx)(m.TableCell,{className:"text-right",children:(0,a.jsxs)(T.DropdownMenu,{children:[(0,a.jsx)(T.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(n.Button,{variant:"ghost",size:"icon",children:(0,a.jsx)(C,{className:"h-4 w-4"})})}),(0,a.jsxs)(T.DropdownMenuContent,{align:"end",children:[(0,a.jsxs)(T.DropdownMenuItem,{onClick:()=>{em(e),eh(!0)},children:[(0,a.jsx)(_,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,a.jsxs)(T.DropdownMenuItem,{onClick:()=>{Q(e),J(!0)},children:[(0,a.jsx)(b.Building2,{className:"h-4 w-4 mr-2"}),e.branch_id?"Reassign":"Assign"]})]})]})})]},e.id))})]})})}),0===eM.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(u,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-500",children:"No hardware registered yet"})]})]}),(0,a.jsxs)(t.TabsContent,{value:"onboarding",className:"space-y-4 mt-4",children:[(0,a.jsx)("div",{className:"grid gap-4",children:L.map(e=>(0,a.jsx)(l.Card,{className:"border-orange-200 bg-orange-50",children:(0,a.jsx)(l.CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-orange-100",children:(0,a.jsx)(f.AlertCircle,{className:"h-5 w-5 text-orange-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:e.merchant_name}),(0,a.jsx)(i.Badge,{className:"bg-orange-100 text-orange-700",children:"Pending Onboarding"})]}),e.trading_name&&(0,a.jsxs)("div",{className:"text-sm text-slate-600",children:["Trading Name: ",e.trading_name]}),e.kra_pin&&(0,a.jsxs)("div",{className:"text-sm text-slate-600",children:["KRA PIN: ",e.kra_pin]}),(0,a.jsxs)("div",{className:"text-sm text-slate-500",children:[e.contact_name&&`Contact: ${e.contact_name}`,e.contact_email&&` - ${e.contact_email}`,e.contact_phone&&` - ${e.contact_phone}`]}),(0,a.jsxs)("div",{className:"text-sm text-slate-500",children:[e.location&&`${e.location}`,e.county&&`, ${e.county}`,(e.location||e.county)&&" - ",(0,D.format)(new Date(e.created_at),"MMM d, yyyy")]})]})]}),(0,a.jsxs)(n.Button,{onClick:()=>{Y(e),G(!0)},children:[(0,a.jsx)(N.Server,{className:"h-4 w-4 mr-2"}),"Configure"]})]})})},e.id))}),0===L.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(p,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-500",children:"No leads pending onboarding configuration"}),(0,a.jsx)("p",{className:"text-sm text-slate-400 mt-2",children:"Leads that have signed up will appear here for configuration"})]})]}),(0,a.jsx)(t.TabsContent,{value:"signups",className:"space-y-4 mt-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Pending Signups (Onboarding Stage)"}),B.map(e=>(0,a.jsx)(l.Card,{children:(0,a.jsx)(l.CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(g,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:e.company_name}),(0,a.jsxs)("div",{className:"text-sm text-slate-500",children:[e.contact_name," - ",e.email]}),(0,a.jsxs)("div",{className:"text-sm text-slate-500",children:[e.phone,e.sales_person_name&&` - Sales: ${e.sales_person_name}`]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(n.Button,{variant:"outline",size:"sm",children:[(0,a.jsx)(w,{className:"h-4 w-4 mr-2"}),"Contact"]}),(0,a.jsxs)(n.Button,{size:"sm",onClick:()=>{ef(e),eC({company_name:e.company_name||"",contact_name:e.contact_name||"",email:e.email||"",phone:e.phone||"",trading_name:e.trading_name||"",kra_pin:e.kra_pin||"",location:e.location||"",county:e.county||"",address:e.address||""}),eN(!0)},children:[(0,a.jsx)(_,{className:"h-4 w-4 mr-2"}),"Review"]})]})]})})},e.lead_id)),0===B.length&&(0,a.jsxs)("div",{className:"text-center py-12 bg-slate-50 rounded-lg",children:[(0,a.jsx)(g,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-500",children:"No pending signup requests"})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)(l.Card,{children:[(0,a.jsxs)(l.CardHeader,{children:[(0,a.jsx)(l.CardTitle,{children:"Signup Instructions"}),(0,a.jsx)(l.CardDescription,{children:"Guide for merchants on how to sign up"})]}),(0,a.jsx)(l.CardContent,{children:(0,a.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,a.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-base mb-2",children:"Step 1: Account Creation"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-slate-600",children:[(0,a.jsx)("li",{children:"Go to the Flow360 portal"}),(0,a.jsx)("li",{children:'Click on "Sign Up" or "Register"'}),(0,a.jsx)("li",{children:"Fill in company details (Name, KRA PIN, Email, Phone)"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-base mb-2",children:"Step 2: Branch Setup"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-slate-600",children:[(0,a.jsx)("li",{children:"Log in to the dashboard"}),(0,a.jsx)("li",{children:'Navigate to "Branches" section'}),(0,a.jsx)("li",{children:"Add each fuel station location"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-base mb-2",children:"Step 3: Operations Configuration"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-slate-600",children:[(0,a.jsx)("li",{children:"Contact Operations team for Device Token, BHF ID"}),(0,a.jsx)("li",{children:"Receive Server Address and Port"}),(0,a.jsx)("li",{children:"Configuration done by Operations team"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-base mb-2",children:"Support"}),(0,a.jsxs)("ul",{className:"space-y-1 text-slate-600",children:[(0,a.jsx)("li",{children:"Email: support@flow360.co.ke"}),(0,a.jsx)("li",{children:"Phone: +254 700 000 000"})]})]})]})})})]})})]})})]}),(0,a.jsx)(d.Dialog,{open:z,onOpenChange:J,children:(0,a.jsxs)(d.DialogContent,{children:[(0,a.jsxs)(d.DialogHeader,{children:[(0,a.jsx)(d.DialogTitle,{children:"Assign Hardware"}),(0,a.jsxs)(d.DialogDescription,{children:["Assign ",Z?.serial_number," to a branch"]})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Merchant"}),(0,a.jsxs)(o.Select,{onValueChange:e=>eD(e),children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{placeholder:"Select merchant"})}),(0,a.jsx)(o.SelectContent,{children:O.map(e=>(0,a.jsx)(o.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Branch"}),(0,a.jsxs)(o.Select,{onValueChange:eH,children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{placeholder:"Select branch"})}),(0,a.jsx)(o.SelectContent,{children:V.map(e=>(0,a.jsx)(o.SelectItem,{value:e.id,children:e.bhf_nm},e.id))})]})]})]})]})}),(0,a.jsx)(d.Dialog,{open:K,onOpenChange:G,children:(0,a.jsxs)(d.DialogContent,{children:[(0,a.jsxs)(d.DialogHeader,{children:[(0,a.jsx)(d.DialogTitle,{children:"Configure Onboarding"}),(0,a.jsxs)(d.DialogDescription,{children:["Configure device settings for ",W?.merchant_name,W?.branch_name&&` - ${W.branch_name}`]})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(W?.trading_name||W?.kra_pin)&&(0,a.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg space-y-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-slate-700",children:"Business Details"}),W?.trading_name&&(0,a.jsxs)("div",{className:"text-sm text-slate-600",children:["Trading Name: ",(0,a.jsx)("span",{className:"font-medium",children:W.trading_name})]}),W?.kra_pin&&(0,a.jsxs)("div",{className:"text-sm text-slate-600",children:["KRA PIN: ",(0,a.jsx)("span",{className:"font-medium",children:W.kra_pin})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Device Token"}),(0,a.jsx)(r.Input,{value:e_.device_token,onChange:e=>eT({...e_,device_token:e.target.value}),placeholder:"Enter device token"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"BHF ID (Branch Fiscal ID)"}),(0,a.jsx)(r.Input,{value:e_.bhf_id,onChange:e=>eT({...e_,bhf_id:e.target.value}),placeholder:"e.g., 01"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Server Address"}),(0,a.jsx)(r.Input,{value:e_.server_address,onChange:e=>eT({...e_,server_address:e.target.value}),placeholder:"api.kra.go.ke"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Server Port"}),(0,a.jsx)(r.Input,{value:e_.server_port,onChange:e=>eT({...e_,server_port:e.target.value}),placeholder:"8080"})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4 mt-2",children:[(0,a.jsx)(h.Label,{className:"text-base font-semibold mb-3 block",children:"Hardware Assignment"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Hardware Type"}),(0,a.jsxs)(o.Select,{value:e_.hardware_type,onValueChange:e=>eT({...e_,hardware_type:e}),children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{placeholder:"Select type"})}),(0,a.jsxs)(o.SelectContent,{children:[(0,a.jsx)(o.SelectItem,{value:"token",children:"Hardware Token"}),(0,a.jsx)(o.SelectItem,{value:"printer",children:"Fiscal Printer"}),(0,a.jsx)(o.SelectItem,{value:"terminal",children:"POS Terminal"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Serial Number"}),(0,a.jsx)(r.Input,{value:e_.hardware_serial,onChange:e=>eT({...e_,hardware_serial:e.target.value}),placeholder:"SN-XXXX-XXXX"})]})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Hardware will be registered and assigned to this branch when configuration is saved."})]}),(0,a.jsxs)(n.Button,{onClick:eO,className:"w-full",children:[(0,a.jsx)(S.Check,{className:"h-4 w-4 mr-2"}),"Save Configuration"]})]})]})}),(0,a.jsx)(d.Dialog,{open:eb,onOpenChange:eN,children:(0,a.jsxs)(d.DialogContent,{className:"max-w-2xl",children:[(0,a.jsxs)(d.DialogHeader,{children:[(0,a.jsx)(d.DialogTitle,{children:"Review Signup Request"}),(0,a.jsx)(d.DialogDescription,{children:"Review and edit details before moving to onboarding"})]}),eS&&(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Company Name *"}),(0,a.jsx)(r.Input,{value:ew.company_name,onChange:e=>eC({...ew,company_name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Trading Name"}),(0,a.jsx)(r.Input,{value:ew.trading_name,onChange:e=>eC({...ew,trading_name:e.target.value}),placeholder:"Trading/Business Name"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Contact Name *"}),(0,a.jsx)(r.Input,{value:ew.contact_name,onChange:e=>eC({...ew,contact_name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"KRA PIN"}),(0,a.jsx)(r.Input,{value:ew.kra_pin,onChange:e=>eC({...ew,kra_pin:e.target.value}),placeholder:"e.g., P051234567Z"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Email *"}),(0,a.jsx)(r.Input,{type:"email",value:ew.email,onChange:e=>eC({...ew,email:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Phone *"}),(0,a.jsx)(r.Input,{value:ew.phone,onChange:e=>eC({...ew,phone:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Location"}),(0,a.jsx)(r.Input,{value:ew.location,onChange:e=>eC({...ew,location:e.target.value}),placeholder:"Town/Area"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"County"}),(0,a.jsx)(r.Input,{value:ew.county,onChange:e=>eC({...ew,county:e.target.value}),placeholder:"County"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Address"}),(0,a.jsx)(c.Textarea,{value:ew.address,onChange:e=>eC({...ew,address:e.target.value}),placeholder:"Full address",rows:2})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(n.Button,{variant:"outline",onClick:()=>eN(!1),className:"flex-1",children:"Cancel"}),(0,a.jsxs)(n.Button,{onClick:()=>eL(eS.lead_id),className:"flex-1",children:[(0,a.jsx)(S.Check,{className:"h-4 w-4 mr-2"}),"Approve & Move to Onboarding"]})]})]})]})}),(0,a.jsx)(d.Dialog,{open:eo,onOpenChange:eh,children:(0,a.jsxs)(d.DialogContent,{children:[(0,a.jsxs)(d.DialogHeader,{children:[(0,a.jsx)(d.DialogTitle,{children:"Edit Hardware"}),(0,a.jsx)(d.DialogDescription,{children:"Update hardware device details"})]}),ex&&(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Serial Number"}),(0,a.jsx)(r.Input,{value:ex.serial_number,onChange:e=>em({...ex,serial_number:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Device Type"}),(0,a.jsxs)(o.Select,{value:ex.device_type,onValueChange:e=>em({...ex,device_type:e}),children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{})}),(0,a.jsxs)(o.SelectContent,{children:[(0,a.jsx)(o.SelectItem,{value:"token",children:"Hardware Token"}),(0,a.jsx)(o.SelectItem,{value:"printer",children:"Fiscal Printer"}),(0,a.jsx)(o.SelectItem,{value:"terminal",children:"POS Terminal"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{children:"Status"}),(0,a.jsxs)(o.Select,{value:ex.status,onValueChange:e=>em({...ex,status:e}),children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{})}),(0,a.jsxs)(o.SelectContent,{children:[(0,a.jsx)(o.SelectItem,{value:"active",children:"Active"}),(0,a.jsx)(o.SelectItem,{value:"inactive",children:"Inactive"})]})]})]}),(0,a.jsx)(n.Button,{onClick:eA,className:"w-full",children:"Save Changes"})]})]})})]})}e.s(["default",()=>I],11530)}]);