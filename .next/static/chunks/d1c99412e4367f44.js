(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10708,e=>{"use strict";var s=e.i(43476),t=e.i(71645);e.i(74080);var a=e.i(91918),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let l=(0,a.createSlot)(`Primitive.${r}`),n=t.forwardRef((e,t)=>{let{asChild:a,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(a?l:r,{...n,ref:t})});return n.displayName=`Primitive.${r}`,{...e,[r]:n}},{}),l=t.forwardRef((e,t)=>(0,s.jsx)(r.label,{...e,ref:t,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var n=e.i(47163);function o({className:e,...t}){return(0,s.jsx)(l,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}e.s(["Label",()=>o],10708)},71689,e=>{"use strict";let s=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],71689)},69638,e=>{"use strict";let s=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>s],69638)},22225,e=>{"use strict";var s=e.i(43476),t=e.i(67881),a=e.i(70065),r=e.i(23750),l=e.i(10708),n=e.i(57688),o=e.i(22016),i=e.i(71645),d=e.i(71689),c=e.i(69638);function m(){let[e,m]=(0,i.useState)("request"),[u,x]=(0,i.useState)(""),[h,p]=(0,i.useState)(""),[f,w]=(0,i.useState)(""),[y,b]=(0,i.useState)(""),[j,v]=(0,i.useState)(null),[N,g]=(0,i.useState)(!1),[C,P]=(0,i.useState)(!1),S=async e=>{e.preventDefault(),g(!0),v(null);try{let e=await fetch("/api/auth/reset/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:u})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to request reset");P(!0)}catch(e){v(e instanceof Error?e.message:"An error occurred")}finally{g(!1)}},k=async e=>{if(e.preventDefault(),g(!0),v(null),f!==y){v("Passwords do not match"),g(!1);return}if(f.length<6){v("Password must be at least 6 characters"),g(!1);return}try{let e=await fetch("/api/auth/reset/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:u,code:h,newPassword:f})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to reset password");m("success")}catch(e){v(e instanceof Error?e.message:"An error occurred")}finally{g(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen min-h-[100dvh] w-full relative flex items-center justify-center p-4 sm:p-6",children:[(0,s.jsxs)("div",{className:"absolute inset-0 z-0",children:[(0,s.jsx)(n.default,{src:"https://images.unsplash.com/photo-1505142468610-359e7d316be0?w=1920&h=1080&fit=crop",alt:"Ocean background",fill:!0,className:"object-cover",priority:!0}),(0,s.jsx)("div",{className:"absolute inset-0 bg-blue-900/30"})]}),(0,s.jsxs)(a.Card,{className:"w-full max-w-[340px] sm:max-w-md relative z-10 shadow-2xl mx-auto",children:[(0,s.jsxs)(a.CardHeader,{className:"space-y-3 sm:space-y-4 pb-6 sm:pb-8 px-4 sm:px-6",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(n.default,{src:"/flow360-logo.png",alt:"Flow360 Logo",width:64,height:64,className:"rounded-full sm:w-20 sm:h-20"})}),(0,s.jsx)(a.CardTitle,{className:"text-2xl sm:text-3xl text-center font-bold text-primary",children:"success"===e?"Password Reset":"Reset Password"}),(0,s.jsxs)(a.CardDescription,{className:"text-center text-sm sm:text-base",children:["request"===e&&!C&&"Enter your email or username to request a reset code","request"===e&&C&&"Contact your administrator to get your reset code","reset"===e&&"Enter your reset code and new password","success"===e&&"Your password has been successfully reset"]})]}),(0,s.jsxs)(a.CardContent,{className:"px-4 sm:px-6",children:["success"===e?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(c.CheckCircle,{className:"h-16 w-16 text-green-500"})}),(0,s.jsx)("p",{className:"text-center text-muted-foreground",children:"You can now sign in with your new password."}),(0,s.jsx)(o.default,{href:"/auth/login",children:(0,s.jsx)(t.Button,{className:"w-full rounded-xl h-11 sm:h-10",children:"Back to Sign In"})})]}):"request"!==e||C?"request"===e&&C?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl text-sm text-blue-800",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Reset request submitted"}),(0,s.jsx)("p",{children:"Please contact your branch administrator or vendor to receive your reset code. Once you have the code, click the button below."})]}),(0,s.jsx)(t.Button,{onClick:()=>m("reset"),className:"w-full rounded-xl h-11 sm:h-10 text-base sm:text-sm",children:"I have a reset code"})]}):(0,s.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{htmlFor:"reset-identifier",className:"text-sm",children:"Email or Username"}),(0,s.jsx)(r.Input,{id:"reset-identifier",type:"text",placeholder:"Enter your email or username",required:!0,value:u,onChange:e=>x(e.target.value),className:"rounded-xl h-11 sm:h-10 text-base sm:text-sm",autoCapitalize:"none",autoCorrect:"off"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{htmlFor:"resetCode",className:"text-sm",children:"Reset Code"}),(0,s.jsx)(r.Input,{id:"resetCode",type:"text",placeholder:"Enter 8-character reset code",required:!0,value:h,onChange:e=>p(e.target.value.toUpperCase()),className:"rounded-xl h-11 sm:h-10 text-base sm:text-sm font-mono tracking-wider",maxLength:8})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{htmlFor:"newPassword",className:"text-sm",children:"New Password"}),(0,s.jsx)(r.Input,{id:"newPassword",type:"password",placeholder:"Enter new password",required:!0,value:f,onChange:e=>w(e.target.value),className:"rounded-xl h-11 sm:h-10 text-base sm:text-sm"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{htmlFor:"confirmPassword",className:"text-sm",children:"Confirm Password"}),(0,s.jsx)(r.Input,{id:"confirmPassword",type:"password",placeholder:"Confirm new password",required:!0,value:y,onChange:e=>b(e.target.value),className:"rounded-xl h-11 sm:h-10 text-base sm:text-sm"})]}),j&&(0,s.jsx)("div",{className:"text-sm text-red-500 bg-red-50 p-3 rounded-xl",children:j}),(0,s.jsx)(t.Button,{type:"submit",className:"w-full rounded-xl h-11 sm:h-10 text-base sm:text-sm",disabled:N,children:N?"Resetting...":"Reset Password"})]}):(0,s.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.Label,{htmlFor:"identifier",className:"text-sm",children:"Email or Username"}),(0,s.jsx)(r.Input,{id:"identifier",type:"text",placeholder:"Enter your email or username",required:!0,value:u,onChange:e=>x(e.target.value),className:"rounded-xl h-11 sm:h-10 text-base sm:text-sm",autoCapitalize:"none",autoCorrect:"off"})]}),j&&(0,s.jsx)("div",{className:"text-sm text-red-500 bg-red-50 p-3 rounded-xl",children:j}),(0,s.jsx)(t.Button,{type:"submit",className:"w-full rounded-xl h-11 sm:h-10 text-base sm:text-sm",disabled:N,children:N?"Requesting...":"Request Reset Code"}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("button",{type:"button",onClick:()=>m("reset"),className:"text-sm text-primary hover:underline",children:"Already have a reset code?"})})]}),"success"!==e&&(0,s.jsx)("div",{className:"mt-5 sm:mt-6 text-center",children:(0,s.jsxs)(o.default,{href:"/auth/login",className:"inline-flex items-center text-sm text-muted-foreground hover:text-primary",children:[(0,s.jsx)(d.ArrowLeft,{className:"h-4 w-4 mr-1"}),"Back to Sign In"]})})]})]})]})}e.s(["default",()=>m])}]);