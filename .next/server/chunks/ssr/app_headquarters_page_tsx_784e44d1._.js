module.exports=[79537,a=>{"use strict";var b=a.i(87924),c=a.i(69265),d=a.i(40695),e=a.i(54161),f=a.i(24569),g=a.i(3314),h=a.i(67453),i=a.i(67900),j=a.i(24669),k=a.i(60246),l=a.i(38784),m=a.i(15618),n=a.i(5784),o=a.i(83497),p=a.i(73320),q=a.i(90166),r=a.i(96221),s=a.i(10227),t=a.i(11300),u=a.i(72131),v=a.i(18155),w=a.i(23665),x=a.i(54031),y=a.i(77924),z=a.i(58042),A=a.i(94222),B=a.i(54419),C=a.i(59854),D=a.i(48662),E=a.i(2274),F=a.i(3130),G=a.i(65733),H=a.i(5522),I=a.i(17171),J=a.i(76504),K=a.i(87682),L=a.i(50944),M=a.i(74575),N=a.i(90023);function O(){let a=(0,L.useRouter)(),[O,P]=(0,u.useState)(!1),[Q,R]=(0,u.useState)(!1),[S,T]=(0,u.useState)(!1),[U,V]=(0,u.useState)(null),[W,X]=(0,u.useState)(!1),[Y,Z]=(0,u.useState)(!1),[$,_]=(0,u.useState)(!0),[aa,ab]=(0,u.useState)(!1),[ac,ad]=(0,u.useState)(null),[ae,af]=(0,u.useState)([]),[ag,ah]=(0,u.useState)(!0),[ai,aj]=(0,u.useState)(null),[ak,al]=(0,u.useState)(!0),{formatCurrency:am}=(0,M.useCurrency)();(0,u.useEffect)(()=>{(async()=>{let b=(0,N.getCurrentUser)();if(b&&["supervisor","manager","cashier"].includes((b.role||"").toLowerCase())){Z(!0);let c=b.branch_id;a.replace(c?`/sales/summary?branch=${c}`:"/sales/summary");return}try{let c=await fetch("/api/headquarters/stats",{credentials:"include",method:"GET"});if(401===c.status||403===c.status){Z(!0);let c=b?.branch_id;a.replace(c?`/sales/summary?branch=${c}`:"/sales/summary");return}if(c.ok){let a=await c.json();aj(a),al(!1)}}catch(a){console.error("Error checking HQ access:",a)}_(!1)})()},[a]),(0,u.useEffect)(()=>{$||Y||an()},[$,Y]);let an=async()=>{try{ah(!0);let a=(0,N.getCurrentUser)(),b=a?.id,c=b?`/api/branches/list?user_id=${b}`:"/api/branches/list",d=await fetch(c);if(d.ok){let a=(await d.json()).map(a=>({id:a.id,name:a.name,location:a.location,status:a.status.charAt(0).toUpperCase()+a.status.slice(1),revenue:a.monthly_revenue||0,monthToDateRevenue:a.monthToDateRevenue||0,currentShiftRevenue:a.currentShiftRevenue||0,transactions:a.transactions||0,inventory:a.inventory||0,performance:a.performance||"+0%",gradient:"from-blue-600 via-blue-500 to-cyan-400",manager:a.manager,phone:a.phone,email:a.email,bhfId:a.bhf_id,tankConfig:a.tank_config||{},storageIndices:a.storage_indices||[],device_token:a.device_token,vendor_id:a.vendor_id}));af(a)}else console.error("Failed to fetch branches:",d.status)}catch(a){console.error("Error fetching branches:",a)}finally{ah(!1)}},ao=async()=>{if(ac)try{let a=new FormData;a.append("file",ac),(await fetch("/api/global-uploads",{method:"POST",body:a})).ok?(alert("File uploaded successfully!"),ab(!1),ad(null)):alert("Failed to upload file")}catch(a){console.error("Upload error:",a),alert("Error uploading file")}},[ap,aq]=(0,u.useState)({name:"",location:"",manager:"",phone:"",email:"",address:"",county:"",localTaxOffice:"",hardwareType:"",serialNumber:"",storageIndices:[],newStorageIndex:"",vendorId:"",kraPin:"",controllerId:"",tankConfig:{}}),ar=ai?.totalRevenue||0,as=ai?.totalTransactions||0,at=ai?.totalInventory||0,au=ai?.totalEmployees||0,av=ai?.revenueGrowth||0;ai?.inventoryGrowth;let aw=async()=>{if(!ap.name||!ap.location||!ap.county||!ap.localTaxOffice)return void alert("Please fill in all required fields (Branch Name, Location, County, Local Tax Office)");X(!0);try{let a,b=(0,N.getCurrentUser)(),c=await fetch("/api/branches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:b?.id,vendor_id:ap.vendorId||void 0,name:ap.name,location:ap.location,manager:ap.manager,email:ap.email,phone:ap.phone,storage_indices:ap.storageIndices,county:ap.county,address:ap.address,local_tax_office:ap.localTaxOffice,controller_id:ap.controllerId||void 0})});if(!c.ok){let a=await c.text();console.error("[v0] Branch API error:",c.status,a),alert(`Branch creation failed: Server returned ${c.status}. ${a||"Please try again."}`),X(!1);return}let d=await c.text();if(!d){console.error("[v0] Empty response from branch API"),alert("Branch creation failed: Empty response from server. Please try again."),X(!1);return}try{a=JSON.parse(d)}catch(a){console.error("[v0] Failed to parse branch response:",d),alert("Branch creation failed: Invalid response from server. Please try again."),X(!1);return}if(!a.success){console.error("[v0] Branch creation error:",a.error),alert(`Branch creation failed: ${a.error}`),X(!1);return}console.log("[v0] Branch created:",a.data);let e=a.data,f=new Map,g=[];Object.entries(ap.tankConfig).forEach(([a,b])=>{let c=b.fuelType||"Petrol";g.push({branch_id:e.id,tank_name:a,fuel_type:c,capacity:Number.parseFloat(b.tankCapacity||"0"),current_stock:Number.parseFloat(b.initialStock||"0"),status:"active"}),b.dispensers.forEach(a=>{let b=Number.parseInt(a.replace(/\D/g,""))||f.size+1;f.has(b)||f.set(b,new Set),f.get(b).add(c)})});let h=Array.from(f.entries()).map(([a,b])=>({branch_id:e.id,dispenser_number:a,fuel_type:Array.from(b)[0],status:"active"}));if(g.length>0){for(let a of g)await fetch("/api/tanks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});console.log("[v0] Tanks created:",g)}let i=0;if(h.length>0){console.log("[v0] Creating dispensers:",{dispensersToCreate:h});let a=[];for(let b of h){let c=await fetch("/api/dispensers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),d=await c.json();d.success&&a.push(d.data)}console.log("[v0] Dispensers created:",a);let b=[];if(a.forEach(a=>{let c=f.get(a.dispenser_number);if(c){let d=1;c.forEach(c=>{b.push({branch_id:e.id,dispenser_id:a.id,nozzle_number:d++,fuel_type:c,initial_meter_reading:0,status:"active"})})}}),b.length>0){for(let a of(console.log("[v0] Creating nozzles:",{nozzlesToCreate:b}),b))await fetch("/api/nozzles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});i=b.length}}try{let a=await fetch("/api/branches/register-backend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branchId:e.id,name:ap.name,location:ap.location,county:ap.county,address:ap.address,organization:process.env.NEXT_PUBLIC_ORGANIZATION_ID})}),b=await a.json();a.ok&&b.success?alert(`Branch "${ap.name}" created successfully!
Local database entry created
${g.length} tank(s) created
${h.length} dispenser(s) created
${i} nozzle(s) created
Backend registration completed`):alert(`Branch "${ap.name}" created successfully!
Local database entry created
${g.length} tank(s) created
${h.length} dispenser(s) created
${i} nozzle(s) created
Backend registration failed (can be retried later)`)}catch(a){console.log("[v0] Backend registration failed:",a),alert(`Branch "${ap.name}" created successfully!
Local database entry created
${g.length} tank(s) created
${h.length} dispenser(s) created
${i} nozzle(s) created
Backend registration unavailable (can be retried later)`)}P(!1),aq({name:"",location:"",manager:"",email:"",phone:"",address:"",county:"",localTaxOffice:"",hardwareType:"",serialNumber:"",storageIndices:[],newStorageIndex:"",vendorId:"",kraPin:"",controllerId:"",tankConfig:{}}),await an()}catch(a){console.error("Error creating branch:",a),alert(`Branch creation failed: ${a.message||"Unknown error"}`)}finally{X(!1)}},ax=a=>{console.log("[v0] Opening edit dialog for branch:",a);let b=ae.find(b=>b.id===a.id)||a;V(b),aq({name:b.name||"",location:b.location||"",manager:b.manager||"",email:b.email||"",phone:b.phone||"",address:b.address||"",county:b.county||"",localTaxOffice:b.local_tax_office||"",hardwareType:"",serialNumber:"",storageIndices:b.storage_indices||[],newStorageIndex:"",vendorId:b.vendor_id||"",kraPin:b.kra_pin||"",controllerId:b.controller_id||"",tankConfig:b.tank_config||{}}),R(!0)},ay=async()=>{if(U){if(console.log("[v0] Updating branch:",U.id,ap),!ap.name||!ap.location||!ap.county||!ap.localTaxOffice)return void alert("Please fill in all required fields (Branch Name, Location, County, Local Tax Office)");try{let a=await fetch(`/api/branches/${U.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ap.name,location:ap.location,manager:ap.manager,email:ap.email,phone:ap.phone,address:ap.address,county:ap.county,localTaxOffice:ap.localTaxOffice,storageIndices:ap.storageIndices,tankConfig:ap.tankConfig,kraPin:ap.kraPin,controllerId:ap.controllerId})});if(a.ok)alert("Branch updated successfully!"),R(!1),V(null),await an();else{let b=await a.json();console.error("Update error:",b),alert(`Failed to update branch: ${b.error||"Unknown error"}`)}}catch(a){console.error("Error updating branch:",a),alert("Error updating branch. Please try again.")}}},az=async(a,b)=>{if(confirm(`Are you sure you want to delete the branch "${b}"? This action cannot be undone.`))try{let c=await fetch(`/api/branches/${a}`,{method:"DELETE"});if(c.ok)alert(`Branch "${b}" deleted successfully!`),await an();else{let a=await c.json();console.error("Delete error:",a),alert(`Failed to delete branch: ${a.error||"Unknown error"}`)}}catch(a){console.error("Error deleting branch:",a),alert("Error deleting branch. Please try again.")}};return $||Y?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 to-slate-800",children:(0,b.jsxs)("div",{className:"text-center text-white",children:[(0,b.jsx)(r.Loader2,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{children:Y?"Redirecting to your branch...":"Checking access..."})]})}):(0,b.jsxs)("div",{className:"flex h-screen flex-col overflow-hidden bg-gradient-to-b from-slate-900 via-blue-900 to-white",children:[(0,b.jsx)(c.DashboardHeader,{currentBranch:"hq"}),(0,b.jsxs)("main",{className:"flex-1 overflow-y-auto p-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-balance text-white",children:"Headquarters Overview"}),(0,b.jsx)("p",{className:"mt-1 text-white/80 text-pretty",children:"Monitor all branches and organization performance"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)(J.DropdownMenu,{children:[(0,b.jsx)(J.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{variant:"ghost",className:"rounded-xl bg-transparent text-white hover:bg-white/10",children:[(0,b.jsx)(i.Building2,{className:"mr-2 h-4 w-4"}),"Branches",(0,b.jsx)(n.ChevronDown,{className:"ml-2 h-4 w-4"})]})}),(0,b.jsxs)(J.DropdownMenuContent,{align:"end",className:"w-56 rounded-xl",children:[(0,b.jsxs)(J.DropdownMenuItem,{onSelect:()=>P(!0),className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"Create Branch"]}),(0,b.jsxs)(J.DropdownMenuSub,{children:[(0,b.jsxs)(J.DropdownMenuSubTrigger,{className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(f.Edit,{className:"mr-2 h-4 w-4"}),"Edit Branch Details"]}),(0,b.jsx)(J.DropdownMenuSubContent,{className:"rounded-xl",children:ae.map(a=>(0,b.jsx)(J.DropdownMenuItem,{onSelect:()=>ax(a),className:"cursor-pointer rounded-lg",children:a.name},a.id))})]}),(0,b.jsxs)(J.DropdownMenuItem,{onSelect:()=>a.push("/headquarters/inventory"),className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(o.Package,{className:"mr-2 h-4 w-4"}),"Inventory"]}),(0,b.jsxs)(J.DropdownMenuItem,{onSelect:()=>ab(!0),className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(p.Upload,{className:"mr-2 h-4 w-4"}),"Global Uploads"]})]})]}),(0,b.jsxs)(J.DropdownMenu,{children:[(0,b.jsx)(J.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{variant:"ghost",className:"gap-2 rounded-xl bg-transparent text-white hover:bg-white/10",children:[(0,b.jsx)(k.Users,{className:"h-4 w-4"}),"Users",(0,b.jsx)(n.ChevronDown,{className:"h-4 w-4"})]})}),(0,b.jsxs)(J.DropdownMenuContent,{align:"end",className:"w-56 rounded-xl",children:[(0,b.jsx)(J.DropdownMenuItem,{asChild:!0,className:"cursor-pointer rounded-lg",children:(0,b.jsxs)("a",{href:"/headquarters/staff-management",className:"flex items-center gap-2",children:[(0,b.jsx)(k.Users,{className:"h-4 w-4"}),"Staff Management"]})}),(0,b.jsx)(J.DropdownMenuItem,{asChild:!0,className:"cursor-pointer rounded-lg",children:(0,b.jsxs)("a",{href:"/headquarters/roles",className:"flex items-center gap-2",children:[(0,b.jsx)(g.Shield,{className:"h-4 w-4"}),"Roles & Permissions"]})}),(0,b.jsx)(J.DropdownMenuItem,{asChild:!0,className:"cursor-pointer rounded-lg",children:(0,b.jsxs)("a",{href:"/headquarters/approvals",className:"flex items-center gap-2",children:[(0,b.jsx)(h.CheckCircle2,{className:"h-4 w-4"}),"Approval Workflows"]})})]})]}),(0,b.jsxs)(d.Button,{variant:"ghost",className:"rounded-xl bg-transparent text-white hover:bg-white/10",onClick:()=>a.push("/headquarters/items"),children:[(0,b.jsx)(o.Package,{className:"mr-2 h-4 w-4"}),"Items"]}),(0,b.jsxs)(J.DropdownMenu,{children:[(0,b.jsx)(J.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{variant:"ghost",className:"rounded-xl bg-transparent text-white hover:bg-white/10",children:[(0,b.jsx)(s.Truck,{className:"mr-2 h-4 w-4"}),"Suppliers",(0,b.jsx)(n.ChevronDown,{className:"ml-2 h-4 w-4"})]})}),(0,b.jsxs)(J.DropdownMenuContent,{align:"end",className:"w-56 rounded-xl",children:[(0,b.jsx)(J.DropdownMenuItem,{asChild:!0,className:"cursor-pointer rounded-lg",children:(0,b.jsxs)("a",{href:"/headquarters/suppliers",className:"flex items-center gap-2",children:[(0,b.jsx)(o.Package,{className:"h-4 w-4"}),"Suppliers"]})}),(0,b.jsx)(J.DropdownMenuItem,{asChild:!0,className:"cursor-pointer rounded-lg",children:(0,b.jsxs)("a",{href:"/headquarters/transporters",className:"flex items-center gap-2",children:[(0,b.jsx)(s.Truck,{className:"h-4 w-4"}),"Transporters"]})}),(0,b.jsx)(J.DropdownMenuItem,{asChild:!0,className:"cursor-pointer rounded-lg",children:(0,b.jsxs)("a",{href:"/headquarters/purchase-orders",className:"flex items-center gap-2",children:[(0,b.jsx)(t.ClipboardList,{className:"h-4 w-4"}),"Purchase Orders"]})})]})]})]})]}),(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Organization Summary"}),ak?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(r.Loader2,{className:"h-8 w-8 animate-spin text-white"})}):(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(F.Card,{className:"rounded-2xl",children:[(0,b.jsx)(F.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(F.CardTitle,{className:"text-sm font-medium text-gray-600",children:"MTD Revenue"}),(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-blue-100",children:(0,b.jsx)(q.DollarSign,{className:"h-5 w-5 text-blue-600"})})]})}),(0,b.jsxs)(F.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:am(ar)}),(0,b.jsxs)("p",{className:`text-xs mt-1 ${av>=0?"text-green-600":"text-red-600"}`,children:[av>=0?"+":"",av,"% from last month"]})]})]}),(0,b.jsxs)(F.Card,{className:"rounded-2xl",children:[(0,b.jsx)(F.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(F.CardTitle,{className:"text-sm font-medium text-gray-600",children:"MTD Transactions"}),(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-purple-100",children:(0,b.jsx)(l.ShoppingCart,{className:"h-5 w-5 text-purple-600"})})]})}),(0,b.jsxs)(F.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:as.toLocaleString()}),(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Across all branches"})]})]}),(0,b.jsxs)(F.Card,{className:"rounded-2xl",children:[(0,b.jsx)(F.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(F.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Total Staff"}),(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-orange-100",children:(0,b.jsx)(k.Users,{className:"h-5 w-5 text-orange-600"})})]})}),(0,b.jsxs)(F.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:au}),(0,b.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["In ",ae.length," branch",1!==ae.length?"es":""]})]})]}),(0,b.jsxs)(F.Card,{className:"rounded-2xl",children:[(0,b.jsx)(F.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(F.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Tank Stock (L)"}),(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-green-100",children:(0,b.jsx)(o.Package,{className:"h-5 w-5 text-green-600"})})]})}),(0,b.jsxs)(F.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:at.toLocaleString()}),(0,b.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),(0,b.jsxs)("span",{className:"text-xs text-gray-600",children:["Diesel: ",(ai?.dieselStock||0).toLocaleString()]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"}),(0,b.jsxs)("span",{className:"text-xs text-gray-600",children:["Petrol: ",(ai?.petrolStock||0).toLocaleString()]})]})]})]})]})]})]}),(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Performance Analytics"}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,b.jsxs)(F.Card,{className:"rounded-2xl",children:[(0,b.jsxs)(F.CardHeader,{children:[(0,b.jsx)(F.CardTitle,{children:"Revenue Trend (6 Months)"}),(0,b.jsx)(F.CardDescription,{children:"Monthly revenue across all branches"})]}),(0,b.jsx)(F.CardContent,{className:"px-2",children:(0,b.jsx)("div",{className:"h-[300px] w-full",children:ak?(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsx)(r.Loader2,{className:"h-8 w-8 animate-spin text-gray-400"})}):ai?.monthlyRevenue&&ai.monthlyRevenue.length>0?(0,b.jsx)(D.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(x.LineChart,{data:ai.monthlyRevenue,children:[(0,b.jsx)(B.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(z.XAxis,{dataKey:"month"}),(0,b.jsx)(A.YAxis,{tickFormatter:a=>`${(a/1e6).toFixed(1)}M`}),(0,b.jsx)(C.Tooltip,{formatter:a=>[am(a),"Revenue"]}),(0,b.jsx)(y.Line,{type:"monotone",dataKey:"revenue",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6"}})]})}):(0,b.jsx)("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No revenue data available"})})})]}),(0,b.jsxs)(F.Card,{className:"rounded-2xl",children:[(0,b.jsxs)(F.CardHeader,{children:[(0,b.jsx)(F.CardTitle,{children:"Branch Performance (MTD)"}),(0,b.jsx)(F.CardDescription,{children:"Sales vs Purchases by branch (in thousands)"})]}),(0,b.jsx)(F.CardContent,{className:"px-2",children:(0,b.jsx)("div",{className:"h-[300px] w-full",children:ak?(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsx)(r.Loader2,{className:"h-8 w-8 animate-spin text-gray-400"})}):ai?.branchPerformance&&ai.branchPerformance.length>0?(0,b.jsx)(D.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(v.BarChart,{data:ai.branchPerformance,children:[(0,b.jsx)(B.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(z.XAxis,{dataKey:"branch"}),(0,b.jsx)(A.YAxis,{tickFormatter:a=>`${a}K`}),(0,b.jsx)(C.Tooltip,{formatter:a=>[`${a.toFixed(1)}K`,""]}),(0,b.jsx)(E.Legend,{}),(0,b.jsx)(w.Bar,{dataKey:"sales",fill:"#22c55e",name:"Sales"}),(0,b.jsx)(w.Bar,{dataKey:"purchases",fill:"#f97316",name:"Purchases"})]})}):(0,b.jsx)("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No branch performance data available"})})})]})]})]}),ag?(0,b.jsx)("div",{className:"text-center py-12 text-white",children:(0,b.jsx)("p",{children:"Loading branches..."})}):0===ae.length?(0,b.jsx)("div",{className:"text-center py-12 text-white",children:(0,b.jsx)("p",{children:"No branches found. Create your first branch to get started."})}):(0,b.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:ae.map(c=>(0,b.jsxs)(F.Card,{onClick:()=>{var b;"hq"===(b=c.id)?a.push("/headquarters"):a.push(`/sales?branch=${b}`)},className:"rounded-2xl hover:shadow-xl transition-all duration-300 cursor-pointer overflow-hidden group hover:scale-105",children:[(0,b.jsx)("div",{className:`h-3 bg-gradient-to-r ${c.gradient}`}),(0,b.jsx)(F.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("div",{className:`flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br ${c.gradient} shadow-lg`,children:(0,b.jsx)(i.Building2,{className:"h-6 w-6 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(F.CardTitle,{className:"group-hover:text-blue-600 transition-colors text-base",children:c.name}),(0,b.jsx)(F.CardDescription,{className:"text-xs",children:c.location})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:`rounded-full text-xs px-2 py-1 ${"active"===c.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.status}),(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:a=>{a.stopPropagation(),ax(c)},children:(0,b.jsx)(f.Edit,{className:"h-4 w-4"})})]})]})}),(0,b.jsx)(F.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-gray-600 text-xs",children:[(0,b.jsx)(o.Package,{className:"h-3 w-3"}),"MTD Revenue"]}),(0,b.jsx)("div",{className:"font-semibold text-sm",children:am(c.monthToDateRevenue)})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-gray-600 text-xs",children:[(0,b.jsx)(q.DollarSign,{className:"h-3 w-3"})," ","Current Shift"]}),(0,b.jsx)("div",{className:"font-semibold text-sm",children:am(c.currentShiftRevenue)})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-gray-600 text-xs",children:[(0,b.jsx)(j.TrendingUp,{className:"h-3 w-3"}),"Growth"]}),(0,b.jsx)("div",{className:"font-semibold text-sm text-green-600",children:c.performance})]})]})})]},c.id))})]}),(0,b.jsxs)(G.Dialog,{open:O,onOpenChange:P,children:[(0,b.jsx)(G.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{onClick:()=>{aq({name:"",location:"",manager:"",email:"",phone:"",address:"",county:"",localTaxOffice:"",hardwareType:"",serialNumber:"",storageIndices:[],newStorageIndex:"",vendorId:ae.find(a=>a.vendor_id)?.vendor_id||"",kraPin:"",controllerId:"",tankConfig:{}}),P(!0)},size:"lg",className:"rounded-xl shadow-lg",children:[(0,b.jsx)(m.Plus,{className:"h-5 w-5 mr-2"}),"Create New Branch"]})}),(0,b.jsxs)(G.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto rounded-2xl",children:[(0,b.jsxs)(G.DialogHeader,{children:[(0,b.jsx)(G.DialogTitle,{className:"text-2xl",children:"Create New Branch"}),(0,b.jsx)(G.DialogDescription,{children:"Fill in the details to create a new branch location with device initialization"})]}),(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Branch Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"branch-name",children:"Branch Name *"}),(0,b.jsx)(H.Input,{id:"branch-name",placeholder:"e.g., Mombasa Branch",value:ap.name,onChange:a=>aq({...ap,name:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"location",children:"Location *"}),(0,b.jsx)(H.Input,{id:"location",placeholder:"e.g., Mombasa, Kenya",value:ap.location,onChange:a=>aq({...ap,location:a.target.value}),className:"rounded-xl"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"address",children:"Physical Address"}),(0,b.jsx)(H.Input,{id:"address",placeholder:"Street address, building, floor",value:ap.address,onChange:a=>aq({...ap,address:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"county",children:"County *"}),(0,b.jsx)(H.Input,{id:"county",placeholder:"e.g., Mombasa",value:ap.county,onChange:a=>aq({...ap,county:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"tax-office",children:"Local Tax Office *"}),(0,b.jsx)(H.Input,{id:"tax-office",placeholder:"e.g., Mombasa Tax Office",value:ap.localTaxOffice,onChange:a=>aq({...ap,localTaxOffice:a.target.value}),className:"rounded-xl"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"vendor-id",children:"Vendor ID (optional - only if auto-detection fails)"}),(0,b.jsx)(H.Input,{id:"vendor-id",placeholder:"e.g., a30077a7-1f46-4292-aa21-a79eb38227f0",value:ap.vendorId,onChange:a=>aq({...ap,vendorId:a.target.value}),className:"rounded-xl font-mono text-sm"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"controller-id",children:"Controller ID (PTS ID)"}),(0,b.jsx)(H.Input,{id:"controller-id",placeholder:"e.g., 003A003A...",value:ap.controllerId,onChange:a=>aq({...ap,controllerId:a.target.value}),className:"rounded-xl font-mono text-sm"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Unique identifier for the pump controller. Used to match pump callbacks to this branch."})]})]}),(0,b.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Staff Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"manager",children:"Branch Manager"}),(0,b.jsx)(H.Input,{id:"manager",placeholder:"Manager name",value:ap.manager,onChange:a=>aq({...ap,manager:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(H.Input,{id:"email",type:"email",placeholder:"branch@flow360.com",value:ap.email,onChange:a=>aq({...ap,email:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"phone",children:"Phone Number"}),(0,b.jsx)(H.Input,{id:"phone",type:"tel",placeholder:"+254...",value:ap.phone,onChange:a=>aq({...ap,phone:a.target.value}),className:"rounded-xl"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Hardware Assignment"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"hardware-type",children:"Hardware Type"}),(0,b.jsxs)(K.Select,{value:ap.hardwareType,onValueChange:a=>aq({...ap,hardwareType:a}),children:[(0,b.jsx)(K.SelectTrigger,{className:"rounded-xl",children:(0,b.jsx)(K.SelectValue,{placeholder:"Select hardware type"})}),(0,b.jsxs)(K.SelectContent,{className:"rounded-xl",children:[(0,b.jsx)(K.SelectItem,{value:"Controller",children:"Controller"}),(0,b.jsx)(K.SelectItem,{value:"MiniPC",children:"Mini PC"}),(0,b.jsx)(K.SelectItem,{value:"POS",children:"POS"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"serial-number",children:"Serial Number"}),(0,b.jsx)(H.Input,{id:"serial-number",placeholder:"e.g., SN-12345",value:ap.serialNumber,onChange:a=>aq({...ap,serialNumber:a.target.value}),className:"rounded-xl"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Storage Indices"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Configure unique storage locations for this branch (e.g., Tank, Warehouse, Cold Storage)"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(K.Select,{value:ap.newStorageIndex,onValueChange:a=>aq({...ap,newStorageIndex:a}),children:[(0,b.jsx)(K.SelectTrigger,{className:"rounded-xl",children:(0,b.jsx)(K.SelectValue,{placeholder:"Select storage type"})}),(0,b.jsxs)(K.SelectContent,{children:[(0,b.jsx)(K.SelectItem,{value:"Tank",children:"Tank"}),(0,b.jsx)(K.SelectItem,{value:"Warehouse",children:"Warehouse"}),(0,b.jsx)(K.SelectItem,{value:"Cold Storage",children:"Cold Storage"}),(0,b.jsx)(K.SelectItem,{value:"Dry Storage",children:"Dry Storage"})]})]}),(0,b.jsx)(H.Input,{placeholder:"e.g., Tank 1",value:ap.newStorageIndex&&ap.newStorageIndex.split(" ")[1]||"",onChange:a=>{let b=ap.newStorageIndex&&ap.newStorageIndex.split(" ")[0]||"";aq({...ap,newStorageIndex:`${b} ${a.target.value}`})},className:"rounded-xl"}),(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>{if(ap.newStorageIndex.trim()){let a=ap.newStorageIndex.trim();a.toLowerCase().includes("tank")?aq({...ap,storageIndices:[...ap.storageIndices,a],tankConfig:{...ap.tankConfig,[a]:{dispensers:[],initialStock:"",fuelType:"Petrol",tankCapacity:""}},newStorageIndex:""}):aq({...ap,storageIndices:[...ap.storageIndices,a],newStorageIndex:""})}},className:"rounded-xl",children:"Add"})]}),ap.storageIndices.length>0&&(0,b.jsx)("div",{className:"space-y-4 mt-4",children:ap.storageIndices.map((a,c)=>(0,b.jsxs)("div",{className:"border rounded-xl p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(e.Badge,{variant:"secondary",className:"rounded-lg",children:a}),(0,b.jsx)("button",{type:"button",onClick:()=>{let b={...ap.tankConfig};delete b[a],aq({...ap,storageIndices:ap.storageIndices.filter((a,b)=>b!==c),tankConfig:b})},className:"text-sm text-destructive hover:underline",children:"Remove"})]}),a.toLowerCase().includes("tank")&&(0,b.jsxs)("div",{className:"space-y-4 bg-muted/50 p-3 rounded-lg",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{children:"Fuel Type"}),(0,b.jsxs)(K.Select,{value:ap.tankConfig[a]?.fuelType||"Petrol",onValueChange:b=>{let c=ap.tankConfig[a]||{dispensers:[],initialStock:"",fuelType:"Petrol",tankCapacity:""};aq({...ap,tankConfig:{...ap.tankConfig,[a]:{...c,fuelType:b}}})},children:[(0,b.jsx)(K.SelectTrigger,{children:(0,b.jsx)(K.SelectValue,{placeholder:"Select fuel type"})}),(0,b.jsxs)(K.SelectContent,{children:[(0,b.jsx)(K.SelectItem,{value:"Petrol",children:"Petrol"}),(0,b.jsx)(K.SelectItem,{value:"Diesel",children:"Diesel"}),(0,b.jsx)(K.SelectItem,{value:"Kerosene",children:"Kerosene"}),(0,b.jsx)(K.SelectItem,{value:"Super",children:"Super"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:`tank-capacity-${c}`,children:"Tank Capacity (Litres) *"}),(0,b.jsx)(H.Input,{id:`tank-capacity-${c}`,type:"number",placeholder:"e.g., 10000",value:ap.tankConfig[a]?.tankCapacity||"",onChange:b=>{let c=ap.tankConfig[a]||{dispensers:[],initialStock:"",fuelType:"Petrol",tankCapacity:""};aq({...ap,tankConfig:{...ap.tankConfig,[a]:{...c,tankCapacity:b.target.value}}})},className:"rounded-xl"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{children:"Dispensers Served by This Tank *"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(H.Input,{placeholder:"e.g., Dispenser 01",id:`new-dispenser-${a}`,className:"rounded-xl"}),(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>{let b=document.getElementById(`new-dispenser-${a}`),c=b?.value?.trim();if(c){let d=ap.tankConfig[a]||{dispensers:[],initialStock:"",fuelType:"Petrol",tankCapacity:""};aq({...ap,tankConfig:{...ap.tankConfig,[a]:{...d,dispensers:[...d.dispensers||[],c]}}}),b.value=""}},className:"rounded-xl",children:"Add Dispenser"})]}),ap.tankConfig[a]?.dispensers?.length>0&&(0,b.jsx)("div",{className:"space-y-2 mt-2",children:ap.tankConfig[a].dispensers.map((d,e)=>(0,b.jsxs)("div",{className:"flex items-center justify-between bg-background p-2 rounded-lg",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:d}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(H.Input,{type:"number",placeholder:"Initial meter reading",className:"w-48 rounded-lg",id:`meter-${c}-${e}`}),(0,b.jsx)("button",{type:"button",onClick:()=>{let b=ap.tankConfig[a]||{dispensers:[],initialStock:"",fuelType:"Petrol",tankCapacity:""},c=b.dispensers.filter((a,b)=>b!==e);aq({...ap,tankConfig:{...ap.tankConfig,[a]:{...b,dispensers:c}}})},className:"text-xs text-destructive hover:underline",children:"Remove"})]})]},e))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:`tank-stock-${a}`,children:"Initial Stock Position (Litres) *"}),(0,b.jsx)(H.Input,{id:`tank-stock-${a}`,type:"number",placeholder:"e.g., 5000",value:ap.tankConfig[a]?.initialStock||"",onChange:b=>{let c=ap.tankConfig[a]||{dispensers:[],initialStock:"",fuelType:"Petrol",tankCapacity:""};aq({...ap,tankConfig:{...ap.tankConfig,[a]:{...c,initialStock:b.target.value}}})},className:"rounded-xl",required:!0})]})]})]},c))})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>P(!1),className:"rounded-xl",disabled:W,children:"Cancel"}),(0,b.jsx)(d.Button,{onClick:aw,className:"rounded-xl bg-blue-600 hover:bg-blue-700",disabled:!ap.name||!ap.location||!ap.county||!ap.localTaxOffice||W,children:W?"Creating...":"Create Branch"})]})]})]}),(0,b.jsx)(G.Dialog,{open:Q,onOpenChange:R,children:(0,b.jsxs)(G.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto rounded-2xl",children:[(0,b.jsxs)(G.DialogHeader,{children:[(0,b.jsx)(G.DialogTitle,{className:"text-2xl",children:"Edit Branch Details"}),(0,b.jsxs)(G.DialogDescription,{children:["Update the information for ",U?.name]})]}),(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"edit-branch-name",children:"Branch Name *"}),(0,b.jsx)(H.Input,{id:"edit-branch-name",placeholder:"e.g., Nairobi Branch",value:ap.name,onChange:a=>aq({...ap,name:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"edit-location",children:"Location *"}),(0,b.jsx)(H.Input,{id:"edit-location",placeholder:"e.g., Nairobi, Kenya",value:ap.location,onChange:a=>aq({...ap,location:a.target.value}),className:"rounded-xl"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"edit-address",children:"Physical Address"}),(0,b.jsx)(H.Input,{id:"edit-address",placeholder:"Street address, building, floor",value:ap.address,onChange:a=>aq({...ap,address:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"edit-county",children:"County *"}),(0,b.jsx)(H.Input,{id:"edit-county",placeholder:"e.g., Nairobi",value:ap.county,onChange:a=>aq({...ap,county:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"edit-local-tax-office",children:"Local Tax Office *"}),(0,b.jsx)(H.Input,{id:"edit-local-tax-office",placeholder:"e.g., Nairobi CBD",value:ap.localTaxOffice,onChange:a=>aq({...ap,localTaxOffice:a.target.value}),className:"rounded-xl"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"edit-manager",children:"Branch Manager"}),(0,b.jsx)(H.Input,{id:"edit-manager",placeholder:"Manager name",value:ap.manager,onChange:a=>aq({...ap,manager:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"edit-email",children:"Email"}),(0,b.jsx)(H.Input,{id:"edit-email",type:"email",placeholder:"branch@flow360.com",value:ap.email,onChange:a=>aq({...ap,email:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"edit-phone",children:"Phone Number"}),(0,b.jsx)(H.Input,{id:"edit-phone",type:"tel",placeholder:"+254...",value:ap.phone,onChange:a=>aq({...ap,phone:a.target.value}),className:"rounded-xl"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"edit-kra-pin",children:"KRA PIN"}),(0,b.jsx)(H.Input,{id:"edit-kra-pin",placeholder:"e.g., P000000000X",value:ap.kraPin,onChange:a=>aq({...ap,kraPin:a.target.value}),className:"rounded-xl"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Required for KRA TIMS integration. Sales will fail without this."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(I.Label,{htmlFor:"edit-controller-id",children:"Controller ID (PTS ID)"}),(0,b.jsx)(H.Input,{id:"edit-controller-id",placeholder:"e.g., 003A003A...",value:ap.controllerId,onChange:a=>aq({...ap,controllerId:a.target.value}),className:"rounded-xl font-mono text-sm"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Unique identifier for the pump controller. Used to match pump callbacks to this branch."})]})]}),(0,b.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-sm font-medium",children:"Staff Password Reset"}),(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:async()=>{if(!U)return;let a=prompt("Enter the email or username of the staff member:");if(a)try{let b=await fetch(`/api/users?email=${encodeURIComponent(a)}&branch_id=${U.id}`),c=await b.json();if(!c.success||!c.data||0===c.data.length)return void alert("User not found in this branch");let d=c.data[0],e=(0,N.getCurrentUser)(),f=await fetch("/api/auth/reset/issue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:d.id,admin_id:e?.id})}),g=await f.json();g.success?alert(`Reset code for ${g.user.username}: ${g.code}

This code expires in ${g.expires_in_minutes} minutes.

Give this code to the user to reset their password.`):alert(g.error||"Failed to generate reset code")}catch(a){console.error("Error generating reset code:",a),alert("Error generating reset code")}},className:"rounded-xl",children:"Generate Reset Code"})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Generate a password reset code for a staff member in this branch"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t",children:[(0,b.jsx)(d.Button,{variant:"destructive",onClick:()=>{U&&(az(U.id,U.name),R(!1))},className:"rounded-xl",children:"Delete Branch"}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>R(!1),className:"rounded-xl",children:"Cancel"}),(0,b.jsx)(d.Button,{onClick:ay,className:"rounded-xl bg-blue-600 hover:bg-blue-700",disabled:!ap.name||!ap.location||!ap.county||!ap.localTaxOffice,children:"Update Branch"})]})]})]})}),(0,b.jsx)(G.Dialog,{open:S,onOpenChange:T,children:(0,b.jsxs)(G.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl",children:[(0,b.jsxs)(G.DialogHeader,{children:[(0,b.jsx)(G.DialogTitle,{className:"text-2xl",children:"Hardware Inventory"}),(0,b.jsx)(G.DialogDescription,{children:"View all hardware assigned to branches"})]}),(0,b.jsx)("div",{className:"py-4",children:(0,b.jsx)("p",{className:"text-center text-muted-foreground",children:"Hardware inventory data will be displayed here. Navigate to the Inventory page for full details."})})]})}),(0,b.jsx)(G.Dialog,{open:aa,onOpenChange:ab,children:(0,b.jsxs)(G.DialogContent,{className:"max-w-2xl rounded-2xl",children:[(0,b.jsxs)(G.DialogHeader,{children:[(0,b.jsx)(G.DialogTitle,{className:"text-2xl",children:"Global Uploads"}),(0,b.jsx)(G.DialogDescription,{children:"Upload meter readings and stock positions for all branches"})]}),(0,b.jsxs)("div",{className:"space-y-6 py-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold",children:"File Requirements"}),(0,b.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[(0,b.jsx)("li",{children:"Excel or CSV file format"}),(0,b.jsx)("li",{children:"Must include: Branch Name, Dispenser ID, Opening Meter Reading, Closing Meter Reading"}),(0,b.jsx)("li",{children:"Must include: Tank ID, Opening Stock, Closing Stock"}),(0,b.jsx)("li",{children:"One row per dispenser/tank reading"})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(I.Label,{htmlFor:"upload-file",children:"Select File *"}),(0,b.jsx)(H.Input,{id:"upload-file",type:"file",accept:".xlsx,.xls,.csv",onChange:a=>ad(a.target.files?.[0]||null),className:"rounded-xl"}),ac&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Selected: ",ac.name]})]}),(0,b.jsxs)("div",{className:"bg-muted/50 p-4 rounded-xl",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Sample Format"}),(0,b.jsxs)("div",{className:"text-xs font-mono bg-background p-3 rounded-lg overflow-x-auto",children:[(0,b.jsx)("div",{children:"Branch,Dispenser,Opening,Closing,Tank,Opening Stock,Closing Stock"}),(0,b.jsx)("div",{children:"Nairobi,Dispenser 01,1000,1500,Tank 1,5000,4200"}),(0,b.jsx)("div",{children:"Mombasa,Dispenser 02,2000,2300,Tank 2,6000,5800"})]})]})]}),(0,b.jsxs)(G.DialogFooter,{children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>ab(!1),className:"rounded-xl",children:"Cancel"}),(0,b.jsxs)(d.Button,{onClick:ao,disabled:!ac,className:"rounded-xl",children:[(0,b.jsx)(p.Upload,{className:"mr-2 h-4 w-4"}),"Upload"]})]})]})})]})}a.s(["default",()=>O])}];

//# sourceMappingURL=app_headquarters_page_tsx_784e44d1._.js.map