module.exports=[22186,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(344),e=a.i(69265),f=a.i(3130),g=a.i(5522),h=a.i(17171),i=a.i(40695),j=a.i(87682),k=a.i(88237),l=a.i(54161),m=a.i(74575),n=a.i(23292),o=a.i(13749),p=a.i(50522),q=a.i(69520),r=a.i(1027),s=a.i(33441),t=a.i(33508),u=a.i(71931),v=a.i(79360),w=a.i(4720),x=a.i(76504),y=a.i(65733),z=a.i(97020),A=a.i(46893);function B(){let[a,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),{formatCurrency:E}=(0,m.useCurrency)(),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)([]),[J,K]=(0,c.useState)([]),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(1),[P,Q]=(0,c.useState)(0),[R,S]=(0,c.useState)({startDate:new Date(Date.now()-6048e5).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],status:"all",documentType:"all",fuelType:"all",invoiceNumber:"",nozzle:"all",paymentMethod:"all",loyalty:"all"}),[T,U]=(0,c.useState)(null),[V,W]=(0,c.useState)(!1),[X,Y]=(0,c.useState)(null),[Z,$]=(0,c.useState)({refundType:"full",reasonCode:"01",partialAmount:"",notes:""}),[_,aa]=(0,c.useState)(null);async function ab(){try{let a;M(!0);let b=localStorage.getItem("selectedBranch");if(!b)return void n.toast.error("No branch selected. Please select a branch from the header.");try{a=JSON.parse(b).id}catch{n.toast.error("Invalid branch selection. Please reselect your branch.");return}if(!a||"hq"===a)return void n.toast.error("Please select a specific branch to view automated sales.");let[c,d,e]=await Promise.all([fetch(`/api/nozzles?branch_id=${a}&status=active`),fetch(`/api/dispensers?branch_id=${a}`),fetch(`/api/sales?branch_id=${a}&is_automated=true&start_date=${R.startDate}&end_date=${R.endDate}&page=${N}&limit=20${"all"!==R.status?`&transmission_status=${R.status}`:""}${"all"!==R.fuelType?`&fuel_type=${R.fuelType}`:""}${"all"!==R.nozzle?`&nozzle_id=${R.nozzle}`:""}${"all"!==R.paymentMethod?`&payment_method=${R.paymentMethod}`:""}`)]),[f,g,h]=await Promise.all([c.json(),d.json(),e.json()]);I(f.success&&f.data||[]),K(g.success&&g.data||[]);let i=h.success&&h.data||[];Q(h.totalCount||i.length);let j=i.map(a=>({...a,quantity:Number(a.quantity)||0,unit_price:Number(a.unit_price)||0,total_amount:Number(a.total_amount)||0,meter_reading_after:Number(a.meter_reading_after)||0}));G(j)}catch(a){console.error("Error fetching data:",a),n.toast.error("Failed to load automated sales data")}finally{M(!1)}}(0,c.useEffect)(()=>{let a=()=>{let a=localStorage.getItem("selectedBranch");if(a)try{return JSON.parse(a).id}catch{}return null};aa(a());let b=()=>{let b=a();b!==_&&aa(b)};window.addEventListener("storage",b);let c=setInterval(()=>{let b=a();b&&b!==_&&aa(b)},1e3);return()=>{window.removeEventListener("storage",b),clearInterval(c)}},[_]),(0,c.useEffect)(()=>{_&&ab()},[N,R,_]);let ac=Math.ceil(P/20),ad=F.filter(a=>("invoices"!==R.documentType||!a.is_credit_note)&&("credit_notes"!==R.documentType||!!a.is_credit_note)&&(!R.invoiceNumber||!!(a.invoice_number||a.receipt_number||"").toLowerCase().includes(R.invoiceNumber.toLowerCase()))&&("loyalty"!==R.loyalty||!!a.is_loyalty_sale)&&("non-loyalty"!==R.loyalty||!a.is_loyalty_sale)),ae=Array.from(new Set(F.map(a=>a.fuel_type).filter(Boolean))),af=Array.from(new Set(F.map(a=>a.nozzle_id).filter(Boolean))),ag=ad.reduce((a,b)=>a+b.total_amount,0),ah=ad.filter(a=>"pending"===a.transmission_status).length,ai=ad.filter(a=>"transmitted"===a.transmission_status).length,aj=ad.filter(a=>"flagged"===a.transmission_status).length;async function ak(a){n.toast.info(`Retrying transmission for sale ${a}...`)}async function al(){if(X){if("partial"===Z.refundType){let a=parseFloat(Z.partialAmount);if(isNaN(a)||a<=0)return void n.toast.error("Please enter a valid partial amount");if(a>Math.abs(parseFloat(X.total_amount)))return void n.toast.error("Partial amount cannot exceed original sale amount")}try{U(X.id);let a=localStorage.getItem("selectedBranch");if(!a)return void n.toast.error("No branch selected");let b=JSON.parse(a),c=await fetch("/api/credit-notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sale_id:X.id,branch_id:b.id,reason_code:Z.reasonCode,refund_type:Z.refundType,partial_amount:"partial"===Z.refundType?parseFloat(Z.partialAmount):null,notes:Z.notes})}),d=await c.json();if(!c.ok||!d.success)throw Error(d.error||"Failed to issue credit note");n.toast.success(`Credit note ${d.creditNoteNumber} issued successfully`),W(!1),Y(null),ab()}catch(a){console.error("Error issuing credit note:",a),n.toast.error(a.message||"Failed to issue credit note")}finally{U(null)}}}async function am(a){try{let b=localStorage.getItem("selectedBranch");if(!b)return void n.toast.error("No branch selected");let c=JSON.parse(b),d=await fetch("/api/receipt/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sale_id:a.id,branch_id:c.id})});if(!d.ok)throw Error("Failed to generate receipt");let e=await d.blob(),f=window.URL.createObjectURL(e),g=document.createElement("a");g.href=f,g.download=`receipt-${a.invoice_number||a.id}.pdf`,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(f),n.toast.success("Receipt downloaded")}catch(a){console.error("Error generating receipt:",a),n.toast.error("Failed to generate receipt")}}return(0,b.jsxs)("div",{className:"flex min-h-screen w-full overflow-x-hidden bg-gradient-to-b from-slate-900 via-blue-900 to-white",children:[(0,b.jsx)(d.DashboardSidebar,{collapsed:a,onToggle:()=>B(!a),mobileOpen:C,onMobileClose:()=>D(!1)}),(0,b.jsx)("div",{className:"flex-1 flex flex-col min-w-0 lg:ml-8 my-2 lg:my-6 mx-2 lg:mr-6",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl lg:rounded-tl-3xl shadow-2xl flex-1 flex flex-col overflow-hidden",children:[(0,b.jsx)(e.DashboardHeader,{onMobileMenuToggle:()=>D(!C)}),(0,b.jsx)("main",{className:"flex-1 overflow-y-auto overflow-x-hidden bg-slate-50 p-4 lg:p-6",children:(0,b.jsxs)("div",{className:"mx-auto max-w-7xl space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-slate-900",children:"Automated Sales"}),(0,b.jsx)("p",{className:"text-slate-600",children:"Sales transactions posted automatically from external systems"})]}),(0,b.jsx)("div",{className:"flex gap-2 items-center",children:(0,b.jsxs)(i.Button,{variant:"outline",onClick:ab,disabled:L,children:[(0,b.jsx)(q.RefreshCw,{className:`h-4 w-4 mr-2 ${L?"animate-spin":""}`}),"Refresh"]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-2",children:(0,b.jsxs)(f.CardTitle,{className:"text-sm font-medium text-slate-600 flex items-center gap-2",children:[(0,b.jsx)(r.Zap,{className:"h-4 w-4"}),"Total Automated"]})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:P}),(0,b.jsxs)("p",{className:"text-sm text-slate-500",children:[E(ag)," revenue"]})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-2",children:(0,b.jsxs)(f.CardTitle,{className:"text-sm font-medium text-green-600 flex items-center gap-2",children:[(0,b.jsx)(s.Check,{className:"h-4 w-4"}),"Transmitted"]})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:ai}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Successfully sent"})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-2",children:(0,b.jsxs)(f.CardTitle,{className:"text-sm font-medium text-amber-600 flex items-center gap-2",children:[(0,b.jsx)(q.RefreshCw,{className:"h-4 w-4"}),"Pending"]})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-amber-600",children:ah}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Awaiting transmission"})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-2",children:(0,b.jsxs)(f.CardTitle,{className:"text-sm font-medium text-red-600 flex items-center gap-2",children:[(0,b.jsx)(t.X,{className:"h-4 w-4"}),"Flagged"]})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:aj}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Requires attention"})]})]})]}),(0,b.jsxs)(f.Card,{className:"rounded-2xl",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(f.CardTitle,{children:"Automated Sales Log"}),(0,b.jsx)(f.CardDescription,{children:"Transactions automatically posted from external systems"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"start-date",className:"text-sm whitespace-nowrap",children:"From:"}),(0,b.jsx)(g.Input,{id:"start-date",type:"date",value:R.startDate,onChange:a=>S({...R,startDate:a.target.value}),className:"w-36 h-9"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"end-date",className:"text-sm whitespace-nowrap",children:"To:"}),(0,b.jsx)(g.Input,{id:"end-date",type:"date",value:R.endDate,onChange:a=>S({...R,endDate:a.target.value}),className:"w-36 h-9"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"status-filter",className:"text-sm whitespace-nowrap",children:"Status:"}),(0,b.jsxs)(j.Select,{value:R.status,onValueChange:a=>S({...R,status:a}),children:[(0,b.jsx)(j.SelectTrigger,{id:"status-filter",className:"w-28 h-9",children:(0,b.jsx)(j.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(j.SelectItem,{value:"transmitted",children:"Transmitted"}),(0,b.jsx)(j.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(j.SelectItem,{value:"flagged",children:"Flagged"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"fuel-filter",className:"text-sm whitespace-nowrap",children:"Fuel:"}),(0,b.jsxs)(j.Select,{value:R.fuelType,onValueChange:a=>S({...R,fuelType:a}),children:[(0,b.jsx)(j.SelectTrigger,{id:"fuel-filter",className:"w-28 h-9",children:(0,b.jsx)(j.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All"}),ae.map(a=>(0,b.jsx)(j.SelectItem,{value:a,children:a},a))]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"nozzle-filter",className:"text-sm whitespace-nowrap",children:"Nozzle:"}),(0,b.jsxs)(j.Select,{value:R.nozzle,onValueChange:a=>S({...R,nozzle:a}),children:[(0,b.jsx)(j.SelectTrigger,{id:"nozzle-filter",className:"w-28 h-9",children:(0,b.jsx)(j.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All"}),af.map(a=>{let c=H.find(b=>b.id===a),d=c?J.find(a=>a.id===c.dispenser_id):null;return(0,b.jsx)(j.SelectItem,{value:a,children:d&&c?`D${d.dispenser_number}N${c.nozzle_number}`:"Unknown"},a)})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"payment-filter",className:"text-sm whitespace-nowrap",children:"Payment:"}),(0,b.jsxs)(j.Select,{value:R.paymentMethod,onValueChange:a=>S({...R,paymentMethod:a}),children:[(0,b.jsx)(j.SelectTrigger,{id:"payment-filter",className:"w-28 h-9",children:(0,b.jsx)(j.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(j.SelectItem,{value:"cash",children:"Cash"}),(0,b.jsx)(j.SelectItem,{value:"mobile_money",children:"Mobile Money"}),(0,b.jsx)(j.SelectItem,{value:"card",children:"Card"}),(0,b.jsx)(j.SelectItem,{value:"credit",children:"Credit"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"doctype-filter",className:"text-sm whitespace-nowrap",children:"Type:"}),(0,b.jsxs)(j.Select,{value:R.documentType,onValueChange:a=>S({...R,documentType:a}),children:[(0,b.jsx)(j.SelectTrigger,{id:"doctype-filter",className:"w-32 h-9",children:(0,b.jsx)(j.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(j.SelectItem,{value:"invoices",children:"Invoices"}),(0,b.jsx)(j.SelectItem,{value:"credit_notes",children:"Credit Notes"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"loyalty-filter",className:"text-sm whitespace-nowrap",children:"Loyalty:"}),(0,b.jsxs)(j.Select,{value:R.loyalty,onValueChange:a=>S({...R,loyalty:a}),children:[(0,b.jsx)(j.SelectTrigger,{id:"loyalty-filter",className:"w-28 h-9",children:(0,b.jsx)(j.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(j.SelectItem,{value:"loyalty",children:"Loyalty Only"}),(0,b.jsx)(j.SelectItem,{value:"non-loyalty",children:"Walk-in"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"invoice-filter",className:"text-sm whitespace-nowrap",children:"Invoice:"}),(0,b.jsx)(g.Input,{id:"invoice-filter",type:"text",placeholder:"Search...",value:R.invoiceNumber,onChange:a=>S({...R,invoiceNumber:a.target.value}),className:"w-28 h-9"})]}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>S({startDate:new Date(Date.now()-6048e5).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],status:"all",documentType:"all",fuelType:"all",invoiceNumber:"",nozzle:"all",paymentMethod:"all",loyalty:"all"}),className:"h-9",children:"Clear"})]})]})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[0===ad.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(r.Zap,{className:"h-12 w-12 mx-auto text-slate-300 mb-4"}),(0,b.jsx)("p",{className:"text-slate-500 text-lg",children:"No automated sales found"}),(0,b.jsx)("p",{className:"text-sm text-slate-400 mt-2",children:"Automated sales appear here when they are posted from external systems like POS terminals or fuel management systems."})]}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(k.Table,{className:"w-full min-w-[900px]",children:[(0,b.jsx)(k.TableHeader,{children:(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableCell,{className:"text-left p-2",children:"Date"}),(0,b.jsx)(k.TableCell,{className:"text-left p-2",children:"Invoice No."}),(0,b.jsx)(k.TableCell,{className:"text-left p-2",children:"Source"}),(0,b.jsx)(k.TableCell,{className:"text-left p-2",children:"Fuel Type"}),(0,b.jsx)(k.TableCell,{className:"text-right p-2",children:"Quantity (L)"}),(0,b.jsx)(k.TableCell,{className:"text-right p-2",children:"Total"}),(0,b.jsx)(k.TableCell,{className:"text-center p-2",children:"Transmission"}),(0,b.jsx)(k.TableCell,{className:"text-center p-2",children:"KRA Status"}),(0,b.jsx)(k.TableCell,{className:"text-center p-2",children:"Actions"})]})}),(0,b.jsx)(k.TableBody,{children:ad.map(a=>(0,b.jsxs)(k.TableRow,{className:"hover:bg-slate-50",children:[(0,b.jsx)(k.TableCell,{className:"p-2",children:new Date(a.sale_date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,b.jsx)(k.TableCell,{className:"p-2 text-sm font-mono",children:a.invoice_number||a.receipt_number}),(0,b.jsx)(k.TableCell,{className:"p-2 text-sm",children:(0,b.jsx)(l.Badge,{variant:"outline",children:a.source_system||"External"})}),(0,b.jsx)(k.TableCell,{className:"p-2",children:a.fuel_type}),(0,b.jsx)(k.TableCell,{className:"p-2 text-right",children:Number(a.quantity).toFixed(2)}),(0,b.jsx)(k.TableCell,{className:"p-2 text-right font-medium",children:E(a.total_amount)}),(0,b.jsx)(k.TableCell,{className:"p-2 text-center",children:(0,b.jsx)(l.Badge,{variant:function(a){switch(a){case"transmitted":return"default";case"pending":default:return"secondary";case"flagged":return"destructive"}}(a.transmission_status),className:"capitalize",children:a.transmission_status||"pending"})}),(0,b.jsx)(k.TableCell,{className:"p-2 text-center",children:function(a){let c=a.kra_status||"pending";switch(c){case"success":return(0,b.jsx)(l.Badge,{variant:"default",className:"bg-green-600",children:"Synced"});case"pending":return(0,b.jsx)(l.Badge,{variant:"secondary",children:"Pending"});case"failed":return(0,b.jsx)(l.Badge,{variant:"destructive",children:"Failed"});default:return(0,b.jsx)(l.Badge,{variant:"secondary",children:c})}}(a)}),(0,b.jsx)(k.TableCell,{className:"p-2 text-center",children:(0,b.jsxs)(x.DropdownMenu,{children:[(0,b.jsx)(x.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(i.Button,{variant:"ghost",size:"sm",children:(0,b.jsx)(v.MoreVertical,{className:"h-4 w-4"})})}),(0,b.jsxs)(x.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(x.DropdownMenuItem,{onClick:()=>am(a),children:[(0,b.jsx)(u.Printer,{className:"h-4 w-4 mr-2"}),"Print KRA Receipt"]}),!a.is_credit_note&&!a.has_credit_note&&(0,b.jsxs)(x.DropdownMenuItem,{onClick:()=>{a.is_credit_note?n.toast.error("Cannot issue credit note for a credit note"):a.has_credit_note?n.toast.error("Credit note already issued for this sale"):(Y(a),$({refundType:"full",reasonCode:"01",partialAmount:"",notes:""}),W(!0))},children:[(0,b.jsx)(w.FileText,{className:"h-4 w-4 mr-2"}),"Generate Credit Note"]}),("pending"===a.transmission_status||"flagged"===a.transmission_status)&&(0,b.jsxs)(x.DropdownMenuItem,{onClick:()=>ak(a.id),children:[(0,b.jsx)(q.RefreshCw,{className:"h-4 w-4 mr-2"}),"Retry Transmission"]})]})]})})]},a.id))})]})}),ac>1&&(0,b.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[(0,b.jsxs)("p",{className:"text-sm text-slate-500",children:["Showing ",(N-1)*20+1," to ",Math.min(20*N,P)," of ",P," entries"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>O(Math.max(1,N-1)),disabled:1===N,children:(0,b.jsx)(o.ChevronLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("span",{className:"text-sm text-slate-600",children:["Page ",N," of ",ac]}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>O(Math.min(ac,N+1)),disabled:N===ac,children:(0,b.jsx)(p.ChevronRight,{className:"h-4 w-4"})})]})]})]})})]}),(0,b.jsxs)("footer",{className:"mt-12 border-t pt-6 pb-4 text-center text-sm text-muted-foreground",children:["Powered by ",(0,b.jsx)("span",{className:"font-semibold text-navy-900",children:"Sensile Technologies East Africa Ltd"})]})]})})]})}),(0,b.jsx)(y.Dialog,{open:V,onOpenChange:W,children:(0,b.jsxs)(y.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(y.DialogHeader,{children:[(0,b.jsx)(y.DialogTitle,{children:"Issue Credit Note"}),(0,b.jsxs)(y.DialogDescription,{children:["Create a credit note for sale ",X?.invoice_number||X?.receipt_number]})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Refund Type"}),(0,b.jsxs)(z.RadioGroup,{value:Z.refundType,onValueChange:a=>$({...Z,refundType:a}),children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(z.RadioGroupItem,{value:"full",id:"full"}),(0,b.jsx)(h.Label,{htmlFor:"full",children:"Full Refund"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(z.RadioGroupItem,{value:"partial",id:"partial"}),(0,b.jsx)(h.Label,{htmlFor:"partial",children:"Partial Refund"})]})]})]}),"partial"===Z.refundType&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"partialAmount",children:"Partial Amount"}),(0,b.jsx)(g.Input,{id:"partialAmount",type:"number",placeholder:"Enter amount",value:Z.partialAmount,onChange:a=>$({...Z,partialAmount:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"reasonCode",children:"Reason Code"}),(0,b.jsxs)(j.Select,{value:Z.reasonCode,onValueChange:a=>$({...Z,reasonCode:a}),children:[(0,b.jsx)(j.SelectTrigger,{id:"reasonCode",children:(0,b.jsx)(j.SelectValue,{placeholder:"Select reason"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"01",children:"Pricing Error"}),(0,b.jsx)(j.SelectItem,{value:"02",children:"Quality Issues"}),(0,b.jsx)(j.SelectItem,{value:"03",children:"Wrong Product"}),(0,b.jsx)(j.SelectItem,{value:"04",children:"Customer Return"}),(0,b.jsx)(j.SelectItem,{value:"05",children:"Other"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"notes",children:"Notes"}),(0,b.jsx)(A.Textarea,{id:"notes",placeholder:"Additional notes...",value:Z.notes,onChange:a=>$({...Z,notes:a.target.value})})]})]}),(0,b.jsxs)(y.DialogFooter,{children:[(0,b.jsx)(i.Button,{variant:"outline",onClick:()=>W(!1),children:"Cancel"}),(0,b.jsx)(i.Button,{onClick:al,disabled:null!==T,children:T?"Issuing...":"Issue Credit Note"})]})]})})]})}a.s(["default",()=>B])}];

//# sourceMappingURL=app_sales_automated_page_tsx_dddc51eb._.js.map