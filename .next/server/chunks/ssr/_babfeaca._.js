module.exports=[38784,a=>{"use strict";let b=(0,a.i(70106).default)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);a.s(["ShoppingCart",()=>b],38784)},73320,a=>{"use strict";let b=(0,a.i(70106).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);a.s(["Upload",()=>b],73320)},90166,a=>{"use strict";let b=(0,a.i(70106).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>b],90166)},83497,a=>{"use strict";let b=(0,a.i(70106).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],83497)},30617,21161,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);a.s(["LayoutDashboard",()=>c],30617);let d=(0,b.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>d],21161)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},60246,a=>{"use strict";let b=(0,a.i(70106).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],60246)},4699,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["default",()=>b])},24669,a=>{"use strict";let b=(0,a.i(70106).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);a.s(["TrendingUp",()=>b],24669)},5784,a=>{"use strict";var b=a.i(4699);a.s(["ChevronDown",()=>b.default])},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(35112);var d=a.i(11011),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(97895);function h({className:a,...c}){return(0,b.jsx)(f,{"data-slot":"label",className:(0,g.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>h],17171)},62213,a=>{"use strict";let b=(0,a.i(70106).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["default",()=>b])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},70121,a=>{"use strict";var b=a.i(72131);function c(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function d(...a){return b=>{let d=!1,e=a.map(a=>{let e=c(a,b);return d||"function"!=typeof e||(d=!0),e});if(d)return()=>{for(let b=0;b<e.length;b++){let d=e[b];"function"==typeof d?d():c(a[b],null)}}}}function e(...a){return b.useCallback(d(...a),a)}a.s(["composeRefs",()=>d,"useComposedRefs",()=>e])},46893,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},33441,a=>{"use strict";var b=a.i(34157);a.s(["Check",()=>b.default])},34039,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(344),f=a.i(69265),g=a.i(3130),h=a.i(40695),i=a.i(5522),j=a.i(17171),k=a.i(46893),l=a.i(87532),m=a.i(96221),n=a.i(33441),o=a.i(37539),p=a.i(97895),q=a.i(29154),r=a.i(30342);function s({options:a,value:d,onValueChange:e,placeholder:f="Select option...",searchPlaceholder:g="Search...",emptyMessage:i="No results found.",disabled:j=!1,className:k}){let[l,m]=c.useState(!1),s=a.find(a=>a.value===d);return(0,b.jsxs)(r.Popover,{open:l,onOpenChange:m,children:[(0,b.jsx)(r.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(h.Button,{variant:"outline",role:"combobox","aria-expanded":l,disabled:j,className:(0,p.cn)("w-full justify-between rounded-xl font-normal",!d&&"text-muted-foreground",k),children:[(0,b.jsx)("span",{className:"truncate",children:s?s.label:f}),(0,b.jsx)(o.ChevronsUpDown,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,b.jsx)(r.PopoverContent,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:(0,b.jsxs)(q.Command,{children:[(0,b.jsx)(q.CommandInput,{placeholder:g,className:"h-9"}),(0,b.jsxs)(q.CommandList,{children:[(0,b.jsx)(q.CommandEmpty,{children:i}),(0,b.jsx)(q.CommandGroup,{children:a.map(a=>(0,b.jsxs)(q.CommandItem,{value:a.label,onSelect:()=>{e?.(a.value),m(!1)},children:[(0,b.jsx)("span",{className:"truncate",children:a.label}),(0,b.jsx)(n.Check,{className:(0,p.cn)("ml-auto h-4 w-4",d===a.value?"opacity-100":"opacity-0")})]},a.value))})]})]})})]})}var t=a.i(23292);function u(){let a=(0,d.useRouter)(),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)([]),[r,u]=(0,c.useState)([]),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)([]),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)(!0),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)({}),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(""),[T,U]=(0,c.useState)(""),[V,W]=(0,c.useState)(""),[X,Y]=(0,c.useState)(""),[Z,$]=(0,c.useState)(""),[_,aa]=(0,c.useState)(""),[ab,ac]=(0,c.useState)(""),[ad,ae]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{let a=localStorage.getItem("user");if(a)try{let b=JSON.parse(a),c=b.vendorId||b.vendor_id,d=b.branchId||b.branch_id,e=b.bhfId||b.bhf_id;if(!c||!d){let a=await fetch(`/api/auth/session?userId=${b.id}`),f=await a.json();if(f.success&&f.user){c=f.user.vendor_id,d=f.user.branch_id,e=f.user.bhf_id;let a={...b,vendor_id:c,branch_id:d,bhf_id:e};localStorage.setItem("user",JSON.stringify(a))}}I({vendorId:c,branchId:d,bhfId:e})}catch(a){console.error("Failed to parse user data:",a)}})(),(async()=>{try{let[a,b]=await Promise.all([fetch("/api/kra/saved-data?type=codelist"),fetch("/api/kra/saved-data?type=classifications")]),c=await a.json(),d=await b.json();c.data&&(q(c.data.filter(a=>"05"===a.cd_cls)),u(c.data.filter(a=>"04"===a.cd_cls)),w(c.data.filter(a=>"24"===a.cd_cls)),y(c.data.filter(a=>"10"===a.cd_cls)),A(c.data.filter(a=>"17"===a.cd_cls))),d.data&&C(d.data)}catch(a){console.error("Failed to fetch data:",a),t.toast.error("Failed to load form data")}finally{E(!1)}})()},[]);let af=async b=>{if(b.preventDefault(),!H.vendorId){t.toast.error("Session expired. Please login again."),a.push("/auth/login");return}if(!J||!Z||!ad||!X||!V||!_||!ab)return void t.toast.error("Please fill in all required fields");G(!0);try{let a=await fetch("/api/items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vendorId:H.vendorId,branchId:H.branchId,itemName:J,description:L,itemType:Z,classCode:ad,taxType:X,origin:V,batchNumber:N,purchasePrice:parseFloat(P)||0,salePrice:parseFloat(R)||0,sku:T,quantityUnit:_,packageUnit:ab})}),b=await a.json();a.ok?(t.toast.success(`Item created with code: ${b.itemCode}`),K(""),M(""),O(""),Q(""),S(""),U(""),W(""),Y(""),$(""),aa(""),ac(""),ae("")):t.toast.error(b.error||"Failed to create item")}catch(a){console.error("Error creating item:",a),t.toast.error("Failed to create item. Please try again.")}finally{G(!1)}},ag=p.map(a=>({value:a.cd,label:`${a.cd} - ${a.cd_nm}`})),ah=r.map(a=>({value:a.cd,label:`${a.cd} - ${a.cd_nm}`})),ai=v.map(a=>({value:a.cd,label:`${a.cd} - ${a.cd_nm}`})),aj=x.map(a=>({value:a.cd,label:`${a.cd} - ${a.cd_nm}`})),ak=z.map(a=>({value:a.cd,label:`${a.cd} - ${a.cd_nm}`})),al=B.map(a=>({value:a.item_cls_cd,label:`${a.item_cls_cd} - ${a.item_cls_nm}`}));return(0,b.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gradient-to-b from-slate-900 via-blue-900 to-white",children:[(0,b.jsx)(e.DashboardSidebar,{collapsed:n,onToggle:()=>o(!n)}),(0,b.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden -ml-6 mt-6 bg-white rounded-tl-3xl shadow-2xl z-10",children:[(0,b.jsx)(f.DashboardHeader,{}),(0,b.jsx)("main",{className:"flex-1 overflow-y-auto bg-slate-50 p-6",children:(0,b.jsxs)("div",{className:"mx-auto max-w-7xl space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-balance",children:"Add New Item"}),(0,b.jsx)("p",{className:"text-muted-foreground text-pretty",children:"Create a new item in your inventory"})]}),(0,b.jsxs)("div",{className:"relative w-full max-w-xs",children:[(0,b.jsx)(l.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(i.Input,{type:"search",placeholder:"Search items...",className:"pl-9 rounded-xl"})]})]}),(0,b.jsxs)(g.Card,{className:"rounded-2xl",children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{children:"Item Details"}),(0,b.jsx)(g.CardDescription,{children:"Fill in the information for the new item. Item code will be auto-generated."})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("form",{onSubmit:af,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-200",children:[(0,b.jsx)(j.Label,{className:"text-sm text-blue-700 font-medium",children:"Item Code Preview"}),(0,b.jsx)("p",{className:"text-lg font-mono font-semibold text-blue-900 mt-1",children:V&&Z&&ab&&_?`${V}${Z}${ab}${_}XXXXXXX`:"Select all required fields to preview"}),(0,b.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"Format: Origin + ItemType + PackageUnit + QuantityUnit + SequenceNumber"})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"itemName",children:"Item Name *"}),(0,b.jsx)(i.Input,{id:"itemName",value:J,onChange:a=>K(a.target.value),placeholder:"e.g., Super Petrol",className:"rounded-xl",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"batchNumber",children:"Batch Number"}),(0,b.jsx)(i.Input,{id:"batchNumber",value:N,onChange:a=>O(a.target.value),placeholder:"e.g., BATCH-2024-001",className:"rounded-xl"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Origin *"}),(0,b.jsx)(s,{options:ag,value:V,onValueChange:W,placeholder:D?"Loading...":"Select origin country",searchPlaceholder:"Search countries...",emptyMessage:"No countries found.",disabled:D})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Item Type *"}),(0,b.jsx)(s,{options:ai,value:Z,onValueChange:$,placeholder:D?"Loading...":"Select item type",searchPlaceholder:"Search item types...",emptyMessage:"No item types found.",disabled:D})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Package Unit *"}),(0,b.jsx)(s,{options:ak,value:ab,onValueChange:ac,placeholder:D?"Loading...":"Select package unit",searchPlaceholder:"Search package units...",emptyMessage:"No package units found.",disabled:D})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Quantity Unit (UoM) *"}),(0,b.jsx)(s,{options:aj,value:_,onValueChange:aa,placeholder:D?"Loading...":"Select quantity unit",searchPlaceholder:"Search units...",emptyMessage:"No units found.",disabled:D})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Class Code *"}),(0,b.jsx)(s,{options:al,value:ad,onValueChange:ae,placeholder:D?"Loading...":"Select item classification",searchPlaceholder:"Search classifications...",emptyMessage:"No classifications found.",disabled:D})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Tax Type *"}),(0,b.jsx)(s,{options:ah,value:X,onValueChange:Y,placeholder:D?"Loading...":"Select tax type",searchPlaceholder:"Search tax types...",emptyMessage:"No tax types found.",disabled:D})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"purchasePrice",children:"Purchase Price (Incl.) *"}),(0,b.jsx)(i.Input,{id:"purchasePrice",type:"number",value:P,onChange:a=>Q(a.target.value),placeholder:"0.00",className:"rounded-xl",step:"0.01",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"salePrice",children:"Sale Price *"}),(0,b.jsx)(i.Input,{id:"salePrice",type:"number",value:R,onChange:a=>S(a.target.value),placeholder:"0.00",className:"rounded-xl",step:"0.01",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"sku",children:"SKU"}),(0,b.jsx)(i.Input,{id:"sku",value:T,onChange:a=>U(a.target.value),placeholder:"e.g., SKU-12345",className:"rounded-xl"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(k.Textarea,{id:"description",value:L,onChange:a=>M(a.target.value),placeholder:"Enter item description...",className:"rounded-xl min-h-[100px]"})]}),(0,b.jsxs)("div",{className:"flex gap-4 justify-end",children:[(0,b.jsx)(h.Button,{type:"button",variant:"outline",className:"rounded-xl bg-transparent",onClick:()=>a.back(),children:"Cancel"}),(0,b.jsx)(h.Button,{type:"submit",className:"rounded-xl bg-blue-600 hover:bg-blue-700",disabled:F,children:F?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Add Item"})]})]})})]}),(0,b.jsxs)("footer",{className:"mt-12 border-t pt-6 pb-4 text-center text-sm text-muted-foreground",children:["Powered by ",(0,b.jsx)("span",{className:"font-semibold text-foreground",children:"Sensile Technologies East Africa Ltd"})]})]})})]})]})}a.s(["default",()=>u],34039)}];

//# sourceMappingURL=_babfeaca._.js.map