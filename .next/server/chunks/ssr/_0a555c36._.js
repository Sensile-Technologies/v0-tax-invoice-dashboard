module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},87532,50537,a=>{"use strict";let b=(0,a.i(70106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["default",()=>b],50537),a.s(["Search",()=>b],87532)},62213,a=>{"use strict";let b=(0,a.i(70106).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["default",()=>b])},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(35112);var d=a.i(11011),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(97895);function h({className:a,...c}){return(0,b.jsx)(f,{"data-slot":"label",className:(0,g.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>h],17171)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},57990,a=>{"use strict";let b=(0,a.i(70106).default)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);a.s(["Store",()=>b],57990)},10448,a=>{"use strict";let b=(0,a.i(70106).default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);a.s(["Edit2",()=>b],10448)},63519,a=>{"use strict";let b=(0,a.i(70106).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);a.s(["Phone",()=>b],63519)},96305,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(54161),g=a.i(5522),h=a.i(17171),i=a.i(65733),j=a.i(21958),k=a.i(67900),l=a.i(87532),m=a.i(63519);let n=(0,a.i(70106).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var o=a.i(57990),p=a.i(4720),q=a.i(41675),r=a.i(10448),s=a.i(23292),t=a.i(56711);function u(){let[a,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)({name:"",email:"",phone:"",address:""});(0,c.useEffect)(()=>{P()},[]);let P=async()=>{try{let a=await fetch("/api/admin/vendors"),b=await a.json();u(Array.isArray(b)?b:[])}catch(a){console.error("Error fetching merchants:",a),u([])}finally{w(!1)}},Q=async a=>{I(!0);try{let[b,c]=await Promise.all([fetch(`/api/admin/vendors/${a.id}/branches`),fetch(`/api/admin/vendors/${a.id}/invoices`)]),d=await b.json(),e=await c.json();E(Array.isArray(d)?d:[]),G(Array.isArray(e)?e:[])}catch(a){console.error("Error fetching merchant details:",a),E([]),G([])}finally{I(!1)}},R=async()=>{if(L)try{if(!(await fetch("/api/admin/vendors",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:L.id,...N})})).ok)throw Error("Failed to update merchant");s.toast.success("Merchant updated successfully"),K(!1),P()}catch(a){s.toast.error("Failed to update merchant")}},S=a=>{switch(a){case"active":case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";case"partial":return"bg-blue-100 text-blue-800";default:return"bg-slate-100 text-slate-800"}},T=a.filter(a=>a.name?.toLowerCase().includes(x.toLowerCase())||a.email?.toLowerCase().includes(x.toLowerCase())),U=F.filter(a=>"pending"===a.status||"overdue"===a.status||"partial"===a.status);return v?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Merchants"}),(0,b.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage all merchants on the platform"})]})}),(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(l.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),(0,b.jsx)(g.Input,{placeholder:"Search merchants...",value:x,onChange:a=>y(a.target.value),className:"pl-10"})]})}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(a=>(0,b.jsxs)(d.Card,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{C(a),A(!0),Q(a)},children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(k.Building2,{className:"h-5 w-5 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(d.CardTitle,{className:"text-lg",children:a.name}),(0,b.jsx)(d.CardDescription,{children:a.email})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),M(a),O({name:a.name||"",email:a.email||"",phone:a.phone||"",address:a.address||""}),K(!0)},title:"Edit Contact",children:(0,b.jsx)(r.Edit2,{className:"h-4 w-4"})}),(0,b.jsx)(f.Badge,{className:S(a.status),children:a.status})]})]})}),(0,b.jsxs)(d.CardContent,{className:"space-y-3",children:[a.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,b.jsx)(m.Phone,{className:"h-4 w-4"}),a.phone]}),a.address&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,b.jsx)(n,{className:"h-4 w-4"}),a.address]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 pt-2 border-t",children:[(0,b.jsxs)("div",{className:"text-center flex-1",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:Number(a.branch_count)}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Branches"})]}),(0,b.jsxs)("div",{className:"text-center flex-1",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:Number(a.pending_invoices||0)}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Invoices Pending"})]}),(0,b.jsx)("div",{className:"text-center flex-1",children:(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs",children:a.subscription_plan})})]})]})]},a.id))}),(0,b.jsx)(i.Dialog,{open:z,onOpenChange:A,children:(0,b.jsxs)(i.DialogContent,{className:"max-w-3xl max-h-[85vh] overflow-y-auto",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsxs)(i.DialogTitle,{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(k.Building2,{className:"h-5 w-5 text-blue-600"})}),B?.name]}),(0,b.jsxs)(i.DialogDescription,{children:[B?.email," ",B?.phone&&`| ${B.phone}`]})]}),H?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,b.jsxs)(j.Tabs,{defaultValue:"branches",className:"mt-4",children:[(0,b.jsxs)(j.TabsList,{className:"grid w-full grid-cols-2",children:[(0,b.jsxs)(j.TabsTrigger,{value:"branches",children:[(0,b.jsx)(o.Store,{className:"h-4 w-4 mr-2"}),"Branches (",D.length,")"]}),(0,b.jsxs)(j.TabsTrigger,{value:"invoices",children:[(0,b.jsx)(p.FileText,{className:"h-4 w-4 mr-2"}),"Invoices (",U.length," pending)"]})]}),(0,b.jsx)(j.TabsContent,{value:"branches",className:"mt-4 space-y-3",children:0===D.length?(0,b.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,b.jsx)(o.Store,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"No branches found"]}):D.map(a=>(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(o.Store,{className:"h-5 w-5 text-green-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.bhf_nm}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:a.address||"No address"})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)(f.Badge,{variant:"outline",className:"font-mono",children:["BHF-ID: ",a.bhf_id]}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(f.Badge,{className:S(a.status||"active"),children:a.status||"active"})})]})]})})},a.id))}),(0,b.jsx)(j.TabsContent,{value:"invoices",className:"mt-4 space-y-3",children:0===F.length?(0,b.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,b.jsx)(p.FileText,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"No invoices found"]}):F.map(a=>{let c;return(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(p.FileText,{className:"h-5 w-5 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-mono font-medium",children:a.invoice_number}),(0,b.jsxs)("p",{className:"text-sm text-slate-500 flex items-center gap-1",children:[(0,b.jsx)(q.Calendar,{className:"h-3 w-3"}),"Due: ",a.due_date?(0,t.format)(new Date(a.due_date),"MMM d, yyyy"):"N/A"]})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"font-bold text-lg",children:(c=Number(a.total_amount),new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(c))}),(0,b.jsx)(f.Badge,{className:S(a.status),children:a.status})]})]})})},a.id)})})]})]})}),0===T.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(k.Building2,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-slate-500",children:"No merchants found"})]}),(0,b.jsx)(i.Dialog,{open:J,onOpenChange:K,children:(0,b.jsxs)(i.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Edit Merchant Contact"}),(0,b.jsx)(i.DialogDescription,{children:"Update the contact information for this merchant"})]}),(0,b.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"edit-name",children:"Name"}),(0,b.jsx)(g.Input,{id:"edit-name",value:N.name,onChange:a=>O({...N,name:a.target.value}),placeholder:"Merchant name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"edit-email",children:"Email"}),(0,b.jsx)(g.Input,{id:"edit-email",type:"email",value:N.email,onChange:a=>O({...N,email:a.target.value}),placeholder:"contact@example.com"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"edit-phone",children:"Phone"}),(0,b.jsx)(g.Input,{id:"edit-phone",value:N.phone,onChange:a=>O({...N,phone:a.target.value}),placeholder:"+254 xxx xxx xxx"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"edit-address",children:"Address"}),(0,b.jsx)(g.Input,{id:"edit-address",value:N.address,onChange:a=>O({...N,address:a.target.value}),placeholder:"Business address"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:R,children:"Save Changes"})]})]})]})})]})}a.s(["default",()=>u],96305)}];

//# sourceMappingURL=_0a555c36._.js.map