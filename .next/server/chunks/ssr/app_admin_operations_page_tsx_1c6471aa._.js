module.exports=[28893,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(54161),g=a.i(5522),h=a.i(21958),i=a.i(46893),j=a.i(65733),k=a.i(87682),l=a.i(17171),m=a.i(46143),n=a.i(88237),o=a.i(70106);let p=(0,o.default)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),q=(0,o.default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var r=a.i(11300),s=a.i(87532),t=a.i(15618),u=a.i(67900),v=a.i(35125),w=a.i(33441),x=a.i(92e3);let y=(0,o.default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var z=a.i(17755);let A=(0,o.default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var B=a.i(84505),C=a.i(1631),D=a.i(81560),E=a.i(1027),F=a.i(96221),G=a.i(76504),H=a.i(23292),I=a.i(56711);function J(){let[a,o]=(0,c.useState)("hardware"),[J,K]=(0,c.useState)([]),[L,M]=(0,c.useState)([]),[N,O]=(0,c.useState)([]),[P,Q]=(0,c.useState)([]),[R,S]=(0,c.useState)([]),[T,U]=(0,c.useState)(!0),[V,W]=(0,c.useState)(""),[X,Y]=(0,c.useState)(!1),[Z,$]=(0,c.useState)(!1),[_,aa]=(0,c.useState)(!1),[ab,ac]=(0,c.useState)(null),[ad,ae]=(0,c.useState)(null),[af,ag]=(0,c.useState)([]),[ah,ai]=(0,c.useState)(!1),[aj,ak]=(0,c.useState)(""),[al,am]=(0,c.useState)(""),[an,ao]=(0,c.useState)({serial_number:"",device_type:"token",status:"active",branch_id:"",assigned_to:""}),[ap,aq]=(0,c.useState)(!1),[ar,as]=(0,c.useState)(null),[at,au]=(0,c.useState)(""),[av,aw]=(0,c.useState)(""),[ax,ay]=(0,c.useState)([]),[az,aA]=(0,c.useState)(!1),[aB,aC]=(0,c.useState)(null),[aD,aE]=(0,c.useState)({company_name:"",contact_name:"",email:"",phone:"",trading_name:"",kra_pin:"",location:"",county:"",address:""}),[aF,aG]=(0,c.useState)({device_token:"",bhf_id:"",server_address:"",server_port:"",hardware_type:"",hardware_serial:"",device_serial_number:"",sr_number:"",pts_id:""}),[aH,aI]=(0,c.useState)(!1);(0,c.useEffect)(()=>{aJ()},[]);let aJ=async()=>{try{let[a,b,c,d]=await Promise.all([fetch("/api/admin/operations/hardware"),fetch("/api/admin/operations/onboarding"),fetch("/api/admin/operations/signups"),fetch("/api/admin/vendors")]),e=await a.json(),f=await b.json(),g=await c.json(),h=await d.json();K(Array.isArray(e)?e:[]),M(Array.isArray(f)?f:[]),O(Array.isArray(g)?g:[]),Q(Array.isArray(h)?h:[])}catch(a){console.error("Error fetching data:",a)}finally{U(!1)}},aK=async a=>{try{let b=await fetch(`/api/admin/vendors/${a}/branches`),c=await b.json();S(Array.isArray(c)?c:[])}catch(a){console.error("Error fetching branches:",a),S([])}},aL=async()=>{if(!an.serial_number)return void H.toast.error("Please enter a serial number");if(!av)return void H.toast.error("Please select a merchant");if(!an.branch_id)return void H.toast.error("Please select a branch");try{if(!(await fetch("/api/admin/operations/hardware",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({serial_number:an.serial_number,device_type:an.device_type,status:an.status,branch_id:an.branch_id,assigned_to:an.assigned_to||null})})).ok)throw Error("Failed to add hardware");H.toast.success("Hardware added successfully"),Y(!1),ao({serial_number:"",device_type:"token",status:"active",branch_id:"",assigned_to:""}),aw(""),ay([]),aJ()}catch(a){H.toast.error("Failed to add hardware")}},aM=async()=>{if(ar)try{if(!(await fetch("/api/admin/operations/hardware",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ar.id,serial_number:ar.serial_number,device_type:ar.device_type,status:ar.status})})).ok)throw Error("Failed to update hardware");H.toast.success("Hardware updated successfully"),aq(!1),as(null),aJ()}catch(a){H.toast.error("Failed to update hardware")}},aN=async a=>{try{let b=await fetch("/api/admin/operations/signups",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({lead_id:a,...aD})}),c=await b.json();if(!b.ok)return void(c.message?H.toast.error(c.message):H.toast.error(c.error||"Failed to save changes"));H.toast.success("Changes saved successfully"),aA(!1),aC(null),aJ()}catch(a){H.toast.error("Failed to save changes")}},aO=async(a,b)=>{if(confirm(`Remove "${b}" from signup requests? This will move the lead back to the contracting stage in the sales pipeline.`))try{let b=await fetch(`/api/admin/operations/signups?id=${a}`,{method:"DELETE"}),c=await b.json();if(!b.ok)return void H.toast.error(c.error||"Failed to remove from signup requests");H.toast.success("Lead moved back to contracting stage"),aJ()}catch(a){H.toast.error("Failed to remove from signup requests")}},aP=async a=>{if(ab)try{if(!(await fetch("/api/admin/operations/hardware",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ab.id,branch_id:a})})).ok)throw Error("Failed to assign hardware");H.toast.success("Hardware assigned successfully"),$(!1),ac(null),aJ()}catch(a){H.toast.error("Failed to assign hardware")}},aQ=async()=>{if(0===af.length||!al)return void H.toast.error("Please select hardware and a branch");try{let a=0,b=0;for(let c of af)(await fetch("/api/admin/operations/hardware",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:c,branch_id:al})})).ok?a++:b++;b>0?H.toast.warning(`${a} device(s) assigned, ${b} failed`):H.toast.success(`${a} device(s) assigned successfully`),ai(!1),ag([]),ak(""),am(""),aJ()}catch(a){H.toast.error("Failed to assign hardware")}},aR=J.filter(a=>"available"===a.status),aS=async()=>{if(!ad){console.error("[Onboarding] No selected request"),H.toast.error("No request selected");return}console.log("[Onboarding] Saving configuration for:",ad.id,aF);try{let a=await fetch("/api/admin/operations/onboarding",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ad.id,branch_id:ad.branch_id,...aF})});if(console.log("[Onboarding] Response status:",a.status),!a.ok){let b=await a.json();throw console.error("[Onboarding] Error:",b),Error(b.error||"Failed to configure")}let b=await a.json();console.log("[Onboarding] Success:",b),H.toast.success("Configuration saved successfully"),aa(!1),ae(null),aG({device_token:"",bhf_id:"",server_address:"",server_port:"",hardware_type:"",hardware_serial:"",device_serial_number:"",sr_number:"",pts_id:""}),aJ()}catch(a){console.error("[Onboarding] Error:",a),H.toast.error(a.message||"Failed to save configuration")}},aT=async()=>{if(!ad?.branch_id)return void H.toast.error("Branch ID not available for initialization");aI(!0);try{let a=await fetch("/api/kra/initialize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch_id:ad.branch_id})}),b=await a.json();if(!a.ok)return void H.toast.error(b.error||"Failed to initialize");b.success?H.toast.success("KRA initialization successful - logged to branch profile"):H.toast.warning("KRA initialization completed with errors - check branch logs")}catch(a){H.toast.error(a.message||"Failed to initialize branch")}finally{aI(!1)}},aU=J.filter(a=>a.serial_number?.toLowerCase().includes(V.toLowerCase())||a.merchant_name?.toLowerCase().includes(V.toLowerCase())||a.branch_name?.toLowerCase().includes(V.toLowerCase()));return T?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Operations"}),(0,b.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage hardware, onboarding, and merchant signups"})]})}),(0,b.jsxs)(h.Tabs,{value:a,onValueChange:o,children:[(0,b.jsxs)(h.TabsList,{children:[(0,b.jsxs)(h.TabsTrigger,{value:"hardware",children:[(0,b.jsx)(p,{className:"h-4 w-4 mr-2"}),"Hardware"]}),(0,b.jsxs)(h.TabsTrigger,{value:"onboarding",children:[(0,b.jsx)(r.ClipboardList,{className:"h-4 w-4 mr-2"}),"Onboarding Requests",L.length>0&&(0,b.jsx)(f.Badge,{className:"ml-2 bg-orange-500",children:L.length})]}),(0,b.jsxs)(h.TabsTrigger,{value:"signups",children:[(0,b.jsx)(q,{className:"h-4 w-4 mr-2"}),"Signup Requests",N.length>0&&(0,b.jsx)(f.Badge,{className:"ml-2 bg-blue-500",children:N.length})]})]}),(0,b.jsxs)(h.TabsContent,{value:"hardware",className:"space-y-4 mt-4",children:[(0,b.jsx)(d.Card,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:(0,b.jsxs)(d.CardContent,{className:"flex items-center justify-between py-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,b.jsx)(C.Smartphone,{className:"h-6 w-6 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-slate-900",children:"Flow360 Mobile App (APK)"}),(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Download and install on Sunmi V2S POS devices"})]})]}),(0,b.jsx)(e.Button,{asChild:!0,className:"bg-blue-600 hover:bg-blue-700",children:(0,b.jsxs)("a",{href:"https://expo.dev/artifacts/eas/dcUYY5o4dxff5X3VZU23f8.apk",target:"_blank",rel:"noopener noreferrer",children:[(0,b.jsx)(B.Download,{className:"h-4 w-4 mr-2"}),"Download APK"]})})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(s.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),(0,b.jsx)(g.Input,{placeholder:"Search hardware...",value:V,onChange:a=>W(a.target.value),className:"pl-10"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[af.length>0&&(0,b.jsxs)(j.Dialog,{open:ah,onOpenChange:ai,children:[(0,b.jsx)(j.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"outline",children:[(0,b.jsx)(u.Building2,{className:"h-4 w-4 mr-2"}),"Assign ",af.length," Device(s)"]})}),(0,b.jsxs)(j.DialogContent,{children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsx)(j.DialogTitle,{children:"Assign Hardware to Branch"}),(0,b.jsxs)(j.DialogDescription,{children:["Assign ",af.length," selected device(s) to a branch"]})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Merchant"}),(0,b.jsxs)(k.Select,{value:aj,onValueChange:a=>{ak(a),am(""),aK(a)},children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Select merchant"})}),(0,b.jsx)(k.SelectContent,{children:P.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),aj&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Branch"}),(0,b.jsxs)(k.Select,{value:al,onValueChange:am,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Select branch"})}),(0,b.jsx)(k.SelectContent,{children:R.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:a.bhf_nm||a.name},a.id))})]})]}),(0,b.jsx)(e.Button,{onClick:aQ,className:"w-full",disabled:!al,children:"Assign to Branch"})]})]})]}),(0,b.jsxs)(j.Dialog,{open:X,onOpenChange:Y,children:[(0,b.jsx)(j.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{children:[(0,b.jsx)(t.Plus,{className:"h-4 w-4 mr-2"}),"Add Hardware"]})}),(0,b.jsxs)(j.DialogContent,{className:"max-w-lg",children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsx)(j.DialogTitle,{children:"Add Hardware"}),(0,b.jsx)(j.DialogDescription,{children:"Register a new hardware device"})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Serial Number *"}),(0,b.jsx)(g.Input,{value:an.serial_number,onChange:a=>ao({...an,serial_number:a.target.value}),placeholder:"SN-XXXX-XXXX"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Device Type *"}),(0,b.jsxs)(k.Select,{value:an.device_type,onValueChange:a=>ao({...an,device_type:a}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"token",children:"Hardware Token"}),(0,b.jsx)(k.SelectItem,{value:"printer",children:"Fiscal Printer"}),(0,b.jsx)(k.SelectItem,{value:"terminal",children:"POS Terminal"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Status"}),(0,b.jsxs)(k.Select,{value:an.status,onValueChange:a=>ao({...an,status:a}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(k.SelectItem,{value:"inactive",children:"Inactive"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Merchant *"}),(0,b.jsxs)(k.Select,{value:av,onValueChange:a=>{aw(a),ao({...an,branch_id:""}),fetch(`/api/admin/vendors/${a}/branches`).then(a=>a.json()).then(a=>ay(Array.isArray(a)?a:[])).catch(()=>ay([]))},children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Select merchant"})}),(0,b.jsx)(k.SelectContent,{children:P.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Branch *"}),(0,b.jsxs)(k.Select,{value:an.branch_id,onValueChange:a=>ao({...an,branch_id:a}),disabled:!av,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:av?"Select branch":"Select merchant first"})}),(0,b.jsx)(k.SelectContent,{children:ax.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsx)(e.Button,{onClick:aL,className:"w-full",children:"Add Hardware"})]})]})]})]})]}),(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"p-0",children:(0,b.jsxs)(n.Table,{children:[(0,b.jsx)(n.TableHeader,{children:(0,b.jsxs)(n.TableRow,{children:[(0,b.jsx)(n.TableHead,{className:"w-12",children:(0,b.jsx)(m.Checkbox,{checked:aR.length>0&&af.length===aR.length,onCheckedChange:a=>{a?ag(aR.map(a=>a.id)):ag([])}})}),(0,b.jsx)(n.TableHead,{children:"Serial Number"}),(0,b.jsx)(n.TableHead,{children:"Device Type"}),(0,b.jsx)(n.TableHead,{children:"Status"}),(0,b.jsx)(n.TableHead,{children:"Assigned To"}),(0,b.jsx)(n.TableHead,{children:"Date Added"}),(0,b.jsx)(n.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(n.TableBody,{children:aU.map(a=>(0,b.jsxs)(n.TableRow,{children:[(0,b.jsx)(n.TableCell,{children:"available"===a.status&&(0,b.jsx)(m.Checkbox,{checked:af.includes(a.id),onCheckedChange:()=>{var b;return b=a.id,void ag(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])}})}),(0,b.jsx)(n.TableCell,{className:"font-mono font-semibold",children:a.serial_number}),(0,b.jsx)(n.TableCell,{className:"capitalize",children:a.device_type}),(0,b.jsx)(n.TableCell,{children:(0,b.jsx)(f.Badge,{className:(a=>{switch(a){case"available":case"completed":return"bg-green-100 text-green-800";case"assigned":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-slate-100 text-slate-800"}})(a.status),children:a.status})}),(0,b.jsx)(n.TableCell,{children:a.branch_name?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.branch_name}),a.merchant_name&&(0,b.jsx)("div",{className:"text-sm text-slate-500",children:a.merchant_name})]}):(0,b.jsx)("span",{className:"text-slate-400",children:"-"})}),(0,b.jsx)(n.TableCell,{children:(0,I.format)(new Date(a.created_at),"MMM d, yyyy")}),(0,b.jsx)(n.TableCell,{className:"text-right",children:(0,b.jsxs)(G.DropdownMenu,{children:[(0,b.jsx)(G.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(z.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(G.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(G.DropdownMenuItem,{onClick:()=>{as(a),aq(!0)},children:[(0,b.jsx)(A,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,b.jsxs)(G.DropdownMenuItem,{onClick:()=>{ac(a),$(!0)},children:[(0,b.jsx)(u.Building2,{className:"h-4 w-4 mr-2"}),a.branch_id?"Reassign":"Assign"]})]})]})})]},a.id))})]})})}),0===aU.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(p,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-slate-500",children:"No hardware registered yet"})]})]}),(0,b.jsxs)(h.TabsContent,{value:"onboarding",className:"space-y-4 mt-4",children:[(0,b.jsx)("div",{className:"grid gap-4",children:L.map(a=>(0,b.jsx)(d.Card,{className:"border-orange-200 bg-orange-50",children:(0,b.jsx)(d.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-orange-100",children:(0,b.jsx)(x.AlertCircle,{className:"h-5 w-5 text-orange-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-semibold",children:a.merchant_name}),(0,b.jsx)(f.Badge,{className:"bg-orange-100 text-orange-700",children:"Pending Onboarding"})]}),a.trading_name&&(0,b.jsxs)("div",{className:"text-sm text-slate-600",children:["Trading Name: ",a.trading_name]}),a.kra_pin&&(0,b.jsxs)("div",{className:"text-sm text-slate-600",children:["KRA PIN: ",a.kra_pin]}),(0,b.jsxs)("div",{className:"text-sm text-slate-500",children:[a.contact_name&&`Contact: ${a.contact_name}`,a.contact_email&&` - ${a.contact_email}`,a.contact_phone&&` - ${a.contact_phone}`]}),(0,b.jsxs)("div",{className:"text-sm text-slate-500",children:[a.location&&`${a.location}`,a.county&&`, ${a.county}`,(a.location||a.county)&&" - ",(0,I.format)(new Date(a.created_at),"MMM d, yyyy")]})]})]}),(0,b.jsxs)(e.Button,{onClick:()=>{ae(a),aa(!0)},children:[(0,b.jsx)(v.Server,{className:"h-4 w-4 mr-2"}),"Configure"]})]})})},a.id))}),0===L.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(r.ClipboardList,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-slate-500",children:"No leads pending onboarding configuration"}),(0,b.jsx)("p",{className:"text-sm text-slate-400 mt-2",children:"Leads that have signed up will appear here for configuration"})]})]}),(0,b.jsx)(h.TabsContent,{value:"signups",className:"space-y-4 mt-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Pending Signups (Onboarding Stage)"}),N.map(a=>(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(q,{className:"h-5 w-5 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold",children:a.company_name}),(0,b.jsxs)("div",{className:"text-sm text-slate-500",children:[a.contact_name," - ",a.email]}),(0,b.jsxs)("div",{className:"text-sm text-slate-500",children:[a.phone,a.sales_person_name&&` - Sales: ${a.sales_person_name}`]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(y,{className:"h-4 w-4 mr-2"}),"Contact"]}),(0,b.jsxs)(e.Button,{size:"sm",onClick:()=>{aC(a),aE({company_name:a.company_name||"",contact_name:a.contact_name||"",email:a.email||"",phone:a.phone||"",trading_name:a.trading_name||"",kra_pin:a.kra_pin||"",location:a.location||"",county:a.county||"",address:a.address||""}),aA(!0)},children:[(0,b.jsx)(A,{className:"h-4 w-4 mr-2"}),"Review"]}),(0,b.jsxs)(e.Button,{variant:"destructive",size:"sm",onClick:()=>aO(a.lead_id,a.company_name),children:[(0,b.jsx)(D.Trash2,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]})})},a.lead_id)),0===N.length&&(0,b.jsxs)("div",{className:"text-center py-12 bg-slate-50 rounded-lg",children:[(0,b.jsx)(q,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-slate-500",children:"No pending signup requests"})]})]}),(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Signup Instructions"}),(0,b.jsx)(d.CardDescription,{children:"Guide for merchants on how to sign up"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,b.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-base mb-2",children:"Step 1: Account Creation"}),(0,b.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-slate-600",children:[(0,b.jsx)("li",{children:"Go to the Flow360 portal"}),(0,b.jsx)("li",{children:'Click on "Sign Up" or "Register"'}),(0,b.jsx)("li",{children:"Fill in company details (Name, KRA PIN, Email, Phone)"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-base mb-2",children:"Step 2: Branch Setup"}),(0,b.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-slate-600",children:[(0,b.jsx)("li",{children:"Log in to the dashboard"}),(0,b.jsx)("li",{children:'Navigate to "Branches" section'}),(0,b.jsx)("li",{children:"Add each fuel station location"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-base mb-2",children:"Step 3: Operations Configuration"}),(0,b.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-slate-600",children:[(0,b.jsx)("li",{children:"Contact Operations team for Device Token, BHF ID"}),(0,b.jsx)("li",{children:"Receive Server Address and Port"}),(0,b.jsx)("li",{children:"Configuration done by Operations team"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-base mb-2",children:"Support"}),(0,b.jsxs)("ul",{className:"space-y-1 text-slate-600",children:[(0,b.jsx)("li",{children:"Email: support@flow360.co.ke"}),(0,b.jsx)("li",{children:"Phone: +254 700 000 000"})]})]})]})})})]})})]})})]}),(0,b.jsx)(j.Dialog,{open:Z,onOpenChange:$,children:(0,b.jsxs)(j.DialogContent,{children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsx)(j.DialogTitle,{children:"Assign Hardware"}),(0,b.jsxs)(j.DialogDescription,{children:["Assign ",ab?.serial_number," to a branch"]})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Merchant"}),(0,b.jsxs)(k.Select,{onValueChange:a=>aK(a),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Select merchant"})}),(0,b.jsx)(k.SelectContent,{children:P.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Branch"}),(0,b.jsxs)(k.Select,{onValueChange:aP,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Select branch"})}),(0,b.jsx)(k.SelectContent,{children:R.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:a.bhf_nm},a.id))})]})]})]})]})}),(0,b.jsx)(j.Dialog,{open:_,onOpenChange:aa,children:(0,b.jsxs)(j.DialogContent,{children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsx)(j.DialogTitle,{children:"Configure Onboarding"}),(0,b.jsxs)(j.DialogDescription,{children:["Configure device settings for ",ad?.merchant_name,ad?.branch_name&&` - ${ad.branch_name}`]})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(ad?.trading_name||ad?.kra_pin)&&(0,b.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg space-y-1",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-slate-700",children:"Business Details"}),ad?.trading_name&&(0,b.jsxs)("div",{className:"text-sm text-slate-600",children:["Trading Name: ",(0,b.jsx)("span",{className:"font-medium",children:ad.trading_name})]}),ad?.kra_pin&&(0,b.jsxs)("div",{className:"text-sm text-slate-600",children:["KRA PIN: ",(0,b.jsx)("span",{className:"font-medium",children:ad.kra_pin})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Device Token"}),(0,b.jsx)(g.Input,{value:aF.device_token,onChange:a=>aG({...aF,device_token:a.target.value}),placeholder:"Enter device token"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"BHF ID (Branch Fiscal ID)"}),(0,b.jsx)(g.Input,{value:aF.bhf_id,onChange:a=>aG({...aF,bhf_id:a.target.value}),placeholder:"e.g., 01"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Server Address"}),(0,b.jsx)(g.Input,{value:aF.server_address,onChange:a=>aG({...aF,server_address:a.target.value}),placeholder:"api.kra.go.ke"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Server Port"}),(0,b.jsx)(g.Input,{value:aF.server_port,onChange:a=>aG({...aF,server_port:a.target.value}),placeholder:"8080"})]})]}),(0,b.jsxs)("div",{className:"border-t pt-4 mt-2",children:[(0,b.jsx)(l.Label,{className:"text-base font-semibold mb-3 block",children:"Device Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Device Serial Number"}),(0,b.jsx)(g.Input,{value:aF.device_serial_number,onChange:a=>aG({...aF,device_serial_number:a.target.value}),placeholder:"Device serial number"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"SR Number"}),(0,b.jsx)(g.Input,{value:aF.sr_number,onChange:a=>aG({...aF,sr_number:a.target.value}),placeholder:"SR number"})]})]}),(0,b.jsxs)("div",{className:"space-y-2 mt-4",children:[(0,b.jsx)(l.Label,{children:"PTS ID (Controller ID)"}),(0,b.jsx)(g.Input,{value:aF.pts_id,onChange:a=>aG({...aF,pts_id:a.target.value}),placeholder:"e.g., 003A003A..."}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"The unique identifier for the pump controller. Used to match pump callbacks to this branch."})]})]}),(0,b.jsxs)("div",{className:"border-t pt-4 mt-2",children:[(0,b.jsx)(l.Label,{className:"text-base font-semibold mb-3 block",children:"Hardware Assignment"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Hardware Type"}),(0,b.jsxs)(k.Select,{value:aF.hardware_type,onValueChange:a=>aG({...aF,hardware_type:a}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Select type"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"token",children:"Hardware Token"}),(0,b.jsx)(k.SelectItem,{value:"printer",children:"Fiscal Printer"}),(0,b.jsx)(k.SelectItem,{value:"terminal",children:"POS Terminal"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Serial Number"}),(0,b.jsx)(g.Input,{value:aF.hardware_serial,onChange:a=>aG({...aF,hardware_serial:a.target.value}),placeholder:"SN-XXXX-XXXX"})]})]}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Hardware will be registered and assigned to this branch when configuration is saved."})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{variant:"outline",onClick:aT,disabled:aH,className:"gap-2",children:[aH?(0,b.jsx)(F.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(E.Zap,{className:"h-4 w-4"}),"Initialize"]}),(0,b.jsxs)(e.Button,{onClick:aS,className:"flex-1",children:[(0,b.jsx)(w.Check,{className:"h-4 w-4 mr-2"}),"Save Configuration"]})]})]})]})}),(0,b.jsx)(j.Dialog,{open:az,onOpenChange:aA,children:(0,b.jsxs)(j.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsx)(j.DialogTitle,{children:"Review Signup Request"}),(0,b.jsx)(j.DialogDescription,{children:"Review and edit details before moving to onboarding"})]}),aB&&(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Company Name *"}),(0,b.jsx)(g.Input,{value:aD.company_name,onChange:a=>aE({...aD,company_name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Trading Name"}),(0,b.jsx)(g.Input,{value:aD.trading_name,onChange:a=>aE({...aD,trading_name:a.target.value}),placeholder:"Trading/Business Name"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Contact Name *"}),(0,b.jsx)(g.Input,{value:aD.contact_name,onChange:a=>aE({...aD,contact_name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"KRA PIN"}),(0,b.jsx)(g.Input,{value:aD.kra_pin,onChange:a=>aE({...aD,kra_pin:a.target.value}),placeholder:"e.g., P051234567Z"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Email *"}),(0,b.jsx)(g.Input,{type:"email",value:aD.email,onChange:a=>aE({...aD,email:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Phone *"}),(0,b.jsx)(g.Input,{value:aD.phone,onChange:a=>aE({...aD,phone:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Location"}),(0,b.jsx)(g.Input,{value:aD.location,onChange:a=>aE({...aD,location:a.target.value}),placeholder:"Town/Area"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"County"}),(0,b.jsx)(g.Input,{value:aD.county,onChange:a=>aE({...aD,county:a.target.value}),placeholder:"County"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Address"}),(0,b.jsx)(i.Textarea,{value:aD.address,onChange:a=>aE({...aD,address:a.target.value}),placeholder:"Full address",rows:2})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>aA(!1),className:"flex-1",children:"Cancel"}),(0,b.jsxs)(e.Button,{onClick:()=>aN(aB.lead_id),className:"flex-1",children:[(0,b.jsx)(w.Check,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})}),(0,b.jsx)(j.Dialog,{open:ap,onOpenChange:aq,children:(0,b.jsxs)(j.DialogContent,{children:[(0,b.jsxs)(j.DialogHeader,{children:[(0,b.jsx)(j.DialogTitle,{children:"Edit Hardware"}),(0,b.jsx)(j.DialogDescription,{children:"Update hardware device details"})]}),ar&&(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Serial Number"}),(0,b.jsx)(g.Input,{value:ar.serial_number,onChange:a=>as({...ar,serial_number:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Device Type"}),(0,b.jsxs)(k.Select,{value:ar.device_type,onValueChange:a=>as({...ar,device_type:a}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"token",children:"Hardware Token"}),(0,b.jsx)(k.SelectItem,{value:"printer",children:"Fiscal Printer"}),(0,b.jsx)(k.SelectItem,{value:"terminal",children:"POS Terminal"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Status"}),(0,b.jsxs)(k.Select,{value:ar.status,onValueChange:a=>as({...ar,status:a}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(k.SelectItem,{value:"inactive",children:"Inactive"})]})]})]}),(0,b.jsx)(e.Button,{onClick:aM,className:"w-full",children:"Save Changes"})]})]})})]})}a.s(["default",()=>J],28893)}];

//# sourceMappingURL=app_admin_operations_page_tsx_1c6471aa._.js.map