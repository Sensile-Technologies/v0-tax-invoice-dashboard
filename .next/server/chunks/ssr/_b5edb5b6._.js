module.exports=[47349,(a,b,c)=>{"use strict";var d=a.r(72131);d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},87610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},69265,a=>{"use strict";var b=a.i(87924),c=a.i(23312),d=a.i(87532),e=a.i(67900),f=a.i(46842),g=a.i(11156),h=a.i(20005),i=a.i(70106);let j=(0,i.default)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),k=(0,i.default)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),l=(0,i.default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),m=(0,i.default)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var n=a.i(92258),o=a.i(3314),p=a.i(4720),q=a.i(72692),r=a.i(40695),s=a.i(72131),t=a.i(46872),u=a.i(72752);a.i(35112);var v=a.i(11011),w=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,c)=>{let d=(0,v.createSlot)(`Primitive.${c}`),e=s.forwardRef((a,e)=>{let{asChild:f,...g}=a;return(0,b.jsx)(f?d:c,{...g,ref:e})});return e.displayName=`Primitive.${c}`,{...a,[c]:e}},{}),x=a.i(87610);function y(){return()=>{}}var z="Avatar",[A,B]=function(a,c=[]){let d=[],e=()=>{let b=d.map(a=>s.createContext(a));return function(c){let d=c?.[a]||b;return s.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return e.scopeName=a,[function(c,e){let f=s.createContext(e);f.displayName=c+"Context";let g=d.length;d=[...d,e];let h=c=>{let{scope:d,children:e,...h}=c,i=d?.[a]?.[g]||f,j=s.useMemo(()=>h,Object.values(h));return(0,b.jsx)(i.Provider,{value:j,children:e})};return h.displayName=c+"Provider",[h,function(b,d){let h=d?.[a]?.[g]||f,i=s.useContext(h);if(i)return i;if(void 0!==e)return e;throw Error(`\`${b}\` must be used within \`${c}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return s.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(e,...c)]}(z),[C,D]=A(z),E=s.forwardRef((a,c)=>{let{__scopeAvatar:d,...e}=a,[f,g]=s.useState("idle");return(0,b.jsx)(C,{scope:d,imageLoadingStatus:f,onImageLoadingStatusChange:g,children:(0,b.jsx)(w.span,{...e,ref:c})})});E.displayName=z;var F="AvatarImage",G=s.forwardRef((a,c)=>{let{__scopeAvatar:d,src:e,onLoadingStatusChange:f=()=>{},...g}=a,h=D(F,d),i=function(a,{referrerPolicy:b,crossOrigin:c}){let d=(0,x.useSyncExternalStore)(y,()=>!0,()=>!1),e=s.useRef(null),f=d?(e.current||(e.current=new window.Image),e.current):null,[g,h]=s.useState(()=>J(f,a));return(0,u.useLayoutEffect)(()=>{h(J(f,a))},[f,a]),(0,u.useLayoutEffect)(()=>{let a=a=>()=>{h(a)};if(!f)return;let d=a("loaded"),e=a("error");return f.addEventListener("load",d),f.addEventListener("error",e),b&&(f.referrerPolicy=b),"string"==typeof c&&(f.crossOrigin=c),()=>{f.removeEventListener("load",d),f.removeEventListener("error",e)}},[f,c,b]),g}(e,g),j=(0,t.useCallbackRef)(a=>{f(a),h.onImageLoadingStatusChange(a)});return(0,u.useLayoutEffect)(()=>{"idle"!==i&&j(i)},[i,j]),"loaded"===i?(0,b.jsx)(w.img,{...g,ref:c,src:e}):null});G.displayName=F;var H="AvatarFallback",I=s.forwardRef((a,c)=>{let{__scopeAvatar:d,delayMs:e,...f}=a,g=D(H,d),[h,i]=s.useState(void 0===e);return s.useEffect(()=>{if(void 0!==e){let a=window.setTimeout(()=>i(!0),e);return()=>window.clearTimeout(a)}},[e]),h&&"loaded"!==g.imageLoadingStatus?(0,b.jsx)(w.span,{...f,ref:c}):null});function J(a,b){return a?b?(a.src!==b&&(a.src=b),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}I.displayName=H;var K=a.i(97895);function L({className:a,...c}){return(0,b.jsx)(E,{"data-slot":"avatar",className:(0,K.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...c})}function M({className:a,...c}){return(0,b.jsx)(G,{"data-slot":"avatar-image",className:(0,K.cn)("aspect-square size-full",a),...c})}function N({className:a,...c}){return(0,b.jsx)(I,{"data-slot":"avatar-fallback",className:(0,K.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...c})}var O=a.i(76504),P=a.i(54161),Q=a.i(46470),R=a.i(71987),S=a.i(90023),T=a.i(50944);function U({currentBranch:a="nairobi",onBranchChange:i,showSearch:t=!1,onMobileMenuToggle:u}){let[v,w]=(0,s.useState)(a),[x,y]=(0,s.useState)([{id:"hq",name:"Headquarters",type:"headquarters"}]),[z,A]=(0,s.useState)([{id:1,title:"Notification 1",message:"This is the first notification",time:"10:00 AM",unread:!0},{id:2,title:"Notification 2",message:"This is the second notification",time:"11:00 AM",unread:!1}]),[B,C]=(0,s.useState)("Headquarters"),[D,E]=(0,s.useState)(""),F=(0,T.useRouter)();(0,s.useEffect)(()=>{let a=(0,S.getCurrentUser)();a&&E(a.username||a.full_name||a.email?.split("@")[0]||"User");let b=localStorage.getItem("selectedBranch");if(b)try{let a=JSON.parse(b);a?.name&&C(a.name)}catch(a){console.error("Error parsing stored branch:",a)}else a?.branch_name&&C(a.branch_name)},[]),(0,s.useEffect)(()=>{G()},[]);let G=async()=>{try{let a=(0,S.getCurrentUser)(),b=a?.id,c=b?`/api/branches/list?user_id=${b}`:"/api/branches/list",d=await fetch(c);if(d.ok){let a=await d.json(),b=[{id:"hq",name:"Headquarters",type:"headquarters"},...a.map(a=>({id:a.id,name:a.name,type:"branch"}))];y(b)}}catch(a){console.error("Error fetching branches:",a)}},H=async()=>{await (0,S.signOut)(),F.push("/auth/login")};return(0,b.jsxs)("header",{className:"flex h-16 items-center justify-between border-b bg-card px-3 md:px-6",children:[(0,b.jsxs)("div",{className:"flex flex-1 items-center gap-2 md:gap-4",children:[u&&(0,b.jsx)(r.Button,{variant:"outline",size:"icon",onClick:u,className:"lg:hidden h-10 w-10 flex-shrink-0 border-slate-300 bg-slate-100 hover:bg-slate-200",children:(0,b.jsx)(q.Menu,{className:"h-6 w-6 text-slate-700"})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(R.default,{src:"/flow360-logo.png",alt:"Flow360 Logo",width:28,height:28,className:"rounded-lg hidden sm:block"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("span",{className:"text-xs md:text-sm text-muted-foreground hidden sm:block",children:["Welcome back, ",D]}),(0,b.jsx)("span",{className:"text-sm md:text-lg font-bold truncate max-w-[120px] sm:max-w-none",children:B})]})]}),t&&(0,b.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)("input",{type:"search",placeholder:"Search...",className:"pl-9 h-10 w-full rounded-xl border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(O.DropdownMenu,{children:[(0,b.jsx)(O.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(r.Button,{variant:"outline",className:"gap-2 rounded-xl bg-transparent",children:[(0,b.jsx)(e.Building2,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:B})]})}),(0,b.jsxs)(O.DropdownMenuContent,{align:"end",className:"w-56 rounded-xl",children:[(0,b.jsx)(O.DropdownMenuLabel,{children:"Switch Branch"}),(0,b.jsx)(O.DropdownMenuSeparator,{}),x.map(a=>(0,b.jsxs)(O.DropdownMenuItem,{onClick:()=>(a=>{if(w(a),"hq"===a)localStorage.removeItem("selectedBranch"),C("Headquarters"),F.push("/headquarters");else{let b=x.find(b=>b.id===a);b&&(localStorage.setItem("selectedBranch",JSON.stringify(b)),C(b.name),F.push(`/sales/summary?branch=${a}`)),i&&i(a)}})(a.id),className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(e.Building2,{className:"mr-2 h-4 w-4"}),(0,b.jsx)("span",{children:a.name}),a.id===v&&(0,b.jsx)(P.Badge,{className:"ml-auto rounded-full",children:"Active"})]},a.id))]})]}),(0,b.jsxs)(O.DropdownMenu,{children:[(0,b.jsx)(O.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(r.Button,{variant:"ghost",size:"icon",className:"rounded-xl",children:(0,b.jsx)(j,{className:"h-5 w-5"})})}),(0,b.jsxs)(O.DropdownMenuContent,{align:"end",className:"w-56 rounded-xl",children:[(0,b.jsx)(O.DropdownMenuLabel,{children:"Help & Support"}),(0,b.jsx)(O.DropdownMenuSeparator,{}),(0,b.jsxs)(O.DropdownMenuItem,{className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(k,{className:"mr-2 h-4 w-4"}),"User Manuals"]}),(0,b.jsxs)(O.DropdownMenuItem,{className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(l,{className:"mr-2 h-4 w-4"}),"Helpful Links"]}),(0,b.jsx)(O.DropdownMenuSeparator,{}),(0,b.jsxs)(O.DropdownMenuItem,{className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(n.Mail,{className:"mr-2 h-4 w-4"}),"Contact Support"]}),(0,b.jsxs)(O.DropdownMenuItem,{className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(m,{className:"mr-2 h-4 w-4"}),"In-App Chat"]})]})]}),(0,b.jsxs)(O.DropdownMenu,{children:[(0,b.jsx)(O.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(r.Button,{variant:"ghost",size:"icon",className:"relative rounded-xl",children:[(0,b.jsx)(c.Bell,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs text-white",children:"2"})]})}),(0,b.jsxs)(O.DropdownMenuContent,{align:"end",className:"w-80 rounded-xl",children:[(0,b.jsx)(O.DropdownMenuLabel,{children:"Notifications"}),(0,b.jsx)(O.DropdownMenuSeparator,{}),(0,b.jsx)(Q.ScrollArea,{className:"h-72",children:z.map(a=>(0,b.jsx)("div",{className:`px-4 py-3 hover:bg-accent rounded-lg cursor-pointer ${a.unread?"bg-blue-50":""}`,children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.message}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:a.time})]}),a.unread&&(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-500 mt-1"})]})},a.id))}),(0,b.jsx)(O.DropdownMenuSeparator,{}),(0,b.jsx)(O.DropdownMenuItem,{className:"cursor-pointer justify-center rounded-lg",children:"Mark all as read"})]})]}),(0,b.jsxs)(O.DropdownMenu,{children:[(0,b.jsx)(O.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(r.Button,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,b.jsxs)(L,{children:[(0,b.jsx)(M,{src:"/professional-avatar.png",alt:"User"}),(0,b.jsx)(N,{children:"JD"})]})})}),(0,b.jsxs)(O.DropdownMenuContent,{className:"w-56 rounded-xl",align:"end",forceMount:!0,children:[(0,b.jsx)(O.DropdownMenuLabel,{children:"My Account"}),(0,b.jsx)(O.DropdownMenuSeparator,{}),(0,b.jsxs)(O.DropdownMenuItem,{className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(f.User,{className:"mr-2 h-4 w-4"}),"Profile Settings"]}),(0,b.jsxs)(O.DropdownMenuItem,{className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(g.CreditCard,{className:"mr-2 h-4 w-4"}),"Manage Subscription"]}),(0,b.jsx)(O.DropdownMenuSeparator,{}),(0,b.jsx)(O.DropdownMenuItem,{className:"cursor-pointer rounded-lg",children:"Account Preferences"}),(0,b.jsxs)(O.DropdownMenuItem,{onClick:()=>F.push("/security-settings"),className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(o.Shield,{className:"mr-2 h-4 w-4"}),"Security Settings"]}),(0,b.jsxs)(O.DropdownMenuItem,{onClick:()=>F.push("/logs"),className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(p.FileText,{className:"mr-2 h-4 w-4"}),"Logs"]}),(0,b.jsx)(O.DropdownMenuSeparator,{}),(0,b.jsxs)(O.DropdownMenuItem,{onClick:H,className:"cursor-pointer text-red-600 rounded-lg",children:[(0,b.jsx)(h.LogOut,{className:"mr-2 h-4 w-4"}),"Log out"]})]})]})]})]})}a.s(["DashboardHeader",()=>U,"default",0,U],69265)}];

//# sourceMappingURL=_b5edb5b6._.js.map