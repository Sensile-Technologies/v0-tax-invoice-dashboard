module.exports=[47349,(a,b,c)=>{"use strict";var d=a.r(72131);d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},87610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},69265,a=>{"use strict";var b=a.i(87924),c=a.i(23312),d=a.i(87532),e=a.i(67900),f=a.i(46842),g=a.i(11156),h=a.i(20005),i=a.i(70106);let j=(0,i.default)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),k=(0,i.default)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),l=(0,i.default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),m=(0,i.default)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var n=a.i(92258),o=a.i(3314),p=a.i(4720),q=a.i(40695),r=a.i(72131),s=a.i(46872),t=a.i(72752);a.i(35112);var u=a.i(11011),v=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,c)=>{let d=(0,u.createSlot)(`Primitive.${c}`),e=r.forwardRef((a,e)=>{let{asChild:f,...g}=a;return(0,b.jsx)(f?d:c,{...g,ref:e})});return e.displayName=`Primitive.${c}`,{...a,[c]:e}},{}),w=a.i(87610);function x(){return()=>{}}var y="Avatar",[z,A]=function(a,c=[]){let d=[],e=()=>{let b=d.map(a=>r.createContext(a));return function(c){let d=c?.[a]||b;return r.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return e.scopeName=a,[function(c,e){let f=r.createContext(e);f.displayName=c+"Context";let g=d.length;d=[...d,e];let h=c=>{let{scope:d,children:e,...h}=c,i=d?.[a]?.[g]||f,j=r.useMemo(()=>h,Object.values(h));return(0,b.jsx)(i.Provider,{value:j,children:e})};return h.displayName=c+"Provider",[h,function(b,d){let h=d?.[a]?.[g]||f,i=r.useContext(h);if(i)return i;if(void 0!==e)return e;throw Error(`\`${b}\` must be used within \`${c}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return r.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(e,...c)]}(y),[B,C]=z(y),D=r.forwardRef((a,c)=>{let{__scopeAvatar:d,...e}=a,[f,g]=r.useState("idle");return(0,b.jsx)(B,{scope:d,imageLoadingStatus:f,onImageLoadingStatusChange:g,children:(0,b.jsx)(v.span,{...e,ref:c})})});D.displayName=y;var E="AvatarImage",F=r.forwardRef((a,c)=>{let{__scopeAvatar:d,src:e,onLoadingStatusChange:f=()=>{},...g}=a,h=C(E,d),i=function(a,{referrerPolicy:b,crossOrigin:c}){let d=(0,w.useSyncExternalStore)(x,()=>!0,()=>!1),e=r.useRef(null),f=d?(e.current||(e.current=new window.Image),e.current):null,[g,h]=r.useState(()=>I(f,a));return(0,t.useLayoutEffect)(()=>{h(I(f,a))},[f,a]),(0,t.useLayoutEffect)(()=>{let a=a=>()=>{h(a)};if(!f)return;let d=a("loaded"),e=a("error");return f.addEventListener("load",d),f.addEventListener("error",e),b&&(f.referrerPolicy=b),"string"==typeof c&&(f.crossOrigin=c),()=>{f.removeEventListener("load",d),f.removeEventListener("error",e)}},[f,c,b]),g}(e,g),j=(0,s.useCallbackRef)(a=>{f(a),h.onImageLoadingStatusChange(a)});return(0,t.useLayoutEffect)(()=>{"idle"!==i&&j(i)},[i,j]),"loaded"===i?(0,b.jsx)(v.img,{...g,ref:c,src:e}):null});F.displayName=E;var G="AvatarFallback",H=r.forwardRef((a,c)=>{let{__scopeAvatar:d,delayMs:e,...f}=a,g=C(G,d),[h,i]=r.useState(void 0===e);return r.useEffect(()=>{if(void 0!==e){let a=window.setTimeout(()=>i(!0),e);return()=>window.clearTimeout(a)}},[e]),h&&"loaded"!==g.imageLoadingStatus?(0,b.jsx)(v.span,{...f,ref:c}):null});function I(a,b){return a?b?(a.src!==b&&(a.src=b),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}H.displayName=G;var J=a.i(97895);function K({className:a,...c}){return(0,b.jsx)(D,{"data-slot":"avatar",className:(0,J.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...c})}function L({className:a,...c}){return(0,b.jsx)(F,{"data-slot":"avatar-image",className:(0,J.cn)("aspect-square size-full",a),...c})}function M({className:a,...c}){return(0,b.jsx)(H,{"data-slot":"avatar-fallback",className:(0,J.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...c})}var N=a.i(76504),O=a.i(54161),P=a.i(46470),Q=a.i(71987),R=a.i(90023),S=a.i(50944);function T({currentBranch:a="nairobi",onBranchChange:i,showSearch:s=!1}){let[t,u]=(0,r.useState)(a),[v,w]=(0,r.useState)([{id:"hq",name:"Headquarters",type:"headquarters"}]),[x,y]=(0,r.useState)([{id:1,title:"Notification 1",message:"This is the first notification",time:"10:00 AM",unread:!0},{id:2,title:"Notification 2",message:"This is the second notification",time:"11:00 AM",unread:!1}]),[z,A]=(0,r.useState)("Headquarters"),[B,C]=(0,r.useState)(""),D=(0,S.useRouter)();(0,r.useEffect)(()=>{let a=(0,R.getCurrentUser)();a&&C(a.username||a.full_name||a.email?.split("@")[0]||"User");let b=localStorage.getItem("selectedBranch");if(b)try{let a=JSON.parse(b);a?.name&&A(a.name)}catch(a){console.error("Error parsing stored branch:",a)}else a?.branch_name&&A(a.branch_name)},[]),(0,r.useEffect)(()=>{E()},[]);let E=async()=>{try{let a=(0,R.getCurrentUser)(),b=a?.id,c=b?`/api/branches/list?user_id=${b}`:"/api/branches/list",d=await fetch(c);if(d.ok){let a=await d.json(),b=[{id:"hq",name:"Headquarters",type:"headquarters"},...a.map(a=>({id:a.id,name:a.name,type:"branch"}))];w(b)}}catch(a){console.error("Error fetching branches:",a)}},F=async()=>{await (0,R.signOut)(),D.push("/auth/login")};return(0,b.jsxs)("header",{className:"flex h-16 items-center justify-between border-b bg-card px-6",children:[(0,b.jsxs)("div",{className:"flex flex-1 items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(Q.default,{src:"/flow360-logo.png",alt:"Flow360 Logo",width:28,height:28,className:"rounded-lg"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Welcome back, ",B]}),(0,b.jsx)("span",{className:"text-lg font-bold",children:z})]})]}),s&&(0,b.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)("input",{type:"search",placeholder:"Search...",className:"pl-9 h-10 w-full rounded-xl border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(N.DropdownMenu,{children:[(0,b.jsx)(N.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(q.Button,{variant:"outline",className:"gap-2 rounded-xl bg-transparent",children:[(0,b.jsx)(e.Building2,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:z})]})}),(0,b.jsxs)(N.DropdownMenuContent,{align:"end",className:"w-56 rounded-xl",children:[(0,b.jsx)(N.DropdownMenuLabel,{children:"Switch Branch"}),(0,b.jsx)(N.DropdownMenuSeparator,{}),v.map(a=>(0,b.jsxs)(N.DropdownMenuItem,{onClick:()=>(a=>{if(u(a),"hq"===a)localStorage.removeItem("selectedBranch"),A("Headquarters"),D.push("/headquarters");else{let b=v.find(b=>b.id===a);b&&(localStorage.setItem("selectedBranch",JSON.stringify(b)),A(b.name),D.push(`/sales/summary?branch=${a}`)),i&&i(a)}})(a.id),className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(e.Building2,{className:"mr-2 h-4 w-4"}),(0,b.jsx)("span",{children:a.name}),a.id===t&&(0,b.jsx)(O.Badge,{className:"ml-auto rounded-full",children:"Active"})]},a.id))]})]}),(0,b.jsxs)(N.DropdownMenu,{children:[(0,b.jsx)(N.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(q.Button,{variant:"ghost",size:"icon",className:"rounded-xl",children:(0,b.jsx)(j,{className:"h-5 w-5"})})}),(0,b.jsxs)(N.DropdownMenuContent,{align:"end",className:"w-56 rounded-xl",children:[(0,b.jsx)(N.DropdownMenuLabel,{children:"Help & Support"}),(0,b.jsx)(N.DropdownMenuSeparator,{}),(0,b.jsxs)(N.DropdownMenuItem,{className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(k,{className:"mr-2 h-4 w-4"}),"User Manuals"]}),(0,b.jsxs)(N.DropdownMenuItem,{className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(l,{className:"mr-2 h-4 w-4"}),"Helpful Links"]}),(0,b.jsx)(N.DropdownMenuSeparator,{}),(0,b.jsxs)(N.DropdownMenuItem,{className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(n.Mail,{className:"mr-2 h-4 w-4"}),"Contact Support"]}),(0,b.jsxs)(N.DropdownMenuItem,{className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(m,{className:"mr-2 h-4 w-4"}),"In-App Chat"]})]})]}),(0,b.jsxs)(N.DropdownMenu,{children:[(0,b.jsx)(N.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(q.Button,{variant:"ghost",size:"icon",className:"relative rounded-xl",children:[(0,b.jsx)(c.Bell,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs text-white",children:"2"})]})}),(0,b.jsxs)(N.DropdownMenuContent,{align:"end",className:"w-80 rounded-xl",children:[(0,b.jsx)(N.DropdownMenuLabel,{children:"Notifications"}),(0,b.jsx)(N.DropdownMenuSeparator,{}),(0,b.jsx)(P.ScrollArea,{className:"h-72",children:x.map(a=>(0,b.jsx)("div",{className:`px-4 py-3 hover:bg-accent rounded-lg cursor-pointer ${a.unread?"bg-blue-50":""}`,children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.message}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:a.time})]}),a.unread&&(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-500 mt-1"})]})},a.id))}),(0,b.jsx)(N.DropdownMenuSeparator,{}),(0,b.jsx)(N.DropdownMenuItem,{className:"cursor-pointer justify-center rounded-lg",children:"Mark all as read"})]})]}),(0,b.jsxs)(N.DropdownMenu,{children:[(0,b.jsx)(N.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(q.Button,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,b.jsxs)(K,{children:[(0,b.jsx)(L,{src:"/professional-avatar.png",alt:"User"}),(0,b.jsx)(M,{children:"JD"})]})})}),(0,b.jsxs)(N.DropdownMenuContent,{className:"w-56 rounded-xl",align:"end",forceMount:!0,children:[(0,b.jsx)(N.DropdownMenuLabel,{children:"My Account"}),(0,b.jsx)(N.DropdownMenuSeparator,{}),(0,b.jsxs)(N.DropdownMenuItem,{className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(f.User,{className:"mr-2 h-4 w-4"}),"Profile Settings"]}),(0,b.jsxs)(N.DropdownMenuItem,{className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(g.CreditCard,{className:"mr-2 h-4 w-4"}),"Manage Subscription"]}),(0,b.jsx)(N.DropdownMenuSeparator,{}),(0,b.jsx)(N.DropdownMenuItem,{className:"cursor-pointer rounded-lg",children:"Account Preferences"}),(0,b.jsxs)(N.DropdownMenuItem,{onClick:()=>D.push("/security-settings"),className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(o.Shield,{className:"mr-2 h-4 w-4"}),"Security Settings"]}),(0,b.jsxs)(N.DropdownMenuItem,{onClick:()=>D.push("/logs"),className:"cursor-pointer rounded-lg",children:[(0,b.jsx)(p.FileText,{className:"mr-2 h-4 w-4"}),"Logs"]}),(0,b.jsx)(N.DropdownMenuSeparator,{}),(0,b.jsxs)(N.DropdownMenuItem,{onClick:F,className:"cursor-pointer text-red-600 rounded-lg",children:[(0,b.jsx)(h.LogOut,{className:"mr-2 h-4 w-4"}),"Log out"]})]})]})]})]})}a.s(["DashboardHeader",()=>T,"default",0,T],69265)}];

//# sourceMappingURL=_b5edb5b6._.js.map