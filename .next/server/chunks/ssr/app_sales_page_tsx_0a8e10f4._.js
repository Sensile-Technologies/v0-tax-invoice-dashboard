module.exports=[78871,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(344),e=a.i(69265),f=a.i(65733),g=a.i(3130),h=a.i(40695),i=a.i(5522),j=a.i(17171),k=a.i(87682),l=a.i(76504),m=a.i(23292),n=a.i(92e3),o=a.i(5784),p=a.i(15618),q=a.i(79360),r=a.i(4720),s=a.i(11156),t=a.i(33441),u=a.i(65602),v=a.i(74575),w=a.i(88237),x=a.i(54161),y=a.i(46893),z=a.i(32221),A=a.i(29154),B=a.i(30342),C=a.i(37539),D=a.i(97895),E=a.i(64321),F=a.i(27165),G=a.i(67149),H=a.i(18155),I=a.i(23665),J=a.i(58042),K=a.i(94222),L=a.i(54419),M=a.i(59854),N=a.i(48662),O=a.i(54031),P=a.i(77924);function Q(){let a,d,e,Q,R,{formatCurrency:S}=(0,v.useCurrency)(),[T,U]=(0,c.useState)([]),[V,W]=(0,c.useState)([]),[X,Y]=(0,c.useState)([]),[Z,$]=(0,c.useState)([]),[_,aa]=(0,c.useState)(null),[ab,ac]=(0,c.useState)(!1),[ad,ae]=(0,c.useState)(!1),[af,ag]=(0,c.useState)(!1),[ah,ai]=(0,c.useState)(!1),[aj,ak]=(0,c.useState)(null),[al,am]=(0,c.useState)(!1),[an,ao]=(0,c.useState)(null),[ap,aq]=(0,c.useState)(!1),[ar,as]=(0,c.useState)(null),[at,au]=(0,c.useState)([]),[av,aw]=(0,c.useState)(!1),[ax,ay]=(0,c.useState)({date:"",invoiceNumber:"",fuelType:"",nozzle:"",loyalty:"all"}),[az,aA]=(0,c.useState)({nozzle_id:"",fuel_type:"",amount:"",payment_method:"cash",customer_name:"",vehicle_number:"",customer_pin:"",meter_reading_after:"",is_loyalty_sale:!1,loyalty_customer_name:"",loyalty_customer_pin:"",discount_type:"fixed",discount_value:""}),[aB,aC]=(0,c.useState)({reason:"",return_quantity:"",refund_amount:"",approved_by:"",customer_signature:"",notes:""}),[aD,aE]=(0,c.useState)({date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().slice(0,5),closing_cash:"",notes:""});async function aF(){try{ac(!0);let a=localStorage.getItem("selectedBranch");if(!a){m.toast.error("No branch selected"),ac(!1);return}let b=JSON.parse(a).id,[c,d,e,f]=await Promise.all([fetch(`/api/nozzles?branch_id=${b}&status=active`),fetch(`/api/dispensers?branch_id=${b}`),fetch(`/api/fuel-prices?branch_id=${b}`),fetch(`/api/shifts?branch_id=${b}&status=active`)]),[g,h,i,j]=await Promise.all([c.json(),d.json(),e.json(),f.json()]);g.success&&W(g.data||[]),h.success&&Y(h.data||[]),i.success&&$(i.data||[]),j.success&&j.data?aa(j.data):aa(null),await aG()}catch(a){console.error("Error fetching data:",a),m.toast.error("Failed to load sales data")}finally{ac(!1)}}async function aG(){try{let a=localStorage.getItem("selectedBranch");if(!a)return;let b=JSON.parse(a).id,c=await fetch(`/api/sales?branch_id=${b}&limit=50`),d=await c.json();if(d.success){let a=(d.data||[]).map(a=>({...a,quantity:Number(a.quantity)||0,unit_price:Number(a.unit_price)||0,total_amount:Number(a.total_amount)||0,meter_reading_after:Number(a.meter_reading_after)||0,loyalty_points_earned:Number(a.loyalty_points_earned)||0}));U(a)}}catch(a){console.error("Error fetching sales:",a)}}(0,c.useEffect)(()=>{let a=localStorage.getItem("selectedBranch");a&&as(JSON.parse(a)),aF()},[]),(0,c.useEffect)(()=>{async function a(){try{let a=await fetch(`/api/customers?branch_id=${ar?.id}`),b=await a.json();b.success&&au((b.data||[]).map(a=>({id:a.id,name:a.cust_nm||"",pin:a.cust_tin||""})))}catch(a){console.error("Error fetching loyalty customers:",a)}}ar?.id&&a()},[ar?.id]);let aH=T.filter(a=>{if(ax.date&&new Date(a.sale_date).toISOString().split("T")[0]!==ax.date||ax.invoiceNumber&&!(a.invoice_number||a.receipt_number||"").toLowerCase().includes(ax.invoiceNumber.toLowerCase())||ax.fuelType&&"all"!==ax.fuelType&&a.fuel_type!==ax.fuelType||ax.nozzle&&"all"!==ax.nozzle&&a.nozzle_id!==ax.nozzle)return!1;if("loyalty"===ax.loyalty){if(!a.is_loyalty_sale)return!1}else if("non-loyalty"===ax.loyalty&&a.is_loyalty_sale)return!1;return!0}),aI=Array.from(new Set(T.map(a=>a.fuel_type))),aJ=Array.from(new Set(T.map(a=>a.nozzle_id)));async function aK(){if(!az.nozzle_id||!az.fuel_type||!az.amount)return void m.toast.error("Please fill in all required fields");if(!_)return void m.toast.error("Please start a shift before recording sales");ac(!0);try{let a=localStorage.getItem("selectedBranch");if(!a)return void m.toast.error("No branch selected");let b=JSON.parse(a).id,c=Z.find(a=>a.fuel_type===az.fuel_type);if(!c)return void m.toast.error(`No price configured for ${az.fuel_type}`);let d=V.find(a=>a.id===az.nozzle_id),e=await fetch(`/api/sales?nozzle_id=${az.nozzle_id}`),f=await e.json(),g=f.success?f.data:[],h=Number(d?.initial_meter_reading)||0;if(g&&g.length>0){let a=g.reduce((a,b)=>a+Number(b.quantity),0);h+=a}let i=Number.parseFloat(az.amount),j=Number.parseFloat(c.price),k=0;if(az.discount_value&&Number.parseFloat(az.discount_value)>0)if("percentage"===az.discount_type){let a=Math.min(Number.parseFloat(az.discount_value),100);k=i*a/100}else k=Math.min(Number.parseFloat(az.discount_value),i);let l=Math.max(i-k,0),n=l/j;h+=n;let o=`INV-${Date.now()}`,p=`RCP-${Date.now()}`,q=await fetch("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch_id:b,shift_id:_.id,nozzle_id:az.nozzle_id,fuel_type:az.fuel_type,quantity:n,unit_price:j,total_amount:l,payment_method:az.payment_method,customer_name:az.customer_name||null,vehicle_number:az.vehicle_number||null,customer_pin:az.customer_pin||null,invoice_number:o,meter_reading_after:h,transmission_status:"pending",receipt_number:p,is_loyalty_sale:az.is_loyalty_sale,loyalty_customer_name:az.is_loyalty_sale?az.loyalty_customer_name:null,loyalty_customer_pin:az.is_loyalty_sale?az.loyalty_customer_pin:null})}),r=await q.json();if(q.ok&&r.success){let a=r.data;console.log("[Web Sale] Sale created successfully, calling KRA endpoint...");try{let c=await fetch("/api/kra/test-sale",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch_id:b,invoice_number:a.invoice_number,receipt_number:a.receipt_number,fuel_type:az.fuel_type,quantity:n,unit_price:j,total_amount:l,payment_method:az.payment_method,customer_name:az.customer_name||"Walk-in Customer",customer_pin:az.customer_pin||""})}),d=await c.json();console.log("[Web Sale] KRA API Response:",JSON.stringify(d,null,2)),d.kra_response&&(console.log("[Web Sale] KRA Result Code:",d.kra_response.resultCd),console.log("[Web Sale] KRA Result Message:",d.kra_response.resultMsg))}catch(a){console.error("[Web Sale] Error calling KRA endpoint:",a)}m.toast.success("Sale recorded successfully!"),aA({nozzle_id:"",fuel_type:"",amount:"",payment_method:"cash",customer_name:"",vehicle_number:"",customer_pin:"",meter_reading_after:"",is_loyalty_sale:!1,loyalty_customer_name:"",loyalty_customer_pin:"",discount_type:"fixed",discount_value:""}),ag(!1),await aG()}else console.error("[v0] Sale creation error:",r.error),m.toast.error(`Error recording sale: ${r.error||"Unknown error"}`)}catch(a){console.error("[v0] Sale creation error:",a),m.toast.error("Failed to record sale")}finally{ac(!1)}}async function aL(){if(!an||!aB.reason||!aB.refund_amount)return void m.toast.error("Please fill in all required fields");ac(!0);try{let a=localStorage.getItem("selectedBranch");if(!a)return void m.toast.error("No branch selected");let b=JSON.parse(a).id,c=await fetch("/api/credit-notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sale_id:an.id,branch_id:b,credit_note_number:`CN-${Date.now()}`,reason:aB.reason,return_quantity:aB.return_quantity?Number.parseFloat(aB.return_quantity):null,refund_amount:Number.parseFloat(aB.refund_amount),approved_by:aB.approved_by||null,customer_signature:aB.customer_signature||null,notes:aB.notes||null,approval_status:"pending"})}),d=await c.json();c.ok&&d.success?(m.toast.success("Credit note created successfully"),aC({reason:"",return_quantity:"",refund_amount:"",approved_by:"",customer_signature:"",notes:""}),am(!1),ao(null),await aG()):(console.error("Error creating credit note:",d.error),m.toast.error("Failed to create credit note"))}catch(a){console.error("Error creating credit note:",a),m.toast.error("Failed to create credit note")}finally{ac(!1)}}async function aM(){if(!aD.date||!aD.time)return void m.toast.error("Please select date and time");ae(!0);try{let a=localStorage.getItem("selectedBranch");if(!a){m.toast.error("No branch selected. Please select a branch from the header."),ae(!1);return}let b=JSON.parse(a).id,c=new Date(`${aD.date}T${aD.time}`),d={branch_id:b,start_time:c.toISOString(),status:"active",opening_cash:0,notes:aD.notes||null},e=await fetch("/api/shifts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),f=await e.json();e.ok&&f.success?(m.toast.success("Shift started successfully"),aa(f.data),ai(!1),aE({date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().slice(0,5),closing_cash:"",notes:""})):(console.error("Error starting shift:",f.error),m.toast.error(`Failed to start shift: ${f.error||"Unknown error"}`))}catch(a){console.error("Error starting shift:",a),m.toast.error(`Failed to start shift: ${a instanceof Error?a.message:"Unknown error"}`)}finally{ae(!1)}}async function aN(){if(!_)return void m.toast.error("No active shift to end");ae(!0);try{let a=await fetch("/api/shifts",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:_.id,end_time:new Date().toISOString(),status:"completed",closing_cash:aD.closing_cash?Number.parseFloat(aD.closing_cash):0,notes:aD.notes||null})}),b=await a.json();a.ok&&b.success?(m.toast.success("Shift ended successfully"),aa(null),ai(!1),aE({date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().slice(0,5),closing_cash:"",notes:""})):(console.error("Error ending shift:",b.error),m.toast.error("Failed to end shift"))}catch(a){console.error("Error ending shift:",a),m.toast.error("Failed to end shift")}finally{ae(!1)}}let aO=_?new Date(_.start_time).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown";return(0,b.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-slate-900",children:"Sales"}),(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Record fuel sales and manage transactions"})]}),(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)(l.DropdownMenu,{children:[(0,b.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(h.Button,{variant:"outline",size:"sm",className:"text-xs sm:text-sm",children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:"Shift Management"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Shifts"}),(0,b.jsx)(o.ChevronDown,{className:"ml-1 sm:ml-2 h-4 w-4"})]})}),(0,b.jsxs)(l.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(l.DropdownMenuItem,{onClick:()=>{ak("start"),ai(!0)},disabled:!!_,children:"Start Shift"}),(0,b.jsx)(l.DropdownMenuItem,{onClick:()=>aq(!0),disabled:!_,children:"End Shift (Excel Upload)"}),(0,b.jsx)(l.DropdownMenuItem,{children:"Configure Automatic Shifts"})]})]}),(0,b.jsxs)(h.Button,{onClick:()=>ag(!0),disabled:!_,size:"sm",className:"text-xs sm:text-sm",children:[(0,b.jsx)(p.Plus,{className:"h-4 w-4 mr-1 sm:mr-2"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Record Sale"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Sale"})]})]})]}),_?(0,b.jsx)(u.Alert,{className:"bg-green-50 border-green-200",children:(0,b.jsxs)(u.AlertDescription,{className:"text-green-800",children:["Current ongoing shift started at ",aO]})}):(0,b.jsxs)(u.Alert,{className:"bg-amber-50 border-amber-200",children:[(0,b.jsx)(n.AlertCircle,{className:"h-4 w-4 text-amber-600"}),(0,b.jsx)(u.AlertDescription,{className:"text-amber-800",children:"No active shift. Please start a shift before recording sales."})]}),T.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-4 mb-4",children:[(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-base text-black",children:"Sales by Fuel Type"}),(0,b.jsx)(g.CardDescription,{className:"text-xs text-black/70",children:"Revenue by fuel type"})]}),(0,b.jsx)(g.CardContent,{className:"pt-2",children:(0,b.jsx)(N.ResponsiveContainer,{width:"100%",height:220,children:(0,b.jsxs)(E.PieChart,{children:[(0,b.jsx)(F.Pie,{data:Object.entries(T.reduce((a,b)=>(a[b.fuel_type]=(a[b.fuel_type]||0)+b.total_amount,a),{})).map(([a,b])=>({name:a,value:b})),cx:"50%",cy:"50%",labelLine:!1,label:a=>{let{cx:c,cy:d,midAngle:e,innerRadius:f,outerRadius:g,percent:h,name:i}=a,j=f+(g-f)*.5,k=c+j*Math.cos(-(Math.PI/180*e)),l=d+j*Math.sin(-(Math.PI/180*e));return(0,b.jsx)("text",{x:k,y:l,fill:"#000000",textAnchor:k>c?"start":"end",dominantBaseline:"central",fontSize:"11",fontWeight:"500",children:`${i} ${(100*h).toFixed(0)}%`})},outerRadius:70,fill:"#8884d8",dataKey:"value",children:(a={Diesel:"#FFFF00",Petrol:"#FF0000",Unleaded:"#FF0000",Super:"#10B981"},Object.keys(T.reduce((a,b)=>(a[b.fuel_type]=(a[b.fuel_type]||0)+b.total_amount,a),{})).map((c,d)=>(0,b.jsx)(G.Cell,{fill:a[c]||"#6B7280"},`cell-${d}`)))}),(0,b.jsx)(M.Tooltip,{formatter:a=>S(a),contentStyle:{color:"#000"}})]})})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-base text-black",children:"Payment Methods"}),(0,b.jsx)(g.CardDescription,{className:"text-xs text-black/70",children:"Payment breakdown"})]}),(0,b.jsx)(g.CardContent,{className:"pt-2",children:(0,b.jsx)(N.ResponsiveContainer,{width:"100%",height:220,children:(0,b.jsxs)(E.PieChart,{children:[(0,b.jsx)(F.Pie,{data:Object.entries(T.reduce((a,b)=>{let c,d="mpesa"===(c=(b.payment_method||"cash").toLowerCase())||"m-pesa"===c||"mobile_money"===c?"Mobile Money":"card"===c?"Card":"credit"===c?"Credit":"Cash";return a[d]=(a[d]||0)+b.total_amount,a},{})).map(([a,b])=>({name:a,value:b})),cx:"50%",cy:"50%",labelLine:!1,label:a=>{let{cx:c,cy:d,midAngle:e,innerRadius:f,outerRadius:g,percent:h,name:i}=a,j=f+(g-f)*.5,k=c+j*Math.cos(-(Math.PI/180*e)),l=d+j*Math.sin(-(Math.PI/180*e));return(0,b.jsx)("text",{x:k,y:l,fill:"#000000",textAnchor:k>c?"start":"end",dominantBaseline:"central",fontSize:"11",fontWeight:"500",children:`${"Mobile Money"===i?"M.Money":i} ${(100*h).toFixed(0)}%`})},outerRadius:70,fill:"#8884d8",dataKey:"value",children:(d={Cash:"#3A7085","Mobile Money":"#008C51",Card:"#F59E0B",Credit:"#EF4444"},Object.keys(T.reduce((a,b)=>{let c,d="mpesa"===(c=(b.payment_method||"cash").toLowerCase())||"m-pesa"===c||"mobile_money"===c?"Mobile Money":"card"===c?"Card":"credit"===c?"Credit":"Cash";return a[d]=(a[d]||0)+b.total_amount,a},{})).map((a,c)=>(0,b.jsx)(G.Cell,{fill:d[a]||"#6B7280"},`cell-${c}`)))}),(0,b.jsx)(M.Tooltip,{formatter:a=>S(a),contentStyle:{color:"#000"}})]})})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-base text-black",children:"Loyalty Program"}),(0,b.jsx)(g.CardDescription,{className:"text-xs text-black/70",children:"Loyalty vs Walk-in sales"})]}),(0,b.jsx)(g.CardContent,{className:"pt-2",children:(0,b.jsx)(N.ResponsiveContainer,{width:"100%",height:220,children:(0,b.jsxs)(E.PieChart,{children:[(0,b.jsxs)(F.Pie,{data:[{name:"Loyalty",value:T.filter(a=>a.is_loyalty_sale).reduce((a,b)=>a+b.total_amount,0)},{name:"Walk-in",value:T.filter(a=>!a.is_loyalty_sale).reduce((a,b)=>a+b.total_amount,0)}],cx:"50%",cy:"50%",labelLine:!1,label:a=>{let{cx:c,cy:d,midAngle:e,innerRadius:f,outerRadius:g,percent:h,name:i}=a,j=f+(g-f)*.5,k=c+j*Math.cos(-(Math.PI/180*e)),l=d+j*Math.sin(-(Math.PI/180*e));return(0,b.jsx)("text",{x:k,y:l,fill:"#000000",textAnchor:k>c?"start":"end",dominantBaseline:"central",fontSize:"11",fontWeight:"500",children:`${i} ${(100*h).toFixed(0)}%`})},outerRadius:70,fill:"#8884d8",dataKey:"value",children:[(0,b.jsx)(G.Cell,{fill:"#C8A2C8"}),(0,b.jsx)(G.Cell,{fill:"#87CEEB"})]}),(0,b.jsx)(M.Tooltip,{formatter:a=>S(a),contentStyle:{color:"#000"}})]})})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-base text-black",children:"Revenue vs VAT"}),(0,b.jsx)(g.CardDescription,{className:"text-xs text-black/70",children:"Month-to-date comparison"})]}),(0,b.jsx)(g.CardContent,{className:"pt-2",children:(0,b.jsx)(N.ResponsiveContainer,{width:"100%",height:220,children:(0,b.jsxs)(H.BarChart,{data:(Q=new Date((e=new Date).getFullYear(),e.getMonth(),1),[{name:"Revenue",value:R=T.filter(a=>new Date(a.sale_date)>=Q).reduce((a,b)=>a+b.total_amount,0)},{name:"VAT",value:.16*R}]),margin:{top:5,right:5,left:5,bottom:5},children:[(0,b.jsx)(L.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(J.XAxis,{dataKey:"name",tick:{fill:"#000",fontSize:11}}),(0,b.jsx)(K.YAxis,{tick:{fill:"#000",fontSize:10}}),(0,b.jsx)(M.Tooltip,{formatter:a=>S(a),contentStyle:{color:"#000"}}),(0,b.jsxs)(I.Bar,{dataKey:"value",children:[(0,b.jsx)(G.Cell,{fill:"#15426D"}),(0,b.jsx)(G.Cell,{fill:"#D55402"})]})]})})})]})]}),(0,b.jsxs)(g.Card,{className:"rounded-2xl md:col-span-2",children:[(0,b.jsxs)(g.CardHeader,{className:"pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-base text-black",children:"Daily Sales Trend"}),(0,b.jsx)(g.CardDescription,{className:"text-xs text-black/70",children:"Sales per product over 7 days"})]}),(0,b.jsx)(g.CardContent,{className:"pt-2",children:(0,b.jsx)(N.ResponsiveContainer,{width:"100%",height:220,children:(0,b.jsxs)(O.LineChart,{data:(()=>{let a=[];for(let b=6;b>=0;b--){let c=new Date;c.setDate(c.getDate()-b);let d=c.toISOString().split("T")[0],e={date:d};[...new Set(T.map(a=>a.fuel_type))].forEach(a=>{let b=T.filter(b=>b.sale_date.startsWith(d)&&b.fuel_type===a).reduce((a,b)=>a+b.total_amount,0);e[a]=b}),a.push(e)}return a})(),margin:{top:5,right:10,left:0,bottom:5},children:[(0,b.jsx)(L.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,b.jsx)(J.XAxis,{dataKey:"date",tick:{fontSize:10,fill:"#000"},tickFormatter:a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,b.jsx)(K.YAxis,{tick:{fontSize:11,fill:"#000"}}),(0,b.jsx)(M.Tooltip,{formatter:a=>S(a),contentStyle:{color:"#000"},labelFormatter:a=>new Date(a).toLocaleDateString()}),[...new Set(T.map(a=>a.fuel_type))].map(a=>{let c={Diesel:"#FFFF00",Petrol:"#FF0000",Unleaded:"#FF0000",Super:"#10B981"};return(0,b.jsx)(P.Line,{type:"monotone",dataKey:a,stroke:c[a]||"#000",strokeWidth:2,dot:{fill:c[a]||"#000"},name:a},a)})]})})})]})]}),(0,b.jsxs)(g.Card,{className:"rounded-2xl",children:[(0,b.jsx)(g.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.CardTitle,{children:"Sales Report"}),(0,b.jsx)(g.CardDescription,{children:"Latest fuel sales transactions"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:flex md:flex-wrap gap-2 items-end",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)(j.Label,{htmlFor:"date-filter",className:"text-xs text-muted-foreground",children:"Date:"}),(0,b.jsx)(i.Input,{id:"date-filter",type:"date",value:ax.date,onChange:a=>ay({...ax,date:a.target.value}),className:"w-full md:w-36 h-9"})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)(j.Label,{htmlFor:"invoice-filter",className:"text-xs text-muted-foreground",children:"Invoice:"}),(0,b.jsx)(i.Input,{id:"invoice-filter",type:"text",placeholder:"Search...",value:ax.invoiceNumber,onChange:a=>ay({...ax,invoiceNumber:a.target.value}),className:"w-full md:w-28 h-9"})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)(j.Label,{htmlFor:"fuel-filter",className:"text-xs text-muted-foreground",children:"Fuel:"}),(0,b.jsxs)(k.Select,{value:ax.fuelType,onValueChange:a=>ay({...ax,fuelType:a}),children:[(0,b.jsx)(k.SelectTrigger,{id:"fuel-filter",className:"w-full md:w-28 h-9",children:(0,b.jsx)(k.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"all",children:"All"}),aI.map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)(j.Label,{htmlFor:"nozzle-filter",className:"text-xs text-muted-foreground",children:"Nozzle:"}),(0,b.jsxs)(k.Select,{value:ax.nozzle,onValueChange:a=>ay({...ax,nozzle:a}),children:[(0,b.jsx)(k.SelectTrigger,{id:"nozzle-filter",className:"w-full md:w-28 h-9",children:(0,b.jsx)(k.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"all",children:"All"}),aJ.map(a=>{let c=V.find(b=>b.id===a),d=c?X.find(a=>a.id===c.dispenser_id):null;return(0,b.jsx)(k.SelectItem,{value:a,children:d&&c?`D${d.dispenser_number}N${c.nozzle_number}`:"Unknown"},a)})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)(j.Label,{htmlFor:"loyalty-filter",className:"text-xs text-muted-foreground",children:"Loyalty:"}),(0,b.jsxs)(k.Select,{value:ax.loyalty,onValueChange:a=>ay({...ax,loyalty:a}),children:[(0,b.jsx)(k.SelectTrigger,{id:"loyalty-filter",className:"w-full md:w-28 h-9",children:(0,b.jsx)(k.SelectValue,{placeholder:"All"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"all",children:"All"}),(0,b.jsx)(k.SelectItem,{value:"loyalty",children:"Loyalty Only"}),(0,b.jsx)(k.SelectItem,{value:"non-loyalty",children:"Walk-in"})]})]})]}),(0,b.jsx)(h.Button,{variant:"outline",size:"sm",className:"h-9 self-end",onClick:()=>ay({date:"",invoiceNumber:"",fuelType:"",nozzle:"",loyalty:"all"}),children:"Clear"})]})]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"space-y-2",children:0===aH.length?(0,b.jsx)("p",{className:"text-sm text-slate-500",children:0===T.length?"No sales recorded yet":"No sales match the current filters"}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(w.Table,{className:"w-full",children:[(0,b.jsx)(w.TableHeader,{children:(0,b.jsxs)(w.TableRow,{children:[(0,b.jsx)(w.TableCell,{className:"text-left p-2",children:"Date"}),(0,b.jsx)(w.TableCell,{className:"text-left p-2",children:"Invoice No."}),(0,b.jsx)(w.TableCell,{className:"text-left p-2",children:"Nozzle"}),(0,b.jsx)(w.TableCell,{className:"text-left p-2",children:"Fuel Type"}),(0,b.jsx)(w.TableCell,{className:"text-right p-2",children:"Quantity (L)"}),(0,b.jsx)(w.TableCell,{className:"text-right p-2",children:"Unit Price"}),(0,b.jsx)(w.TableCell,{className:"text-right p-2",children:"Total"}),(0,b.jsx)(w.TableCell,{className:"text-center p-2",children:"Payment"}),(0,b.jsx)(w.TableCell,{className:"text-center p-2",children:"Loyalty"}),(0,b.jsx)(w.TableCell,{className:"text-right p-2",children:"Meter Reading"}),(0,b.jsx)(w.TableCell,{className:"text-center p-2",children:"Status"}),(0,b.jsx)(w.TableCell,{className:"text-center p-2",children:"Actions"})]})}),(0,b.jsx)(w.TableBody,{children:aH.map(a=>{let c,d=V.find(b=>b.id===a.nozzle_id),e=d?X.find(a=>a.id===d.dispenser_id):null;return(0,b.jsxs)(w.TableRow,{className:"hover:bg-slate-50",children:[(0,b.jsx)(w.TableCell,{className:"p-2",children:new Date(a.sale_date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,b.jsx)(w.TableCell,{className:"p-2 text-sm font-mono",children:a.invoice_number||a.receipt_number}),(0,b.jsx)(w.TableCell,{className:"p-2 text-sm",children:e&&d?`D${e.dispenser_number}N${d.nozzle_number}`:"-"}),(0,b.jsx)(w.TableCell,{className:"p-2",children:a.fuel_type}),(0,b.jsx)(w.TableCell,{className:"p-2 text-right",children:Number(a.quantity).toFixed(2)}),(0,b.jsx)(w.TableCell,{className:"p-2 text-right",children:S(a.unit_price)}),(0,b.jsx)(w.TableCell,{className:"p-2 text-right font-medium",children:S(a.total_amount)}),(0,b.jsx)(w.TableCell,{className:"p-2 text-center",children:(0,b.jsx)(x.Badge,{variant:"outline",className:"capitalize",children:"mpesa"===(c=(a.payment_method||"cash").toLowerCase())||"m-pesa"===c||"mobile_money"===c?"Mobile Money":"card"===c?"Card":"credit"===c?"Credit":"Cash"})}),(0,b.jsx)(w.TableCell,{className:"p-2 text-center",children:a.is_loyalty_sale&&(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsxs)("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,b.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"}),(0,b.jsx)("path",{d:"M12 4.354a4 4 0 110 5.292M15.465 5.464A5.973 5.973 0 0112 4c-3.314 0-6 2.686-6 6 0 1.369.465 2.628 1.243 3.636l-1.06 1.06a7.966 7.966 0 01-1.383-4.696c0-4.418 3.582-8 8-8 1.823 0 3.5.611 4.85 1.636l-1.185 1.185z"})]})})}),(0,b.jsx)(w.TableCell,{className:"p-2 text-right",children:a.meter_reading_after?Number(a.meter_reading_after).toFixed(2):"-"}),(0,b.jsx)(w.TableCell,{className:"p-2 text-center",children:(0,b.jsx)(x.Badge,{variant:function(a){switch(a){case"transmitted":return"default";case"pending":default:return"secondary";case"flagged":return"destructive"}}(a.transmission_status||"pending"),children:(a.transmission_status||"pending").charAt(0).toUpperCase()+(a.transmission_status||"pending").slice(1)})}),(0,b.jsx)(w.TableCell,{className:"p-2 text-center",children:(0,b.jsxs)(l.DropdownMenu,{children:[(0,b.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(h.Button,{variant:"ghost",size:"sm",children:(0,b.jsx)(q.MoreVertical,{className:"h-4 w-4"})})}),(0,b.jsxs)(l.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(l.DropdownMenuItem,{onClick:()=>{m.toast.info(`Viewing invoice ${a.invoice_number}`)},children:[(0,b.jsx)(r.FileText,{className:"h-4 w-4 mr-2"}),"View Invoice"]}),(0,b.jsxs)(l.DropdownMenuItem,{onClick:()=>{ao(a),aC({reason:"",return_quantity:a.quantity.toString(),refund_amount:a.total_amount.toString(),approved_by:"",customer_signature:"",notes:""}),am(!0)},children:[(0,b.jsx)(s.CreditCard,{className:"h-4 w-4 mr-2"}),"Generate Credit Note"]})]})]})})]},a.id)})})]})})})})]}),(0,b.jsx)(f.Dialog,{open:af,onOpenChange:ag,children:(0,b.jsxs)(f.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(f.DialogHeader,{children:[(0,b.jsx)(f.DialogTitle,{children:"Record Fuel Sale"}),(0,b.jsx)(f.DialogDescription,{children:"Enter the details of the fuel sale transaction"})]}),(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"nozzle",children:"Nozzle"}),(0,b.jsxs)(k.Select,{value:az.nozzle_id,onValueChange:a=>{let b=V.find(b=>b.id===a);aA({...az,nozzle_id:a,fuel_type:b?.fuel_type||""})},children:[(0,b.jsx)(k.SelectTrigger,{id:"nozzle",children:(0,b.jsx)(k.SelectValue,{placeholder:"Select nozzle"})}),(0,b.jsx)(k.SelectContent,{children:V.map(a=>{let c=X.find(b=>b.id===a.dispenser_id);return(0,b.jsxs)(k.SelectItem,{value:a.id,children:[c?`D${c.dispenser_number}N${a.nozzle_number}`:`Nozzle ${a.nozzle_number}`," ","- ",a.fuel_type]},a.id)})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"fuel_type_display",children:"Fuel Type"}),(0,b.jsx)(i.Input,{id:"fuel_type_display",value:az.fuel_type,disabled:!0})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"amount",children:"Sale Amount (KES)"}),(0,b.jsx)(i.Input,{id:"amount",type:"number",step:"0.01",placeholder:"0.00",value:az.amount,onChange:a=>aA({...az,amount:a.target.value})}),az.amount&&az.fuel_type&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["â‰ˆ"," ",(Number.parseFloat(az.amount)/(Z.find(a=>a.fuel_type===az.fuel_type)?.price||1)).toFixed(2)," ","liters"]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"payment_method",children:"Payment Method"}),(0,b.jsxs)(k.Select,{value:az.payment_method,onValueChange:a=>aA({...az,payment_method:a}),children:[(0,b.jsx)(k.SelectTrigger,{id:"payment_method",children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"cash",children:"Cash"}),(0,b.jsx)(k.SelectItem,{value:"mobile_money",children:"Mobile Money"}),(0,b.jsx)(k.SelectItem,{value:"card",children:"Card"}),(0,b.jsx)(k.SelectItem,{value:"credit",children:"Credit"})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"customer_name",children:"Customer Name (Optional)"}),(0,b.jsx)(i.Input,{id:"customer_name",placeholder:"Enter customer name",value:az.customer_name,onChange:a=>aA({...az,customer_name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"customer_pin",children:"PIN/TIN Number (Optional)"}),(0,b.jsx)(i.Input,{id:"customer_pin",placeholder:"Enter PIN or TIN",value:az.customer_pin,onChange:a=>aA({...az,customer_pin:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"discount_type",children:"Discount Type (Optional)"}),(0,b.jsxs)(k.Select,{value:az.discount_type,onValueChange:a=>aA({...az,discount_type:a}),children:[(0,b.jsx)(k.SelectTrigger,{id:"discount_type",children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"fixed",children:"Fixed Amount (KES)"}),(0,b.jsx)(k.SelectItem,{value:"percentage",children:"Percentage (%)"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{htmlFor:"discount_value",children:["Discount ","percentage"===az.discount_type?"(%)":"(KES)"]}),(0,b.jsx)(i.Input,{id:"discount_value",type:"number",step:"0.01",placeholder:"percentage"===az.discount_type?"0":"0.00",value:az.discount_value,onChange:a=>aA({...az,discount_value:a.target.value})}),az.amount&&az.discount_value&&Number.parseFloat(az.discount_value)>0&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Net Amount: KES"," ",(Number.parseFloat(az.amount)-("percentage"===az.discount_type?Number.parseFloat(az.amount)*Number.parseFloat(az.discount_value)/100:Number.parseFloat(az.discount_value))).toFixed(2)]})]})]}),(0,b.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"is_loyalty_sale",checked:az.is_loyalty_sale,onChange:a=>aA({...az,is_loyalty_sale:a.target.checked}),className:"rounded border-gray-300"}),(0,b.jsxs)(j.Label,{htmlFor:"is_loyalty_sale",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsxs)("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,b.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"}),(0,b.jsx)("path",{d:"M12 4.354a4 4 0 110 5.292M15.465 5.464A5.973 5.973 0 0112 4c-3.314 0-6 2.686-6 6 0 1.369.465 2.628 1.243 3.636l-1.06 1.06a7.966 7.966 0 01-1.383-4.696c0-4.418 3.582-8 8-8 1.823 0 3.5.611 4.85 1.636l-1.185 1.185z"})]}),"Loyalty Customer Transaction"]})]}),az.is_loyalty_sale&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 bg-green-50 p-4 rounded-lg",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"loyalty_customer_name",children:"Loyalty Customer Name *"}),(0,b.jsxs)(B.Popover,{open:av,onOpenChange:aw,children:[(0,b.jsx)(B.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(h.Button,{variant:"outline",role:"combobox","aria-expanded":av,className:"w-full justify-between bg-transparent",children:[az.loyalty_customer_name||"Select customer...",(0,b.jsx)(C.ChevronsUpDown,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,b.jsx)(B.PopoverContent,{className:"w-[400px] p-0",children:(0,b.jsxs)(A.Command,{children:[(0,b.jsx)(A.CommandInput,{placeholder:"Search customer..."}),(0,b.jsxs)(A.CommandList,{children:[(0,b.jsx)(A.CommandEmpty,{children:"No customer found."}),(0,b.jsx)(A.CommandGroup,{className:"max-h-[200px] overflow-y-auto",children:at.map(a=>(0,b.jsxs)(A.CommandItem,{value:a.name,onSelect:()=>{aA({...az,loyalty_customer_name:a.name,loyalty_customer_pin:a.pin}),aw(!1)},children:[(0,b.jsx)(t.Check,{className:(0,D.cn)("mr-2 h-4 w-4",az.loyalty_customer_name===a.name?"opacity-100":"opacity-0")}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-medium",children:a.name}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a.pin})]})]},a.id))})]})]})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"loyalty_customer_pin",children:"Loyalty Customer PIN *"}),(0,b.jsx)(i.Input,{id:"loyalty_customer_pin",placeholder:"Auto-filled from customer",value:az.loyalty_customer_pin,readOnly:!0,className:"bg-gray-50"})]}),(0,b.jsx)("div",{className:"col-span-2 text-sm text-green-700 bg-green-100 p-2 rounded",children:"Points will be calculated at 1 point per KES 100 spent"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"vehicle_number",children:"Vehicle Number (Optional)"}),(0,b.jsx)(i.Input,{id:"vehicle_number",placeholder:"Enter vehicle registration",value:az.vehicle_number,onChange:a=>aA({...az,vehicle_number:a.target.value})})]})]}),(0,b.jsxs)(f.DialogFooter,{children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>ag(!1),children:"Cancel"}),(0,b.jsx)(h.Button,{onClick:aK,disabled:ab,children:ab?"Recording...":"Record Sale"})]})]})}),(0,b.jsx)(f.Dialog,{open:al,onOpenChange:am,children:(0,b.jsxs)(f.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(f.DialogHeader,{children:[(0,b.jsx)(f.DialogTitle,{children:"Generate Credit Note"}),(0,b.jsxs)(f.DialogDescription,{children:["Create a credit note for invoice ",an?.invoice_number||an?.receipt_number]})]}),(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"reason",children:"Reason for Credit Note *"}),(0,b.jsx)(y.Textarea,{id:"reason",placeholder:"Enter reason for issuing credit note",value:aB.reason,onChange:a=>aC({...aB,reason:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"return_quantity",children:"Return Quantity (Liters)"}),(0,b.jsx)(i.Input,{id:"return_quantity",type:"number",step:"0.001",placeholder:"0.000",value:aB.return_quantity,onChange:a=>aC({...aB,return_quantity:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"refund_amount",children:"Refund Amount (KES) *"}),(0,b.jsx)(i.Input,{id:"refund_amount",type:"number",step:"0.01",placeholder:"0.00",value:aB.refund_amount,onChange:a=>aC({...aB,refund_amount:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"approved_by",children:"Approved By"}),(0,b.jsx)(i.Input,{id:"approved_by",placeholder:"Manager/Supervisor name",value:aB.approved_by,onChange:a=>aC({...aB,approved_by:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"customer_signature",children:"Customer Signature"}),(0,b.jsx)(i.Input,{id:"customer_signature",placeholder:"Customer name/signature",value:aB.customer_signature,onChange:a=>aC({...aB,customer_signature:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"cn_notes",children:"Additional Notes"}),(0,b.jsx)(y.Textarea,{id:"cn_notes",placeholder:"Any additional information",value:aB.notes,onChange:a=>aC({...aB,notes:a.target.value})})]})]}),(0,b.jsxs)(f.DialogFooter,{children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>am(!1),children:"Cancel"}),(0,b.jsx)(h.Button,{onClick:aL,disabled:ab,children:"Generate Credit Note"})]})]})}),(0,b.jsx)(f.Dialog,{open:ah,onOpenChange:ai,children:(0,b.jsxs)(f.DialogContent,{children:[(0,b.jsxs)(f.DialogHeader,{children:[(0,b.jsx)(f.DialogTitle,{children:"start"===aj?"Start New Shift":"End Current Shift"}),(0,b.jsx)(f.DialogDescription,{children:"start"===aj?"Enter the shift start details":"Enter the shift closing details"})]}),(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:["start"===aj&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"date",children:"Date"}),(0,b.jsx)(i.Input,{id:"date",type:"date",value:aD.date,onChange:a=>aE({...aD,date:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"time",children:"Time"}),(0,b.jsx)(i.Input,{id:"time",type:"time",value:aD.time,onChange:a=>aE({...aD,time:a.target.value})})]})]}),"end"===aj&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"closing_cash",children:"Closing Cash (Optional)"}),(0,b.jsx)(i.Input,{id:"closing_cash",type:"number",step:"0.01",placeholder:"0.00",value:aD.closing_cash,onChange:a=>aE({...aD,closing_cash:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"notes",children:"Notes (Optional)"}),(0,b.jsx)(y.Textarea,{id:"notes",placeholder:"Add any notes about this shift",value:aD.notes,onChange:a=>aE({...aD,notes:a.target.value})})]})]}),(0,b.jsxs)(f.DialogFooter,{children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>ai(!1),children:"Cancel"}),(0,b.jsx)(h.Button,{onClick:"start"===aj?aM:aN,disabled:ad,children:"start"===aj?"Start Shift":"End Shift"})]})]})}),(0,b.jsx)(z.ShiftManagementDialog,{open:ap,onOpenChange:aq,branchName:ar?.name,branchId:ar?.id})]})}function R(){let[a,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(!1);return(0,b.jsxs)("div",{className:"flex min-h-screen w-full overflow-x-hidden bg-gradient-to-b from-slate-900 via-blue-900 to-white",children:[(0,b.jsx)(d.DashboardSidebar,{collapsed:a,onToggle:()=>f(!a),mobileOpen:g,onMobileClose:()=>h(!1)}),(0,b.jsx)("div",{className:"flex-1 flex flex-col min-w-0 lg:ml-8 my-2 lg:my-6 mx-2 lg:mr-6",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl lg:rounded-tl-3xl shadow-2xl flex-1 flex flex-col overflow-hidden",children:[(0,b.jsx)(e.DashboardHeader,{onMobileMenuToggle:()=>h(!g)}),(0,b.jsx)("main",{className:"flex-1 overflow-y-auto overflow-x-hidden bg-slate-50 p-3 md:p-6",children:(0,b.jsxs)("div",{className:"w-full max-w-7xl mx-auto space-y-4 md:space-y-6",children:[(0,b.jsx)(Q,{}),(0,b.jsxs)("footer",{className:"mt-12 border-t pt-6 pb-4 text-center text-sm text-muted-foreground",children:["Powered by ",(0,b.jsx)("span",{className:"font-semibold text-foreground",children:"Sensile Technologies East Africa Ltd"})]})]})})]})})]})}a.s(["default",()=>R],78871)}];

//# sourceMappingURL=app_sales_page_tsx_0a8e10f4._.js.map