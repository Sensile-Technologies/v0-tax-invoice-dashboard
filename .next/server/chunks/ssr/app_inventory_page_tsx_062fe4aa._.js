module.exports=[1194,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(344),e=a.i(69265),f=a.i(40695),g=a.i(3130),h=a.i(5522),i=a.i(17171),j=a.i(88237),k=a.i(24669),l=a.i(70106);let m=(0,l.default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var n=a.i(87532);a.i(9941),(0,l.default)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),(0,l.default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var o=a.i(13655),p=a.i(4720),q=a.i(69520),r=a.i(74575),s=a.i(87682),t=a.i(65733);let u=(0,l.default)("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);var v=a.i(15618),w=a.i(24569),x=a.i(83497),y=a.i(54161);a.i(98621),!function(a){if(!a||"undefined"==typeof document)return;let b=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c),c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a))}(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var z=a=>"number"==typeof a&&!isNaN(a);function A({enter:a,exit:b,appendPosition:d=!1,collapse:e=!0,collapseDuration:f=300}){return function({children:g,position:h,preventExitTransition:i,done:j,nodeRef:k,isIn:l,playToast:m}){let n=d?`${a}--${h}`:a,o=d?`${b}--${h}`:b,p=(0,c.useRef)(0);return(0,c.useLayoutEffect)(()=>{let a=k.current,b=n.split(" "),c=d=>{d.target===k.current&&(m(),a.removeEventListener("animationend",c),a.removeEventListener("animationcancel",c),0===p.current&&"animationcancel"!==d.type&&a.classList.remove(...b))};a.classList.add(...b),a.addEventListener("animationend",c),a.addEventListener("animationcancel",c)},[]),(0,c.useEffect)(()=>{let a=k.current,b=()=>{a.removeEventListener("animationend",b),e?function(a,b,c=300){let{scrollHeight:d,style:e}=a;requestAnimationFrame(()=>{e.minHeight="initial",e.height=d+"px",e.transition=`all ${c}ms`,requestAnimationFrame(()=>{e.height="0",e.padding="0",e.margin="0",setTimeout(b,c)})})}(a,j,f):j()};l||(i?b():(p.current=1,a.className+=` ${o}`,a.addEventListener("animationend",b)))},[l]),c.default.createElement(c.default.Fragment,null,g)}}var B=1,C=()=>`${B++}`,D=new Map,E=[],F=new Set;function G(a,b){D.forEach(c=>{null!=b&&null!=b&&b.containerId&&(null==b?void 0:b.containerId)!==c.id||c.toggle(a,null==b?void 0:b.id)})}function H(a,b){let d;return d=a,((0,c.isValidElement)(d)||"string"==typeof d||"function"==typeof d||z(d))&&(D.size>0||E.push({content:a,options:b}),D.forEach(c=>{c.buildToast(a,b)})),b.toastId}function I(a,b){var c;return{...b,type:b&&b.type||a,toastId:(c=b)&&("string"==typeof c.toastId||z(c.toastId))?c.toastId:C()}}function J(a){return(b,c)=>H(b,I(a,c))}function K(a,b){return H(a,I("default",b))}K.loading=(a,b)=>H(a,I("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...b})),K.promise=function(a,{pending:b,error:c,success:d},e){let f;b&&(f="string"==typeof b?K.loading(b,e):K.loading(b.render,{...e,...b}));let g={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},h=(a,b,c)=>{if(null==b)return void K.dismiss(f);let d={type:a,...g,...e,data:c},h="string"==typeof b?{render:b}:b;return f?K.update(f,{...d,...h}):K(h.render,{...d,...h}),c},i="function"==typeof a?a():a;return i.then(a=>h("success",d,a)).catch(a=>h("error",c,a)),i},K.success=J("success"),K.info=J("info"),K.error=J("error"),K.warning=J("warning"),K.warn=K.warning,K.dark=(a,b)=>H(a,I("default",{theme:"dark",...b})),K.dismiss=function(a){!function(a){let b;if(!(D.size>0)){E=E.filter(b=>null!=a&&b.options.toastId!==a);return}if(null==a||"string"==typeof(b=a)||z(b))D.forEach(b=>{b.removeToast(a)});else if(a&&("containerId"in a||"id"in a)){let b=D.get(a.containerId);b?b.removeToast(a.id):D.forEach(b=>{b.removeToast(a.id)})}}(a)},K.clearWaitingQueue=(a={})=>{D.forEach(b=>{b.props.limit&&(!a.containerId||b.id===a.containerId)&&b.clearQueue()})},K.isActive=function(a,b){var c;if(b)return!!(null!=(c=D.get(b))&&c.isToastActive(a));let d=!1;return D.forEach(b=>{b.isToastActive(a)&&(d=!0)}),d},K.update=(a,b={})=>{let c=((a,{containerId:b})=>{var c;return null==(c=D.get(b||1))?void 0:c.toasts.get(a)})(a,b);if(c){let{props:d,content:e}=c,f={delay:100,...d,...b,toastId:b.toastId||a,updateId:C()};f.toastId!==a&&(f.staleId=a);let g=f.render||e;delete f.render,H(g,f)}},K.done=a=>{K.update(a,{progress:1})},K.onChange=function(a){return F.add(a),()=>{F.delete(a)}},K.play=a=>G(!0,a),K.pause=a=>G(!1,a),c.useEffect;var L=(a,b=!1)=>({enter:`Toastify--animate Toastify__${a}-enter`,exit:`Toastify--animate Toastify__${a}-exit`,appendPosition:b});function M({branchId:a}){let[d,e]=(0,c.useState)([]),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(null),[J,L]=(0,c.useState)({quantity:"",reason:"",requestedBy:""}),[M,N]=(0,c.useState)({quantity:"",reason:"",requestedBy:""}),[O,P]=(0,c.useState)({toTankId:"",toBranchId:a,quantity:"",notes:"",requestedBy:""}),[Q,R]=(0,c.useState)({tankName:"",fuelType:"Petrol",capacity:"",initialStock:""}),[S,T]=(0,c.useState)({dispenserNumber:""});(0,c.useEffect)(()=>{a&&(U(),V())},[a]);let U=async()=>{m(!0);try{let b=await fetch(`/api/tanks?branch_id=${a}`),c=await b.json();if(!c.success){console.error("Error fetching tanks:",c.error),m(!1);return}let[d,f]=await Promise.all([fetch(`/api/dispensers?branch_id=${a}`),fetch(`/api/nozzles?branch_id=${a}`)]),g=await d.json(),h=await f.json(),i=g.success?g.data:[],j=h.success?h.data:[],k=(c.data||[]).map(a=>({...a,dispensers:i,nozzles:j.filter(b=>b.fuel_type===a.fuel_type)}));e(k)}catch(a){console.error("Error fetching tanks:",a)}finally{m(!1)}},V=async()=>{try{let a=await fetch("/api/branches"),b=await a.json();b.success&&k(b.data||[])}catch(a){console.error("Error fetching branches:",a)}},W=async()=>{if(!F)return;let b=Number.parseFloat(J.quantity);try{let c=await fetch("/api/stock/adjust",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tank_id:F.id,branch_id:a,adjustment_type:b>=0?"increase":"decrease",quantity:Math.abs(b),reason:J.reason,approved_by:J.requestedBy,sync_to_kra:!0})}),d=await c.json();c.ok&&d.success?(K.success(`Stock adjusted: ${d.data.previousStock} -> ${d.data.newStock} litres`),d.kraSync?.synced&&K.info("Stock synced to KRA")):K.error(d.error||"Error adjusting stock"),p(!1),L({quantity:"",reason:"",requestedBy:""}),U()}catch(a){console.error("Error adjusting stock:",a),K.error("Error adjusting stock")}},X=async()=>{if(!F)return;let b=Number.parseFloat(M.quantity);try{let c=await fetch("/api/stock/receive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch_id:a,tank_id:F.id,quantity:b,unit_price:0,supplier_name:M.requestedBy||"Unknown",notes:M.reason,sync_to_kra:!0})}),d=await c.json();c.ok&&d.success?(K.success(`Received ${b} litres. New stock: ${d.data.newStock}`),d.kraSync?.synced&&K.info("Stock synced to KRA")):K.error(d.error||"Error receiving stock"),r(!1),N({quantity:"",reason:"",requestedBy:""}),U()}catch(a){console.error("Error receiving stock:",a),K.error("Error receiving stock")}},Y=async()=>{if(!F)return;let b=Number.parseFloat(O.quantity);try{if(!(await fetch("/api/stock-transfers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from_tank_id:F.id,to_tank_id:O.toTankId,from_branch_id:a,to_branch_id:O.toBranchId,quantity:b,requested_by:O.requestedBy,notes:O.notes,approval_status:"pending"})})).ok)return void console.error("Error creating transfer");A(!1),P({toTankId:"",toBranchId:a,quantity:"",notes:"",requestedBy:""}),U()}catch(a){console.error("Error creating transfer:",a)}},Z=async()=>{if(a)try{(await fetch("/api/tanks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch_id:a,tank_name:Q.tankName,fuel_type:Q.fuelType,capacity:Number.parseFloat(Q.capacity),current_stock:Number.parseFloat(Q.initialStock||"0"),status:"active"})})).ok?(K.success(`Tank ${Q.tankName} added successfully`),C(!1),R({tankName:"",fuelType:"Petrol",capacity:"",initialStock:""}),U()):(console.error("Error adding tank"),K.error("Failed to add tank"))}catch(a){console.error("Error adding tank:",a),K.error("Failed to add tank")}},$=async()=>{if(H)try{let b=await fetch(`/api/dispensers?branch_id=${a}`),c=await b.json(),e=((c.success?c.data:[])||[]).map(a=>Number(a.dispenser_number)||0),f=(e.length>0?Math.max(...e):0)+1,g=d.find(a=>a.id===H),h=g?.fuel_type||"Petrol";(await fetch("/api/dispensers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch_id:a,dispenser_number:f,fuel_type:h,status:"active"})})).ok?(K.success(`Dispenser ${f} added successfully`),E(!1),T({dispenserNumber:""}),I(null),U()):K.error("Failed to add dispenser")}catch(a){console.error("Error adding dispenser:",a),K.error("Failed to add dispenser")}};return l||!a?(0,b.jsx)("div",{className:"p-6",children:"Loading tank management..."}):(0,b.jsxs)("div",{className:"space-y-6 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Tank Management"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage fuel tanks, stock levels, and transfers"})]}),(0,b.jsxs)(f.Button,{onClick:()=>C(!0),className:"rounded-xl",children:[(0,b.jsx)(v.Plus,{className:"h-4 w-4 mr-2"}),"Add New Tank"]})]}),(0,b.jsx)("div",{className:"grid gap-4",children:d.map(a=>{let c=Number.parseFloat((a.current_stock/a.capacity*100).toFixed(1)),d=c<20?"critical":c<50?"low":"normal";return(0,b.jsxs)(g.Card,{className:"rounded-2xl",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,b.jsx)(o.Fuel,{className:"h-5 w-5 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.CardTitle,{className:"text-lg",children:a.tank_name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.fuel_type})]})]}),(0,b.jsxs)(y.Badge,{variant:"critical"===d?"destructive":"low"===d?"secondary":"default",children:[c,"% Full"]})]})}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Capacity"}),(0,b.jsxs)("p",{className:"text-lg font-semibold",children:[a.capacity.toLocaleString()," L"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Current Stock"}),(0,b.jsxs)("p",{className:"text-lg font-semibold",children:[a.current_stock.toLocaleString()," L"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Available Space"}),(0,b.jsxs)("p",{className:"text-lg font-semibold",children:[(a.capacity-a.current_stock).toLocaleString()," L"]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Serving Dispensers/Nozzles"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.dispensers?.map(a=>(0,b.jsxs)(y.Badge,{variant:"outline",children:["D",a.dispenser_number]},a.id)),a.nozzles?.map(a=>(0,b.jsxs)(y.Badge,{variant:"outline",children:["N",a.nozzle_number]},a.id)),!a.dispensers?.length&&!a.nozzles?.length&&(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"No dispensers/nozzles assigned"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>{G(a),r(!0)},className:"rounded-xl",children:[(0,b.jsx)(x.Package,{className:"h-4 w-4 mr-2"}),"Receive Stock"]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>{G(a),p(!0)},className:"rounded-xl",children:[(0,b.jsx)(w.Edit,{className:"h-4 w-4 mr-2"}),"Adjust Stock"]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>{G(a),A(!0)},className:"rounded-xl",children:[(0,b.jsx)(u,{className:"h-4 w-4 mr-2"}),"Transfer Stock"]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>{I(a),E(!0)},className:"rounded-xl",children:[(0,b.jsx)(v.Plus,{className:"mr-2 h-4 w-4"}),"Add Dispenser"]})]})]})]},a.id)})}),(0,b.jsx)(t.Dialog,{open:n,onOpenChange:p,children:(0,b.jsxs)(t.DialogContent,{className:"rounded-2xl",children:[(0,b.jsxs)(t.DialogHeader,{children:[(0,b.jsx)(t.DialogTitle,{children:"Adjust Stock Level"}),(0,b.jsxs)(t.DialogDescription,{children:["Manually adjust stock for ",F?.tank_name,". Positive values increase stock, negative values decrease it."]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Adjustment Quantity (Litres)"}),(0,b.jsx)(h.Input,{type:"number",placeholder:"e.g., +500 or -200",value:J.quantity,onChange:a=>L({...J,quantity:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Reason for Adjustment"}),(0,b.jsx)(h.Input,{placeholder:"e.g., Physical count correction",value:J.reason,onChange:a=>L({...J,reason:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Requested By"}),(0,b.jsx)(h.Input,{placeholder:"Your name",value:J.requestedBy,onChange:a=>L({...J,requestedBy:a.target.value}),className:"rounded-xl"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"This adjustment requires approval before taking effect."})]}),(0,b.jsxs)(t.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>p(!1),className:"rounded-xl",children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:W,className:"rounded-xl",children:"Submit for Approval"})]})]})}),(0,b.jsx)(t.Dialog,{open:q,onOpenChange:r,children:(0,b.jsxs)(t.DialogContent,{className:"rounded-2xl",children:[(0,b.jsxs)(t.DialogHeader,{children:[(0,b.jsx)(t.DialogTitle,{children:"Receive Stock"}),(0,b.jsxs)(t.DialogDescription,{children:["Record stock received into ",F?.tank_name]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Quantity Received (Litres)"}),(0,b.jsx)(h.Input,{type:"number",placeholder:"e.g., 5000",value:M.quantity,onChange:a=>N({...M,quantity:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Delivery Note / Reference"}),(0,b.jsx)(h.Input,{placeholder:"e.g., DN-12345",value:M.reason,onChange:a=>N({...M,reason:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Received By"}),(0,b.jsx)(h.Input,{placeholder:"Your name",value:M.requestedBy,onChange:a=>N({...M,requestedBy:a.target.value}),className:"rounded-xl"})]})]}),(0,b.jsxs)(t.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>r(!1),className:"rounded-xl",children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:X,className:"rounded-xl",children:"Receive Stock"})]})]})}),(0,b.jsx)(t.Dialog,{open:z,onOpenChange:A,children:(0,b.jsxs)(t.DialogContent,{className:"rounded-2xl",children:[(0,b.jsxs)(t.DialogHeader,{children:[(0,b.jsx)(t.DialogTitle,{children:"Transfer Stock"}),(0,b.jsxs)(t.DialogDescription,{children:["Transfer stock from ",F?.tank_name," to another tank"]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Destination Branch"}),(0,b.jsxs)(s.Select,{value:O.toBranchId||void 0,onValueChange:a=>P({...O,toBranchId:a,toTankId:""}),children:[(0,b.jsx)(s.SelectTrigger,{className:"rounded-xl",children:(0,b.jsx)(s.SelectValue,{placeholder:"Select branch"})}),(0,b.jsx)(s.SelectContent,{children:j.map(a=>(0,b.jsx)(s.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Destination Tank"}),(0,b.jsxs)(s.Select,{value:O.toTankId,onValueChange:a=>P({...O,toTankId:a}),children:[(0,b.jsx)(s.SelectTrigger,{className:"rounded-xl",children:(0,b.jsx)(s.SelectValue,{placeholder:"Select tank"})}),(0,b.jsx)(s.SelectContent,{children:d.filter(a=>a.id!==F?.id&&a.fuel_type===F?.fuel_type).map(a=>(0,b.jsx)(s.SelectItem,{value:a.id,children:a.tank_name},a.id))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Quantity to Transfer (Litres)"}),(0,b.jsx)(h.Input,{type:"number",placeholder:"e.g., 1000",value:O.quantity,onChange:a=>P({...O,quantity:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Transfer Notes"}),(0,b.jsx)(h.Input,{placeholder:"Reason for transfer",value:O.notes,onChange:a=>P({...O,notes:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Requested By"}),(0,b.jsx)(h.Input,{placeholder:"Your name",value:O.requestedBy,onChange:a=>P({...O,requestedBy:a.target.value}),className:"rounded-xl"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"This transfer requires approval before taking effect."})]}),(0,b.jsxs)(t.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>A(!1),className:"rounded-xl",children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:Y,className:"rounded-xl",children:"Submit Transfer Request"})]})]})}),(0,b.jsx)(t.Dialog,{open:B,onOpenChange:C,children:(0,b.jsxs)(t.DialogContent,{className:"rounded-2xl",children:[(0,b.jsxs)(t.DialogHeader,{children:[(0,b.jsx)(t.DialogTitle,{children:"Add New Tank"}),(0,b.jsx)(t.DialogDescription,{children:"Add a new fuel tank to this branch"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Tank Name"}),(0,b.jsx)(h.Input,{placeholder:"e.g., Tank 03",value:Q.tankName,onChange:a=>R({...Q,tankName:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Fuel Type"}),(0,b.jsxs)(s.Select,{value:Q.fuelType,onValueChange:a=>R({...Q,fuelType:a}),children:[(0,b.jsx)(s.SelectTrigger,{className:"rounded-xl",children:(0,b.jsx)(s.SelectValue,{})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"Petrol",children:"Petrol"}),(0,b.jsx)(s.SelectItem,{value:"Diesel",children:"Diesel"}),(0,b.jsx)(s.SelectItem,{value:"Kerosene",children:"Kerosene"}),(0,b.jsx)(s.SelectItem,{value:"Super",children:"Super"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Tank Capacity (Litres)"}),(0,b.jsx)(h.Input,{type:"number",placeholder:"e.g., 10000",value:Q.capacity,onChange:a=>R({...Q,capacity:a.target.value}),className:"rounded-xl"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Initial Stock (Litres)"}),(0,b.jsx)(h.Input,{type:"number",placeholder:"e.g., 5000",value:Q.initialStock,onChange:a=>R({...Q,initialStock:a.target.value}),className:"rounded-xl"})]})]}),(0,b.jsxs)(t.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>C(!1),className:"rounded-xl",children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:Z,className:"rounded-xl",children:"Add Tank"})]})]})}),(0,b.jsx)(t.Dialog,{open:D,onOpenChange:E,children:(0,b.jsxs)(t.DialogContent,{className:"rounded-2xl",children:[(0,b.jsxs)(t.DialogHeader,{children:[(0,b.jsxs)(t.DialogTitle,{children:["Add Dispenser to ",H?.tank_name]}),(0,b.jsxs)(t.DialogDescription,{children:["Add a new dispenser for ",H?.fuel_type," fuel"]})]}),(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"A new dispenser will be automatically assigned the next available number."})}),(0,b.jsxs)(t.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>{E(!1),I(null)},className:"rounded-xl",children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:$,className:"rounded-xl",children:"Add Dispenser"})]})]})})]})}function N(){let[a,d]=(0,c.useState)("cards"),[e,l]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(null),{formatCurrency:C}=(0,r.useCurrency)(),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)([]),[J,K]=(0,c.useState)([]),[L,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(!1);(0,c.useEffect)(()=>{Q();try{let a=localStorage.getItem("selectedBranch");if(a){let b=JSON.parse(a);b.id&&G(b.id)}}catch{}},[]);let Q=async()=>{try{let a=await fetch("/api/branches"),b=await a.json();b.success&&E(b.data||[])}catch(a){console.error("Error fetching branches:",a)}},R=(0,c.useCallback)(async()=>{if(F){P(!0);try{let a=`/api/stock-report?branch_id=${F}`;t&&(a+=`&start_date=${t}`),v&&(a+=`&end_date=${v}`);let b=await fetch(a),c=await b.json();c.success&&(I(c.data.summary||[]),K(c.data.movements||[]),N(c.data.totals||null))}catch(a){console.error("Error fetching stock report:",a)}finally{P(!1)}}},[F,t,v]);(0,c.useEffect)(()=>{("stockReport"===a||"stockIn"===a||"stockOut"===a)&&R()},[a,R]);let S=J.filter(a=>"receive"===a.adjustment_type||"stock_receive"===a.adjustment_type||"addition"===a.adjustment_type||"increase"===a.adjustment_type||"manual_adjustment"===a.adjustment_type&&a.quantity>0||"transfer_in"===a.adjustment_type),T=J.filter(a=>"sale"===a.adjustment_type||"deduction"===a.adjustment_type||"decrease"===a.adjustment_type||"manual_adjustment"===a.adjustment_type&&a.quantity<0||"transfer_out"===a.adjustment_type||"transfer"===a.adjustment_type),U=a=>new Date(a).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),V=a=>({receive:"bg-green-100 text-green-800",stock_receive:"bg-green-100 text-green-800",addition:"bg-green-100 text-green-800",increase:"bg-green-100 text-green-800",sale:"bg-blue-100 text-blue-800",deduction:"bg-red-100 text-red-800",decrease:"bg-red-100 text-red-800",manual_adjustment:"bg-yellow-100 text-yellow-800",transfer_in:"bg-purple-100 text-purple-800",transfer_out:"bg-orange-100 text-orange-800",transfer:"bg-orange-100 text-orange-800"})[a]||"bg-gray-100 text-gray-800";return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-balance",children:"Inventory Management"}),(0,b.jsx)("p",{className:"mt-1 text-muted-foreground text-pretty",children:"Monitor and manage your stock levels"})]})}),"cards"===a&&(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(g.Card,{className:"rounded-2xl cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>d("stockReport"),children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Stock Report"}),(0,b.jsx)(p.FileText,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:"View Report"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Per tank stock summary"})]})]}),(0,b.jsxs)(g.Card,{className:"rounded-2xl cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>d("stockIn"),children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Stock In History"}),(0,b.jsx)(k.TrendingUp,{className:"h-4 w-4 text-green-600"})]}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[S.length," Entries"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Stock received & adjusted in"})]})]}),(0,b.jsxs)(g.Card,{className:"rounded-2xl cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>d("stockOut"),children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Stock Out History"}),(0,b.jsx)(m,{className:"h-4 w-4 text-red-600"})]}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[T.length," Entries"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Sales & deductions"})]})]}),(0,b.jsxs)(g.Card,{className:"rounded-2xl cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>d("tankManagement"),children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Tank Management"}),(0,b.jsx)(o.Fuel,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:"Manage Tanks"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Stock levels & transfers"})]})]})]}),"cards"===a&&L&&(0,b.jsxs)(g.Card,{className:"rounded-2xl",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Stock Summary"})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"p-4 bg-green-50 rounded-xl",children:[(0,b.jsx)("p",{className:"text-sm text-green-700",children:"Total Received"}),(0,b.jsxs)("p",{className:"text-xl font-bold text-green-800",children:[L.total_received.toLocaleString()," L"]})]}),(0,b.jsxs)("div",{className:"p-4 bg-blue-50 rounded-xl",children:[(0,b.jsx)("p",{className:"text-sm text-blue-700",children:"Total Sold"}),(0,b.jsxs)("p",{className:"text-xl font-bold text-blue-800",children:[L.total_sold.toLocaleString()," L"]})]}),(0,b.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-xl",children:[(0,b.jsx)("p",{className:"text-sm text-yellow-700",children:"Adjusted In/Out"}),(0,b.jsxs)("p",{className:"text-xl font-bold text-yellow-800",children:["+",L.total_adjusted_in.toLocaleString()," / -",L.total_adjusted_out.toLocaleString()," L"]})]}),(0,b.jsxs)("div",{className:"p-4 bg-purple-50 rounded-xl",children:[(0,b.jsx)("p",{className:"text-sm text-purple-700",children:"Current Stock"}),(0,b.jsxs)("p",{className:"text-xl font-bold text-purple-800",children:[L.current_stock.toLocaleString()," L"]})]})]})})]}),"stockReport"===a&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(f.Button,{variant:"outline",className:"rounded-xl bg-transparent",onClick:()=>d("cards"),children:"← Back to Overview"}),(0,b.jsxs)(f.Button,{variant:"outline",className:"rounded-xl",onClick:R,disabled:O,children:[(0,b.jsx)(q.RefreshCw,{className:`h-4 w-4 mr-2 ${O?"animate-spin":""}`}),"Refresh"]})]}),(0,b.jsxs)(g.Card,{className:"rounded-2xl",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Stock Report by Tank"})}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"w-64",children:[(0,b.jsx)(i.Label,{children:"Branch"}),(0,b.jsxs)(s.Select,{value:F,onValueChange:G,children:[(0,b.jsx)(s.SelectTrigger,{className:"rounded-xl",children:(0,b.jsx)(s.SelectValue,{placeholder:"Select branch"})}),(0,b.jsx)(s.SelectContent,{children:D.map(a=>(0,b.jsx)(s.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Start Date"}),(0,b.jsx)(h.Input,{type:"date",value:t,onChange:a=>u(a.target.value),className:"rounded-xl w-48"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"End Date"}),(0,b.jsx)(h.Input,{type:"date",value:v,onChange:a=>w(a.target.value),className:"rounded-xl w-48"})]})]}),O?(0,b.jsx)("div",{className:"text-center py-8",children:"Loading..."}):0===H.length?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:F?"No stock data found":"Select a branch to view report"}):(0,b.jsx)("div",{className:"rounded-xl border overflow-hidden",children:(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{children:"Tank"}),(0,b.jsx)(j.TableHead,{children:"Fuel Type"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Capacity"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Current Stock"}),(0,b.jsx)(j.TableHead,{className:"text-right text-green-700",children:"Received"}),(0,b.jsx)(j.TableHead,{className:"text-right text-yellow-700",children:"Adjusted +/-"}),(0,b.jsx)(j.TableHead,{className:"text-right text-blue-700",children:"Sold"}),(0,b.jsx)(j.TableHead,{className:"text-right text-purple-700",children:"Transferred In/Out"})]})}),(0,b.jsx)(j.TableBody,{children:H.map(a=>(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableCell,{className:"font-medium",children:a.tank_name}),(0,b.jsx)(j.TableCell,{children:a.fuel_type}),(0,b.jsxs)(j.TableCell,{className:"text-right",children:[Number(a.capacity).toLocaleString()," L"]}),(0,b.jsxs)(j.TableCell,{className:"text-right font-medium",children:[Number(a.current_stock).toLocaleString()," L"]}),(0,b.jsxs)(j.TableCell,{className:"text-right text-green-600",children:["+",Number(a.total_received).toLocaleString()]}),(0,b.jsxs)(j.TableCell,{className:"text-right text-yellow-600",children:["+",Number(a.total_adjusted_in).toLocaleString()," / -",Number(a.total_adjusted_out).toLocaleString()]}),(0,b.jsx)(j.TableCell,{className:"text-right text-blue-600",children:Number(a.total_sold).toLocaleString()}),(0,b.jsxs)(j.TableCell,{className:"text-right text-purple-600",children:["+",Number(a.total_transferred_in).toLocaleString()," / -",Number(a.total_transferred_out).toLocaleString()]})]},a.tank_id))})]})})]})]}),J.length>0&&(0,b.jsxs)(g.Card,{className:"rounded-2xl",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Recent Stock Movements"})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"rounded-xl border overflow-hidden",children:(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{children:"Date"}),(0,b.jsx)(j.TableHead,{children:"Tank"}),(0,b.jsx)(j.TableHead,{children:"Type"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Quantity"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Before"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"After"}),(0,b.jsx)(j.TableHead,{children:"Reason"}),(0,b.jsx)(j.TableHead,{children:"KRA Status"})]})}),(0,b.jsx)(j.TableBody,{children:J.slice(0,20).map(a=>(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableCell,{className:"text-sm",children:U(a.created_at)}),(0,b.jsx)(j.TableCell,{className:"font-medium",children:a.tank_name}),(0,b.jsx)(j.TableCell,{children:(0,b.jsx)(y.Badge,{className:V(a.adjustment_type),children:a.adjustment_type.replace(/_/g," ")})}),(0,b.jsxs)(j.TableCell,{className:`text-right font-medium ${a.quantity>=0?"text-green-600":"text-red-600"}`,children:[a.quantity>=0?"+":"",Number(a.quantity).toLocaleString()]}),(0,b.jsx)(j.TableCell,{className:"text-right",children:Number(a.previous_stock).toLocaleString()}),(0,b.jsx)(j.TableCell,{className:"text-right",children:Number(a.new_stock).toLocaleString()}),(0,b.jsx)(j.TableCell,{className:"text-sm text-muted-foreground max-w-[200px] truncate",children:a.reason||"-"}),(0,b.jsx)(j.TableCell,{children:"synced"===a.kra_sync_status?(0,b.jsx)(y.Badge,{className:"bg-green-100 text-green-800",children:"Synced"}):"failed"===a.kra_sync_status?(0,b.jsx)(y.Badge,{className:"bg-red-100 text-red-800",children:"Failed"}):(0,b.jsx)(y.Badge,{className:"bg-gray-100 text-gray-600",children:"Pending"})})]},a.id))})]})})})]})]}),("stockIn"===a||"stockOut"===a)&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(f.Button,{variant:"outline",className:"rounded-xl bg-transparent",onClick:()=>d("cards"),children:"← Back to Overview"}),(0,b.jsxs)(f.Button,{variant:"outline",className:"rounded-xl",onClick:R,disabled:O,children:[(0,b.jsx)(q.RefreshCw,{className:`h-4 w-4 mr-2 ${O?"animate-spin":""}`}),"Refresh"]})]}),(0,b.jsxs)(g.Card,{className:"rounded-2xl",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"stockIn"===a?"Stock In History":"Stock Out History"})}),(0,b.jsxs)(g.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"w-64",children:[(0,b.jsx)(i.Label,{children:"Branch"}),(0,b.jsxs)(s.Select,{value:F,onValueChange:G,children:[(0,b.jsx)(s.SelectTrigger,{className:"rounded-xl",children:(0,b.jsx)(s.SelectValue,{placeholder:"Select branch"})}),(0,b.jsx)(s.SelectContent,{children:D.map(a=>(0,b.jsx)(s.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(i.Label,{children:"Search"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(h.Input,{placeholder:"Search by tank or reason...",value:e,onChange:a=>l(a.target.value),className:"pl-9 rounded-xl"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"Start Date"}),(0,b.jsx)(h.Input,{type:"date",value:t,onChange:a=>u(a.target.value),className:"rounded-xl w-48"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{children:"End Date"}),(0,b.jsx)(h.Input,{type:"date",value:v,onChange:a=>w(a.target.value),className:"rounded-xl w-48"})]})]}),O?(0,b.jsx)("div",{className:"text-center py-8",children:"Loading..."}):(0,b.jsx)("div",{className:"rounded-xl border overflow-hidden",children:(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{children:"Date"}),(0,b.jsx)(j.TableHead,{children:"Tank"}),(0,b.jsx)(j.TableHead,{children:"Fuel Type"}),(0,b.jsx)(j.TableHead,{children:"Type"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Quantity"}),(0,b.jsx)(j.TableHead,{children:"Reason"}),(0,b.jsx)(j.TableHead,{children:"KRA Status"})]})}),(0,b.jsxs)(j.TableBody,{children:[("stockIn"===a?S:T).filter(a=>""===e||a.tank_name?.toLowerCase().includes(e.toLowerCase())||a.reason?.toLowerCase().includes(e.toLowerCase())).map(c=>(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableCell,{className:"text-sm",children:U(c.created_at)}),(0,b.jsx)(j.TableCell,{className:"font-medium",children:c.tank_name}),(0,b.jsx)(j.TableCell,{children:c.fuel_type}),(0,b.jsx)(j.TableCell,{children:(0,b.jsx)(y.Badge,{className:V(c.adjustment_type),children:c.adjustment_type.replace(/_/g," ")})}),(0,b.jsxs)(j.TableCell,{className:`text-right font-medium ${"stockIn"===a?"text-green-600":"text-red-600"}`,children:["stockIn"===a?"+":"-",Math.abs(Number(c.quantity)).toLocaleString()," L"]}),(0,b.jsx)(j.TableCell,{className:"text-sm text-muted-foreground max-w-[200px] truncate",children:c.reason||"-"}),(0,b.jsx)(j.TableCell,{children:"synced"===c.kra_sync_status?(0,b.jsx)(y.Badge,{className:"bg-green-100 text-green-800",children:"Synced"}):"failed"===c.kra_sync_status?(0,b.jsx)(y.Badge,{className:"bg-red-100 text-red-800",children:"Failed"}):(0,b.jsx)(y.Badge,{className:"bg-gray-100 text-gray-600",children:"Pending"})})]},c.id)),0===("stockIn"===a?S:T).length&&(0,b.jsx)(j.TableRow,{children:(0,b.jsx)(j.TableCell,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:F?"No stock movements found":"Select a branch to view history"})})]})]})})]})]})]}),"tankManagement"===a&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsx)(f.Button,{variant:"outline",className:"rounded-xl bg-transparent",onClick:()=>d("cards"),children:"← Back to Overview"})}),(0,b.jsx)(M,{branchId:(()=>{try{let a=localStorage.getItem("selectedBranch");if(!a)return"";return JSON.parse(a).id||""}catch{return""}})()})]})]})}function O(){let[a,f]=(0,c.useState)(!1);return(0,b.jsxs)("div",{className:"flex min-h-screen bg-gradient-to-b from-slate-900 via-blue-900 to-white",children:[(0,b.jsx)(d.DashboardSidebar,{collapsed:a,onToggle:()=>f(!a)}),(0,b.jsx)("div",{className:"flex-1 flex flex-col ml-8 my-6 mr-6",children:(0,b.jsxs)("div",{className:"bg-white rounded-tl-3xl shadow-2xl flex-1 flex flex-col overflow-hidden",children:[(0,b.jsx)(e.DashboardHeader,{}),(0,b.jsx)("main",{className:"flex-1 overflow-y-auto bg-slate-50 p-6",children:(0,b.jsxs)("div",{className:"mx-auto max-w-7xl space-y-6",children:[(0,b.jsx)(N,{}),(0,b.jsxs)("footer",{className:"mt-12 border-t pt-6 pb-4 text-center text-sm text-muted-foreground",children:["Powered by ",(0,b.jsx)("span",{className:"font-semibold text-foreground",children:"Sensile Technologies East Africa Ltd"})]})]})})]})})]})}A(L("bounce",!0)),A(L("slide",!0)),A(L("zoom")),A(L("flip")),a.s(["default",()=>O],1194)}];

//# sourceMappingURL=app_inventory_page_tsx_062fe4aa._.js.map