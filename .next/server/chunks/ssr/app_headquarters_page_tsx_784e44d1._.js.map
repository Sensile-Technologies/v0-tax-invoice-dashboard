{"version":3,"sources":["../../../../app/headquarters/page.tsx","../../../../components/global-shift-upload-dialog.tsx"],"sourcesContent":["\"use client\"\nimport { DashboardHeader } from \"@/components/dashboard-header\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport {\n  Edit,\n  Shield,\n  CheckCircle2,\n  Building2,\n  TrendingUp,\n  Users,\n  ShoppingCart,\n  Plus,\n  ChevronDown,\n  Package,\n  Upload,\n  DollarSign,\n  Clock,\n  FileText,\n} from \"lucide-react\"\n\nimport { useState, useEffect } from \"react\" // Added useEffect\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n  DialogTrigger,\n} from \"@/components/ui/dialog\" // Added DialogFooter\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n  DropdownMenuSub,\n  DropdownMenuSubTrigger,\n  DropdownMenuSubContent,\n} from \"@/components/ui/dropdown-menu\" // Added DropdownMenuSub components\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { useRouter } from \"next/navigation\"\n\nimport { GlobalShiftUploadDialog } from \"@/components/global-shift-upload-dialog\"\nimport { useCurrency } from \"@/lib/currency-utils\" // Added useCurrency hook\nimport { getCurrentUser } from \"@/lib/auth/client\"\n\nconst branchesData = [\n  {\n    id: \"nairobi\",\n    name: \"Nairobi Branch\",\n    location: \"Nairobi, Kenya\",\n    status: \"Active\",\n    revenue: 4250000,\n    employees: 25,\n    performance: \"+12.5%\",\n    gradient: \"from-blue-600 via-blue-500 to-cyan-400\",\n    transactions: 1245,\n    inventory: 342,\n  },\n]\n\nconst orgRevenue = [\n  { month: \"Jan\", revenue: 9200000 },\n  { month: \"Feb\", revenue: 9850000 },\n  { month: \"Mar\", revenue: 10300000 },\n  { month: \"Apr\", revenue: 10950000 },\n  { month: \"May\", revenue: 11200000 },\n  { month: \"Jun\", revenue: 11710000 },\n]\n\nconst branchPerformance = [{ branch: \"Nairobi\", sales: 4250, purchases: 2890 }]\n\nexport default function HeadquartersPage() {\n  const router = useRouter()\n  const [createBranchOpen, setCreateBranchOpen] = useState(false)\n  const [editBranchOpen, setEditBranchOpen] = useState(false)\n  const [inventoryOpen, setInventoryOpen] = useState(false)\n  const [editingBranch, setEditingBranch] = useState<any>(null)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n\n  const [globalUploadsOpen, setGlobalUploadsOpen] = useState(false)\n  const [uploadFile, setUploadFile] = useState<File | null>(null)\n\n  const [branches, setBranches] = useState<any[]>([])\n  const [isLoadingBranches, setIsLoadingBranches] = useState(true)\n\n  const [globalShiftUploadOpen, setGlobalShiftUploadOpen] = useState(false) // Added globalShiftUploadOpen state\n\n  const { formatCurrency } = useCurrency()\n\n  useEffect(() => {\n    fetchBranches()\n  }, [])\n\n  const fetchBranches = async () => {\n    try {\n      setIsLoadingBranches(true)\n      const currentUser = getCurrentUser()\n      const userId = currentUser?.id\n      const url = userId ? `/api/branches/list?user_id=${userId}` : \"/api/branches/list\"\n      const response = await fetch(url)\n\n      if (response.ok) {\n        const data = await response.json()\n        const formattedBranches = data.map((branch: any) => ({\n          id: branch.id,\n          name: branch.name,\n          location: branch.location,\n          status: branch.status.charAt(0).toUpperCase() + branch.status.slice(1),\n          revenue: branch.monthly_revenue || 4250000,\n          monthToDateRevenue: branch.mtd_revenue || 2450000,\n          currentShiftRevenue: branch.current_shift_revenue || 145000,\n          transactions: branch.transactions || 1245,\n          inventory: branch.inventory || 342,\n          performance: branch.performance || \"+12.5%\",\n          gradient: \"from-blue-600 via-blue-500 to-cyan-400\",\n          manager: branch.manager,\n          phone: branch.phone,\n          email: branch.email,\n          bhfId: branch.bhf_id,\n          tankConfig: branch.tank_config || {},\n          storageIndices: branch.storage_indices || [],\n          device_token: branch.device_token,\n        }))\n        setBranches(formattedBranches)\n      } else {\n        console.error(\"Failed to fetch branches:\", response.status)\n      }\n    } catch (error) {\n      console.error(\"Error fetching branches:\", error)\n    } finally {\n      setIsLoadingBranches(false)\n    }\n  }\n\n  const handleGlobalUpload = async () => {\n    if (!uploadFile) return\n\n    try {\n      // Process the uploaded file for dispenser and tank readings\n      const formData = new FormData()\n      formData.append(\"file\", uploadFile)\n\n      const response = await fetch(\"/api/global-uploads\", {\n        method: \"POST\",\n        body: formData,\n      })\n\n      if (response.ok) {\n        alert(\"File uploaded successfully!\")\n        setGlobalUploadsOpen(false)\n        setUploadFile(null)\n      } else {\n        alert(\"Failed to upload file\")\n      }\n    } catch (error) {\n      console.error(\"Upload error:\", error)\n      alert(\"Error uploading file\")\n    }\n  }\n\n  const [branchForm, setBranchForm] = useState({\n    name: \"\",\n    location: \"\",\n    manager: \"\",\n    phone: \"\",\n    email: \"\",\n    address: \"\",\n    county: \"\",\n    localTaxOffice: \"\",\n    hardwareType: \"\",\n    serialNumber: \"\",\n    storageIndices: [] as string[],\n    newStorageIndex: \"\",\n    tankConfig: {} as Record<\n      string,\n      { dispensers: string[]; initialStock: string; fuelType?: string; tankCapacity?: string }\n    >,\n  })\n\n  const totalRevenue = branches.reduce((sum, branch) => sum + branch.revenue, 0)\n  const totalTransactions = branches.reduce((sum, branch) => sum + branch.transactions, 0)\n  const totalInventory = branches.reduce((sum, branch) => sum + branch.inventory, 0)\n\n  const handleBranchClick = (branchId: string) => {\n    if (branchId === \"hq\") {\n      router.push(\"/headquarters\")\n    } else {\n      // Navigate to sales page with branch context (can be expanded to dedicated branch pages)\n      router.push(`/sales?branch=${branchId}`)\n    }\n  }\n\n  const handleOpenCreateDialog = () => {\n    setBranchForm({\n      name: \"\",\n      location: \"\",\n      manager: \"\",\n      email: \"\",\n      phone: \"\",\n      address: \"\",\n      county: \"\",\n      localTaxOffice: \"\",\n      hardwareType: \"\",\n      serialNumber: \"\",\n      storageIndices: [],\n      newStorageIndex: \"\",\n      tankConfig: {},\n    })\n    setCreateBranchOpen(true)\n  }\n\n  const handleCreateBranch = async () => {\n    if (\n      !branchForm.name ||\n      !branchForm.location ||\n      !branchForm.county ||\n      !branchForm.localTaxOffice\n    ) {\n      alert(\"Please fill in all required fields (Branch Name, Location, County, Local Tax Office)\")\n      return\n    }\n\n    setIsSubmitting(true)\n    try {\n      const branchRes = await fetch('/api/branches', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          name: branchForm.name,\n          location: branchForm.location,\n          manager: branchForm.manager,\n          email: branchForm.email,\n          phone: branchForm.phone,\n          status: \"active\",\n          storage_indices: branchForm.storageIndices,\n          county: branchForm.county,\n          address: branchForm.address,\n          local_tax_office: branchForm.localTaxOffice,\n        })\n      })\n      \n      const branchResult = await branchRes.json()\n\n      if (!branchResult.success) {\n        console.error(\"[v0] Branch creation error:\", branchResult.error)\n        alert(`Branch creation failed: ${branchResult.error}`)\n        setIsSubmitting(false)\n        return\n      }\n\n      console.log(\"[v0] Branch created:\", branchResult.data)\n      const createdBranch = branchResult.data\n\n      const dispenserFuelTypes = new Map<number, Set<string>>()\n      const tanksToCreate: any[] = []\n\n      Object.entries(branchForm.tankConfig).forEach(([storageIndex, config]) => {\n        const tankConfig = config as {\n          dispensers: string[]\n          initialStock: string\n          fuelType?: string\n          tankCapacity?: string\n        }\n\n        const fuelType = tankConfig.fuelType || \"Petrol\"\n\n        tanksToCreate.push({\n          branch_id: createdBranch.id,\n          tank_name: storageIndex,\n          fuel_type: fuelType,\n          capacity: Number.parseFloat(tankConfig.tankCapacity || \"0\"),\n          current_stock: Number.parseFloat(tankConfig.initialStock || \"0\"),\n          status: \"active\",\n        })\n\n        tankConfig.dispensers.forEach((dispenserName) => {\n          const dispenserNumber = Number.parseInt(dispenserName.replace(/\\D/g, \"\")) || dispenserFuelTypes.size + 1\n          if (!dispenserFuelTypes.has(dispenserNumber)) {\n            dispenserFuelTypes.set(dispenserNumber, new Set())\n          }\n          dispenserFuelTypes.get(dispenserNumber)!.add(fuelType)\n        })\n      })\n\n      const dispensersToCreate = Array.from(dispenserFuelTypes.entries()).map(([dispenserNumber, fuelTypes]) => ({\n        branch_id: createdBranch.id,\n        dispenser_number: dispenserNumber,\n        fuel_type: Array.from(fuelTypes)[0],\n        status: \"active\",\n      }))\n\n      if (tanksToCreate.length > 0) {\n        for (const tank of tanksToCreate) {\n          await fetch('/api/tanks', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(tank)\n          })\n        }\n        console.log(\"[v0] Tanks created:\", tanksToCreate)\n      }\n\n      let nozzlesCreatedCount = 0\n      if (dispensersToCreate.length > 0) {\n        console.log(\"[v0] Creating dispensers:\", { dispensersToCreate })\n        const createdDispensers: any[] = []\n        \n        for (const dispenser of dispensersToCreate) {\n          const dispRes = await fetch('/api/dispensers', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(dispenser)\n          })\n          const dispResult = await dispRes.json()\n          if (dispResult.success) {\n            createdDispensers.push(dispResult.data)\n          }\n        }\n\n        console.log(\"[v0] Dispensers created:\", createdDispensers)\n\n        const nozzlesToCreate: any[] = []\n        createdDispensers.forEach((dispenser: any) => {\n          const fuelTypes = dispenserFuelTypes.get(dispenser.dispenser_number)\n          if (fuelTypes) {\n            let nozzleNumber = 1\n            fuelTypes.forEach((fuelType) => {\n              nozzlesToCreate.push({\n                branch_id: createdBranch.id,\n                dispenser_id: dispenser.id,\n                nozzle_number: nozzleNumber++,\n                fuel_type: fuelType,\n                initial_meter_reading: 0,\n                status: \"active\",\n              })\n            })\n          }\n        })\n\n        if (nozzlesToCreate.length > 0) {\n          console.log(\"[v0] Creating nozzles:\", { nozzlesToCreate })\n          for (const nozzle of nozzlesToCreate) {\n            await fetch('/api/nozzles', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify(nozzle)\n            })\n          }\n          nozzlesCreatedCount = nozzlesToCreate.length\n        }\n      }\n\n      try {\n        const backendResponse = await fetch(\"/api/branches/register-backend\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            branchId: createdBranch.id,\n            name: branchForm.name,\n            location: branchForm.location,\n            county: branchForm.county,\n            address: branchForm.address,\n            organization: process.env.NEXT_PUBLIC_ORGANIZATION_ID,\n          }),\n        })\n\n        const backendData = await backendResponse.json()\n\n        if (backendResponse.ok && backendData.success) {\n          alert(\n            `Branch \"${branchForm.name}\" created successfully!\\n` +\n              `Local database entry created\\n` +\n              `${tanksToCreate.length} tank(s) created\\n` +\n              `${dispensersToCreate.length} dispenser(s) created\\n` +\n              `${nozzlesCreatedCount} nozzle(s) created\\n` +\n              `Backend registration completed`,\n          )\n        } else {\n          alert(\n            `Branch \"${branchForm.name}\" created successfully!\\n` +\n              `Local database entry created\\n` +\n              `${tanksToCreate.length} tank(s) created\\n` +\n              `${dispensersToCreate.length} dispenser(s) created\\n` +\n              `${nozzlesCreatedCount} nozzle(s) created\\n` +\n              `Backend registration failed (can be retried later)`,\n          )\n        }\n      } catch (backendError) {\n        console.log(\"[v0] Backend registration failed:\", backendError)\n        alert(\n          `Branch \"${branchForm.name}\" created successfully!\\n` +\n            `Local database entry created\\n` +\n            `${tanksToCreate.length} tank(s) created\\n` +\n            `${dispensersToCreate.length} dispenser(s) created\\n` +\n            `${nozzlesCreatedCount} nozzle(s) created\\n` +\n            `Backend registration unavailable (can be retried later)`,\n        )\n      }\n\n      setCreateBranchOpen(false)\n      setBranchForm({\n        name: \"\",\n        location: \"\",\n        manager: \"\",\n        email: \"\",\n        phone: \"\",\n        address: \"\",\n        county: \"\",\n        localTaxOffice: \"\",\n        hardwareType: \"\",\n        serialNumber: \"\",\n        storageIndices: [],\n        newStorageIndex: \"\",\n        tankConfig: {},\n      })\n      await fetchBranches()\n    } catch (error: any) {\n      console.error(\"Error creating branch:\", error)\n      alert(`Branch creation failed: ${error.message || \"Unknown error\"}`)\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const handleEditBranch = (branch: any) => {\n    console.log(\"[v0] Opening edit dialog for branch:\", branch)\n    const latestBranch = branches.find((b) => b.id === branch.id)\n    setEditingBranch(latestBranch || branch)\n    setBranchForm({\n      name: branch.name || \"\",\n      location: branch.location || \"\",\n      manager: branch.manager || \"\",\n      email: branch.email || \"\",\n      phone: branch.phone || \"\",\n      address: branch.address || \"\",\n      county: branch.county || \"\",\n      localTaxOffice: branch.local_tax_office || \"\",\n      hardwareType: \"\",\n      serialNumber: \"\",\n      storageIndices: branch.storage_indices || [],\n      newStorageIndex: \"\",\n      tankConfig: branch.tank_config || {},\n    })\n    setEditBranchOpen(true)\n  }\n\n  const handleUpdateBranch = async () => {\n    if (!editingBranch) return\n    console.log(\"[v0] Updating branch:\", editingBranch.id, branchForm)\n\n    // Basic validation for essential fields\n    if (\n      !branchForm.name ||\n      !branchForm.location ||\n      !branchForm.county ||\n      !branchForm.localTaxOffice\n    ) {\n      alert(\"Please fill in all required fields (Branch Name, Location, County, Local Tax Office)\")\n      return\n    }\n\n    try {\n      const response = await fetch(`/api/branches/${editingBranch.id}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          name: branchForm.name,\n          location: branchForm.location,\n          manager: branchForm.manager,\n          email: branchForm.email,\n          phone: branchForm.phone,\n          address: branchForm.address,\n          county: branchForm.county,\n          localTaxOffice: branchForm.localTaxOffice,\n          storageIndices: branchForm.storageIndices,\n          tankConfig: branchForm.tankConfig,\n        }),\n      })\n\n      if (response.ok) {\n        alert(\"Branch updated successfully!\")\n        setEditBranchOpen(false)\n        setEditingBranch(null)\n        await fetchBranches() // Refresh the list of branches\n      } else {\n        const errorData = await response.json()\n        console.error(\"Update error:\", errorData)\n        alert(`Failed to update branch: ${errorData.error || \"Unknown error\"}`)\n      }\n    } catch (error) {\n      console.error(\"Error updating branch:\", error)\n      alert(\"Error updating branch. Please try again.\")\n    }\n  }\n\n  const handleDeleteBranch = async (branchId: string, branchName: string) => {\n    if (!confirm(`Are you sure you want to delete the branch \"${branchName}\"? This action cannot be undone.`)) {\n      return\n    }\n\n    try {\n      const response = await fetch(`/api/branches/${branchId}`, {\n        method: \"DELETE\",\n      })\n\n      if (response.ok) {\n        alert(`Branch \"${branchName}\" deleted successfully!`)\n        await fetchBranches() // Refresh the list of branches\n      } else {\n        const errorData = await response.json()\n        console.error(\"Delete error:\", errorData)\n        alert(`Failed to delete branch: ${errorData.error || \"Unknown error\"}`)\n      }\n    } catch (error) {\n      console.error(\"Error deleting branch:\", error)\n      alert(\"Error deleting branch. Please try again.\")\n    }\n  }\n\n  const handleDeactivateBranch = async (branchId: string, branchName: string) => {\n    const currentBranch = branches.find((b) => b.id === branchId)\n    const currentStatus = currentBranch?.status || \"active\"\n    const newStatus = currentStatus === \"active\" ? \"inactive\" : \"active\"\n    const confirmationMessage =\n      newStatus === \"inactive\"\n        ? `Are you sure you want to deactivate the branch \"${branchName}\"?`\n        : `Are you sure you want to activate the branch \"${branchName}\"?`\n\n    if (!confirm(confirmationMessage)) {\n      return\n    }\n\n    try {\n      const response = await fetch(`/api/branches/${branchId}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ status: newStatus }),\n      })\n\n      if (response.ok) {\n        const message = newStatus === \"inactive\" ? \"deactivated\" : \"activated\"\n        alert(`Branch \"${branchName}\" ${message} successfully!`)\n        await fetchBranches()\n        const updatedBranch = branches.find((b) => b.id === branchId)\n        if (updatedBranch) {\n          setEditingBranch({ ...updatedBranch, status: newStatus })\n        }\n      } else {\n        const errorData = await response.json()\n        console.error(\"Status update error:\", errorData)\n        alert(\n          `Failed to ${newStatus === \"inactive\" ? \"deactivate\" : \"activate\"} branch: ${errorData.error || \"Unknown error\"}`,\n        )\n      }\n    } catch (error) {\n      console.error(\"Error updating branch status:\", error)\n      alert(`Error updating branch status. Please try again.`)\n    }\n  }\n\n  return (\n    <div className=\"flex h-screen flex-col overflow-hidden bg-gradient-to-b from-slate-900 via-blue-900 to-white\">\n      <DashboardHeader currentBranch=\"hq\" />\n\n      <main className=\"flex-1 overflow-y-auto p-8\">\n        {/* Header Section */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h1 className=\"text-3xl font-bold tracking-tight text-balance text-white\">Headquarters Overview</h1>\n            <p className=\"mt-1 text-white/80 text-pretty\">Monitor all branches and organization performance</p>\n          </div>\n          <div className=\"flex gap-3\">\n            {/* Branches Dropdown */}\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button variant=\"outline\" className=\"rounded-xl bg-white hover:bg-gray-50\">\n                  <Building2 className=\"mr-2 h-4 w-4\" />\n                  Branches\n                  <ChevronDown className=\"ml-2 h-4 w-4\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\" className=\"w-56 rounded-xl\">\n                <DropdownMenuItem onSelect={() => setCreateBranchOpen(true)} className=\"cursor-pointer rounded-lg\">\n                  <Plus className=\"mr-2 h-4 w-4\" />\n                  Create Branch\n                </DropdownMenuItem>\n                <DropdownMenuSub>\n                  <DropdownMenuSubTrigger className=\"cursor-pointer rounded-lg\">\n                    <Edit className=\"mr-2 h-4 w-4\" />\n                    Edit Branch Details\n                  </DropdownMenuSubTrigger>\n                  <DropdownMenuSubContent className=\"rounded-xl\">\n                    {branches.map((branch) => (\n                      <DropdownMenuItem\n                        key={branch.id}\n                        onSelect={() => handleEditBranch(branch)}\n                        className=\"cursor-pointer rounded-lg\"\n                      >\n                        {branch.name}\n                      </DropdownMenuItem>\n                    ))}\n                  </DropdownMenuSubContent>\n                </DropdownMenuSub>\n                <DropdownMenuItem\n                  onSelect={() => router.push(\"/headquarters/inventory\")}\n                  className=\"cursor-pointer rounded-lg\"\n                >\n                  <Package className=\"mr-2 h-4 w-4\" />\n                  Inventory\n                </DropdownMenuItem>\n                <DropdownMenuItem onSelect={() => setGlobalUploadsOpen(true)} className=\"cursor-pointer rounded-lg\">\n                  <Upload className=\"mr-2 h-4 w-4\" />\n                  Global Uploads\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n\n            {/* Users Dropdown */}\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button variant=\"outline\" className=\"gap-2 rounded-xl bg-white hover:bg-gray-50\">\n                  <Users className=\"h-4 w-4\" />\n                  Users\n                  <ChevronDown className=\"h-4 w-4\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\" className=\"w-56 rounded-xl\">\n                <DropdownMenuItem asChild className=\"cursor-pointer rounded-lg\">\n                  <a href=\"/headquarters/staff-management\" className=\"flex items-center gap-2\">\n                    <Users className=\"h-4 w-4\" />\n                    Staff Management\n                  </a>\n                </DropdownMenuItem>\n                <DropdownMenuItem asChild className=\"cursor-pointer rounded-lg\">\n                  <a href=\"/headquarters/roles\" className=\"flex items-center gap-2\">\n                    <Shield className=\"h-4 w-4\" />\n                    Roles & Permissions\n                  </a>\n                </DropdownMenuItem>\n                <DropdownMenuItem asChild className=\"cursor-pointer rounded-lg\">\n                  <a href=\"/headquarters/approvals\" className=\"flex items-center gap-2\">\n                    <CheckCircle2 className=\"h-4 w-4\" />\n                    Approval Workflows\n                  </a>\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button variant=\"outline\" className=\"rounded-xl bg-white hover:bg-gray-50\">\n                  <Clock className=\"mr-2 h-4 w-4\" />\n                  Shift Management\n                  <ChevronDown className=\"ml-2 h-4 w-4\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\" className=\"w-56 rounded-xl\">\n                <DropdownMenuItem onSelect={() => setGlobalShiftUploadOpen(true)} className=\"cursor-pointer rounded-lg\">\n                  <Upload className=\"mr-2 h-4 w-4\" />\n                  Global Shift Upload\n                </DropdownMenuItem>\n                <DropdownMenuItem asChild className=\"cursor-pointer rounded-lg\">\n                  <a href=\"/reports/shifts\">\n                    <FileText className=\"mr-2 h-4 w-4\" />\n                    View Shift Reports\n                  </a>\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n        </div>\n\n        {/* Organization Summary */}\n        <div className=\"mb-8\">\n          <h2 className=\"text-xl font-semibold mb-4 text-white\">Organization Summary</h2>\n          <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-4\">\n            <Card className=\"rounded-2xl\">\n              <CardHeader className=\"pb-3\">\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle className=\"text-sm font-medium text-gray-600\">Total Revenue</CardTitle>\n                  <div className=\"flex h-9 w-9 items-center justify-center rounded-xl bg-blue-100\">\n                    <Package className=\"h-5 w-5 text-blue-600\" />\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{formatCurrency(totalRevenue)}</div>\n                <p className=\"text-xs text-green-600 mt-1\">+10.8% from last month</p>\n              </CardContent>\n            </Card>\n            <Card className=\"rounded-2xl\">\n              <CardHeader className=\"pb-3\">\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle className=\"text-sm font-medium text-gray-600\">Transactions</CardTitle>\n                  <div className=\"flex h-9 w-9 items-center justify-center rounded-xl bg-purple-100\">\n                    <ShoppingCart className=\"h-5 w-5 text-purple-600\" />\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{totalTransactions.toLocaleString()}</div>\n                <p className=\"text-xs text-gray-600 mt-1\">Across all branches</p>\n              </CardContent>\n            </Card>\n            <Card className=\"rounded-2xl\">\n              <CardHeader className=\"pb-3\">\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle className=\"text-sm font-medium text-gray-600\">Total Employees</CardTitle>\n                  <div className=\"flex h-9 w-9 items-center justify-center rounded-xl bg-orange-100\">\n                    <Users className=\"h-5 w-5 text-orange-600\" />\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{branches.length}</div>\n                <p className=\"text-xs text-gray-600 mt-1\">In {branches.length} branches</p>\n              </CardContent>\n            </Card>\n            <Card className=\"rounded-2xl\">\n              <CardHeader className=\"pb-3\">\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle className=\"text-sm font-medium text-gray-600\">Inventory Items</CardTitle>\n                  <div className=\"flex h-9 w-9 items-center justify-center rounded-xl bg-green-100\">\n                    <Package className=\"h-5 w-5 text-green-600\" />\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{totalInventory}</div>\n                <p className=\"text-xs text-green-600 mt-1\">+7.3% stock increase</p>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n\n        {/* Performance Analytics */}\n        <div className=\"mb-8\">\n          <h2 className=\"text-xl font-semibold mb-4 text-white\">Performance Analytics</h2>\n          <div className=\"grid gap-6 lg:grid-cols-2\">\n            <Card className=\"rounded-2xl\">\n              <CardHeader>\n                <CardTitle>Organization Revenue Trend</CardTitle>\n                <CardDescription>Monthly revenue across all branches</CardDescription>\n              </CardHeader>\n              <CardContent className=\"px-2\">\n                {/* ChartContainer component is assumed to be defined elsewhere */}\n                <div className=\"h-[300px] w-full\">\n                  {/* LineChart component is assumed to be defined elsewhere */}\n                  <div className=\"h-full w-full\">{/* Chart rendering logic */}</div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Branch Performance Comparison */}\n            <Card className=\"rounded-2xl\">\n              <CardHeader>\n                <CardTitle>Branch Performance Comparison</CardTitle>\n                <CardDescription>Sales vs Purchases by branch</CardDescription>\n              </CardHeader>\n              <CardContent className=\"px-2\">\n                {/* ChartContainer component is assumed to be defined elsewhere */}\n                <div className=\"h-[300px] w-full\">\n                  {/* BarChart component is assumed to be defined elsewhere */}\n                  <div className=\"h-full w-full\">{/* Chart rendering logic */}</div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n\n        {/* Branches */}\n        {isLoadingBranches ? (\n          <div className=\"text-center py-12 text-white\">\n            <p>Loading branches...</p>\n          </div>\n        ) : branches.length === 0 ? (\n          <div className=\"text-center py-12 text-white\">\n            <p>No branches found. Create your first branch to get started.</p>\n          </div>\n        ) : (\n          <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n            {branches.map((branch) => (\n              <Card\n                key={branch.id}\n                onClick={() => handleBranchClick(branch.id)}\n                className=\"rounded-2xl hover:shadow-xl transition-all duration-300 cursor-pointer overflow-hidden group hover:scale-105\"\n              >\n                <div className={`h-3 bg-gradient-to-r ${branch.gradient}`} />\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex flex-col gap-2\">\n                      <div\n                        className={`flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br ${branch.gradient} shadow-lg`}\n                      >\n                        <Building2 className=\"h-6 w-6 text-white\" />\n                      </div>\n                      <div>\n                        <CardTitle className=\"group-hover:text-blue-600 transition-colors text-base\">\n                          {branch.name}\n                        </CardTitle>\n                        <CardDescription className=\"text-xs\">{branch.location}</CardDescription>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <div\n                        className={`rounded-full text-xs px-2 py-1 ${branch.status === \"active\" ? \"bg-green-100 text-green-800\" : \"bg-red-100 text-red-800\"}`}\n                      >\n                        {branch.status}\n                      </div>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        className=\"h-8 w-8 p-0\"\n                        onClick={(e) => {\n                          e.stopPropagation()\n                          handleEditBranch(branch)\n                        }}\n                      >\n                        <Edit className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    <div className=\"flex justify-between items-center\">\n                      <div className=\"flex items-center gap-1 text-gray-600 text-xs\">\n                        <Package className=\"h-3 w-3\" />\n                        MTD Revenue\n                      </div>\n                      <div className=\"font-semibold text-sm\">{formatCurrency(branch.monthToDateRevenue)}</div>\n                    </div>\n                    <div className=\"flex justify-between items-center\">\n                      <div className=\"flex items-center gap-1 text-gray-600 text-xs\">\n                        <DollarSign className=\"h-3 w-3\" /> {/* Changed from Users to DollarSign */}\n                        Current Shift\n                      </div>\n                      <div className=\"font-semibold text-sm\">{formatCurrency(branch.currentShiftRevenue)}</div>\n                    </div>\n                    <div className=\"flex justify-between items-center\">\n                      <div className=\"flex items-center gap-1 text-gray-600 text-xs\">\n                        <TrendingUp className=\"h-3 w-3\" />\n                        Growth\n                      </div>\n                      <div className=\"font-semibold text-sm text-green-600\">{branch.performance}</div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </main>\n\n      {/* Create Branch Dialog */}\n      <Dialog open={createBranchOpen} onOpenChange={setCreateBranchOpen}>\n        <DialogTrigger asChild>\n          <Button onClick={handleOpenCreateDialog} size=\"lg\" className=\"rounded-xl shadow-lg\">\n            <Plus className=\"h-5 w-5 mr-2\" />\n            Create New Branch\n          </Button>\n        </DialogTrigger>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto rounded-2xl\">\n          <DialogHeader>\n            <DialogTitle className=\"text-2xl\">Create New Branch</DialogTitle>\n            <DialogDescription>\n              Fill in the details to create a new branch location with device initialization\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"grid gap-4 py-4\">\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-semibold\">Branch Information</h3>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"branch-name\">Branch Name *</Label>\n                  <Input\n                    id=\"branch-name\"\n                    placeholder=\"e.g., Mombasa Branch\"\n                    value={branchForm.name}\n                    onChange={(e) => setBranchForm({ ...branchForm, name: e.target.value })}\n                    className=\"rounded-xl\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"location\">Location *</Label>\n                  <Input\n                    id=\"location\"\n                    placeholder=\"e.g., Mombasa, Kenya\"\n                    value={branchForm.location}\n                    onChange={(e) => setBranchForm({ ...branchForm, location: e.target.value })}\n                    className=\"rounded-xl\"\n                  />\n                </div>\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"address\">Physical Address</Label>\n                <Input\n                  id=\"address\"\n                  placeholder=\"Street address, building, floor\"\n                  value={branchForm.address}\n                  onChange={(e) => setBranchForm({ ...branchForm, address: e.target.value })}\n                  className=\"rounded-xl\"\n                />\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"county\">County *</Label>\n                  <Input\n                    id=\"county\"\n                    placeholder=\"e.g., Mombasa\"\n                    value={branchForm.county}\n                    onChange={(e) => setBranchForm({ ...branchForm, county: e.target.value })}\n                    className=\"rounded-xl\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"tax-office\">Local Tax Office *</Label>\n                  <Input\n                    id=\"tax-office\"\n                    placeholder=\"e.g., Mombasa Tax Office\"\n                    value={branchForm.localTaxOffice}\n                    onChange={(e) => setBranchForm({ ...branchForm, localTaxOffice: e.target.value })}\n                    className=\"rounded-xl\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"space-y-4 border-t pt-4\">\n              <h3 className=\"text-lg font-semibold\">Staff Information</h3>\n              <div className=\"grid grid-cols-3 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"manager\">Branch Manager</Label>\n                  <Input\n                    id=\"manager\"\n                    placeholder=\"Manager name\"\n                    value={branchForm.manager}\n                    onChange={(e) => setBranchForm({ ...branchForm, manager: e.target.value })}\n                    className=\"rounded-xl\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"email\">Email</Label>\n                  <Input\n                    id=\"email\"\n                    type=\"email\"\n                    placeholder=\"branch@flow360.com\"\n                    value={branchForm.email}\n                    onChange={(e) => setBranchForm({ ...branchForm, email: e.target.value })}\n                    className=\"rounded-xl\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"phone\">Phone Number</Label>\n                  <Input\n                    id=\"phone\"\n                    type=\"tel\"\n                    placeholder=\"+254...\"\n                    value={branchForm.phone}\n                    onChange={(e) => setBranchForm({ ...branchForm, phone: e.target.value })}\n                    className=\"rounded-xl\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"space-y-4 border-t pt-4\">\n              <h3 className=\"text-lg font-semibold\">Hardware Assignment</h3>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"hardware-type\">Hardware Type</Label>\n                  <Select\n                    value={branchForm.hardwareType}\n                    onValueChange={(value) => setBranchForm({ ...branchForm, hardwareType: value })}\n                  >\n                    <SelectTrigger className=\"rounded-xl\">\n                      <SelectValue placeholder=\"Select hardware type\" />\n                    </SelectTrigger>\n                    <SelectContent className=\"rounded-xl\">\n                      <SelectItem value=\"Controller\">Controller</SelectItem>\n                      <SelectItem value=\"MiniPC\">Mini PC</SelectItem>\n                      <SelectItem value=\"POS\">POS</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"serial-number\">Serial Number</Label>\n                  <Input\n                    id=\"serial-number\"\n                    placeholder=\"e.g., SN-12345\"\n                    value={branchForm.serialNumber}\n                    onChange={(e) => setBranchForm({ ...branchForm, serialNumber: e.target.value })}\n                    className=\"rounded-xl\"\n                  />\n                </div>\n              </div>\n            </div>\n\n\n            <div className=\"space-y-4 border-t pt-4\">\n              <h3 className=\"text-lg font-semibold\">Storage Indices</h3>\n              <p className=\"text-sm text-muted-foreground\">\n                Configure unique storage locations for this branch (e.g., Tank, Warehouse, Cold Storage)\n              </p>\n              <div className=\"flex gap-2\">\n                <Select\n                  value={branchForm.newStorageIndex}\n                  onValueChange={(value) => setBranchForm({ ...branchForm, newStorageIndex: value })}\n                >\n                  <SelectTrigger className=\"rounded-xl\">\n                    <SelectValue placeholder=\"Select storage type\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"Tank\">Tank</SelectItem>\n                    <SelectItem value=\"Warehouse\">Warehouse</SelectItem>\n                    <SelectItem value=\"Cold Storage\">Cold Storage</SelectItem>\n                    <SelectItem value=\"Dry Storage\">Dry Storage</SelectItem>\n                  </SelectContent>\n                </Select>\n                <Input\n                  placeholder=\"e.g., Tank 1\"\n                  value={branchForm.newStorageIndex ? branchForm.newStorageIndex.split(\" \")[1] || \"\" : \"\"}\n                  onChange={(e) => {\n                    const type = branchForm.newStorageIndex ? branchForm.newStorageIndex.split(\" \")[0] || \"\" : \"\"\n                    setBranchForm({ ...branchForm, newStorageIndex: `${type} ${e.target.value}` })\n                  }}\n                  className=\"rounded-xl\"\n                />\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => {\n                    if (branchForm.newStorageIndex.trim()) {\n                      const storageName = branchForm.newStorageIndex.trim()\n                      if (storageName.toLowerCase().includes(\"tank\")) {\n                        // Initialize tank configuration\n                        setBranchForm({\n                          ...branchForm,\n                          storageIndices: [...branchForm.storageIndices, storageName],\n                          tankConfig: {\n                            ...branchForm.tankConfig,\n                            [storageName]: { dispensers: [], initialStock: \"\", fuelType: \"Petrol\", tankCapacity: \"\" }, // Default to Petrol and empty capacity\n                          },\n                          newStorageIndex: \"\",\n                        })\n                      } else {\n                        setBranchForm({\n                          ...branchForm,\n                          storageIndices: [...branchForm.storageIndices, storageName],\n                          newStorageIndex: \"\",\n                        })\n                      }\n                    }\n                  }}\n                  className=\"rounded-xl\"\n                >\n                  Add\n                </Button>\n              </div>\n              {branchForm.storageIndices.length > 0 && (\n                <div className=\"space-y-4 mt-4\">\n                  {branchForm.storageIndices.map((index, i) => (\n                    <div key={i} className=\"border rounded-xl p-4 space-y-3\">\n                      <div className=\"flex items-center justify-between\">\n                        <Badge variant=\"secondary\" className=\"rounded-lg\">\n                          {index}\n                        </Badge>\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            const newConfig = { ...branchForm.tankConfig }\n                            delete newConfig[index]\n                            setBranchForm({\n                              ...branchForm,\n                              storageIndices: branchForm.storageIndices.filter((_, idx) => idx !== i),\n                              tankConfig: newConfig,\n                            })\n                          }}\n                          className=\"text-sm text-destructive hover:underline\"\n                        >\n                          Remove\n                        </button>\n                      </div>\n\n                      {index.toLowerCase().includes(\"tank\") && (\n                        <div className=\"space-y-4 bg-muted/50 p-3 rounded-lg\">\n                          <div className=\"space-y-2\">\n                            <Label>Fuel Type</Label>\n                            <Select\n                              value={branchForm.tankConfig[index]?.fuelType || \"Petrol\"}\n                              onValueChange={(value) => {\n                                const currentConfig = branchForm.tankConfig[index] || { dispensers: [], initialStock: \"\", fuelType: \"Petrol\", tankCapacity: \"\" }\n                                setBranchForm({\n                                  ...branchForm,\n                                  tankConfig: {\n                                    ...branchForm.tankConfig,\n                                    [index]: { ...currentConfig, fuelType: value },\n                                  },\n                                })\n                              }}\n                            >\n                              <SelectTrigger>\n                                <SelectValue placeholder=\"Select fuel type\" />\n                              </SelectTrigger>\n                              <SelectContent>\n                                <SelectItem value=\"Petrol\">Petrol</SelectItem>\n                                <SelectItem value=\"Diesel\">Diesel</SelectItem>\n                                <SelectItem value=\"Kerosene\">Kerosene</SelectItem>\n                                <SelectItem value=\"Super\">Super</SelectItem>\n                              </SelectContent>\n                            </Select>\n                          </div>\n\n                          {/* Added tank capacity input field in the form */}\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`tank-capacity-${i}`}>Tank Capacity (Litres) *</Label>\n                            <Input\n                              id={`tank-capacity-${i}`}\n                              type=\"number\"\n                              placeholder=\"e.g., 10000\"\n                              value={branchForm.tankConfig[index]?.tankCapacity || \"\"}\n                              onChange={(e) => {\n                                const currentConfig = branchForm.tankConfig[index] || { dispensers: [], initialStock: \"\", fuelType: \"Petrol\", tankCapacity: \"\" }\n                                setBranchForm({\n                                  ...branchForm,\n                                  tankConfig: {\n                                    ...branchForm.tankConfig,\n                                    [index]: {\n                                      ...currentConfig,\n                                      tankCapacity: e.target.value,\n                                    },\n                                  },\n                                })\n                              }}\n                              className=\"rounded-xl\"\n                            />\n                          </div>\n\n                          <div className=\"space-y-2\">\n                            <Label>Dispensers Served by This Tank *</Label>\n                            <div className=\"flex gap-2\">\n                              <Input\n                                placeholder=\"e.g., Dispenser 01\"\n                                id={`new-dispenser-${index}`}\n                                className=\"rounded-xl\"\n                              />\n                              <Button\n                                type=\"button\"\n                                variant=\"outline\"\n                                onClick={() => {\n                                  const input = document.getElementById(`new-dispenser-${index}`) as HTMLInputElement\n                                  const dispenserName = input?.value?.trim()\n                                  if (dispenserName) {\n                                    const currentConfig = branchForm.tankConfig[index] || { dispensers: [], initialStock: \"\", fuelType: \"Petrol\", tankCapacity: \"\" }\n                                    setBranchForm({\n                                      ...branchForm,\n                                      tankConfig: {\n                                        ...branchForm.tankConfig,\n                                        [index]: {\n                                          ...currentConfig,\n                                          dispensers: [\n                                            ...(currentConfig.dispensers || []),\n                                            dispenserName,\n                                          ],\n                                        },\n                                      },\n                                    })\n                                    input.value = \"\"\n                                  }\n                                }}\n                                className=\"rounded-xl\"\n                              >\n                                Add Dispenser\n                              </Button>\n                            </div>\n\n                            {branchForm.tankConfig[index]?.dispensers?.length > 0 && (\n                              <div className=\"space-y-2 mt-2\">\n                                {branchForm.tankConfig[index].dispensers.map((dispenser, dIdx) => (\n                                  <div\n                                    key={dIdx}\n                                    className=\"flex items-center justify-between bg-background p-2 rounded-lg\"\n                                  >\n                                    <span className=\"text-sm font-medium\">{dispenser}</span>\n                                    <div className=\"flex items-center gap-2\">\n                                      <Input\n                                        type=\"number\"\n                                        placeholder=\"Initial meter reading\"\n                                        className=\"w-48 rounded-lg\"\n                                        id={`meter-${i}-${dIdx}`}\n                                      />\n                                      <button\n                                        type=\"button\"\n                                        onClick={() => {\n                                          const currentConfig = branchForm.tankConfig[index] || { dispensers: [], initialStock: \"\", fuelType: \"Petrol\", tankCapacity: \"\" }\n                                          const dispensers = currentConfig.dispensers.filter(\n                                            (_, idx) => idx !== dIdx,\n                                          )\n                                          setBranchForm({\n                                            ...branchForm,\n                                            tankConfig: {\n                                              ...branchForm.tankConfig,\n                                              [index]: {\n                                                ...currentConfig,\n                                                dispensers,\n                                              },\n                                            },\n                                          })\n                                        }}\n                                        className=\"text-xs text-destructive hover:underline\"\n                                      >\n                                        Remove\n                                      </button>\n                                    </div>\n                                  </div>\n                                ))}\n                              </div>\n                            )}\n                          </div>\n\n                          <div className=\"space-y-2\">\n                            <Label htmlFor={`tank-stock-${index}`}>Initial Stock Position (Litres) *</Label>\n                            <Input\n                              id={`tank-stock-${index}`}\n                              type=\"number\"\n                              placeholder=\"e.g., 5000\"\n                              value={branchForm.tankConfig[index]?.initialStock || \"\"}\n                              onChange={(e) => {\n                                const currentConfig = branchForm.tankConfig[index] || { dispensers: [], initialStock: \"\", fuelType: \"Petrol\", tankCapacity: \"\" }\n                                setBranchForm({\n                                  ...branchForm,\n                                  tankConfig: {\n                                    ...branchForm.tankConfig,\n                                    [index]: {\n                                      ...currentConfig,\n                                      initialStock: e.target.value,\n                                    },\n                                  },\n                                })\n                              }}\n                              className=\"rounded-xl\"\n                              required\n                            />\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n          </div>\n          <div className=\"flex justify-end gap-3\">\n            <Button\n              variant=\"outline\"\n              onClick={() => setCreateBranchOpen(false)}\n              className=\"rounded-xl\"\n              disabled={isSubmitting}\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={handleCreateBranch}\n              className=\"rounded-xl bg-blue-600 hover:bg-blue-700\"\n              disabled={\n                !branchForm.name ||\n                !branchForm.location ||\n                !branchForm.county ||\n                !branchForm.localTaxOffice ||\n                isSubmitting\n              }\n            >\n              {isSubmitting ? \"Creating...\" : \"Create Branch\"}\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Edit Branch Dialog */}\n      <Dialog open={editBranchOpen} onOpenChange={setEditBranchOpen}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto rounded-2xl\">\n          <DialogHeader>\n            <DialogTitle className=\"text-2xl\">Edit Branch Details</DialogTitle>\n            <DialogDescription>Update the information for {editingBranch?.name}</DialogDescription>\n          </DialogHeader>\n          <div className=\"grid gap-4 py-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"edit-branch-name\">Branch Name *</Label>\n                <Input\n                  id=\"edit-branch-name\"\n                  placeholder=\"e.g., Nairobi Branch\"\n                  value={branchForm.name}\n                  onChange={(e) => setBranchForm({ ...branchForm, name: e.target.value })}\n                  className=\"rounded-xl\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"edit-location\">Location *</Label>\n                <Input\n                  id=\"edit-location\"\n                  placeholder=\"e.g., Nairobi, Kenya\"\n                  value={branchForm.location}\n                  onChange={(e) => setBranchForm({ ...branchForm, location: e.target.value })}\n                  className=\"rounded-xl\"\n                />\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit-address\">Physical Address</Label>\n              <Input\n                id=\"edit-address\"\n                placeholder=\"Street address, building, floor\"\n                value={branchForm.address}\n                onChange={(e) => setBranchForm({ ...branchForm, address: e.target.value })}\n                className=\"rounded-xl\"\n              />\n            </div>\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"edit-manager\">Branch Manager</Label>\n                <Input\n                  id=\"edit-manager\"\n                  placeholder=\"Manager name\"\n                  value={branchForm.manager}\n                  onChange={(e) => setBranchForm({ ...branchForm, manager: e.target.value })}\n                  className=\"rounded-xl\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"edit-email\">Email</Label>\n                <Input\n                  id=\"edit-email\"\n                  type=\"email\"\n                  placeholder=\"branch@flow360.com\"\n                  value={branchForm.email}\n                  onChange={(e) => setBranchForm({ ...branchForm, email: e.target.value })}\n                  className=\"rounded-xl\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"edit-phone\">Phone Number</Label>\n                <Input\n                  id=\"edit-phone\"\n                  type=\"tel\"\n                  placeholder=\"+254...\"\n                  value={branchForm.phone}\n                  onChange={(e) => setBranchForm({ ...branchForm, phone: e.target.value })}\n                  className=\"rounded-xl\"\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"flex justify-between items-center pt-4 border-t\">\n            <Button\n              variant=\"destructive\"\n              onClick={() => {\n                if (editingBranch) {\n                  handleDeleteBranch(editingBranch.id, editingBranch.name)\n                  setEditBranchOpen(false)\n                }\n              }}\n              className=\"rounded-xl\"\n            >\n              Delete Branch\n            </Button>\n            <div className=\"flex gap-3\">\n              <Button variant=\"outline\" onClick={() => setEditBranchOpen(false)} className=\"rounded-xl\">\n                Cancel\n              </Button>\n              <Button\n                onClick={handleUpdateBranch}\n                className=\"rounded-xl bg-blue-600 hover:bg-blue-700\"\n                disabled={\n                  !branchForm.name ||\n                  !branchForm.location ||\n                  !branchForm.county ||\n                  !branchForm.localTaxOffice\n                }\n              >\n                Update Branch\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Inventory Dialog */}\n      <Dialog open={inventoryOpen} onOpenChange={setInventoryOpen}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl\">\n          <DialogHeader>\n            <DialogTitle className=\"text-2xl\">Hardware Inventory</DialogTitle>\n            <DialogDescription>View all hardware assigned to branches</DialogDescription>\n          </DialogHeader>\n          <div className=\"py-4\">\n            <p className=\"text-center text-muted-foreground\">\n              Hardware inventory data will be displayed here. Navigate to the Inventory page for full details.\n            </p>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      <Dialog open={globalUploadsOpen} onOpenChange={setGlobalUploadsOpen}>\n        <DialogContent className=\"max-w-2xl rounded-2xl\">\n          <DialogHeader>\n            <DialogTitle className=\"text-2xl\">Global Uploads</DialogTitle>\n            <DialogDescription>Upload meter readings and stock positions for all branches</DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-6 py-4\">\n            <div className=\"space-y-3\">\n              <h3 className=\"text-sm font-semibold\">File Requirements</h3>\n              <ul className=\"text-sm text-muted-foreground space-y-1 list-disc list-inside\">\n                <li>Excel or CSV file format</li>\n                <li>Must include: Branch Name, Dispenser ID, Opening Meter Reading, Closing Meter Reading</li>\n                <li>Must include: Tank ID, Opening Stock, Closing Stock</li>\n                <li>One row per dispenser/tank reading</li>\n              </ul>\n            </div>\n\n            <div className=\"space-y-3\">\n              <Label htmlFor=\"upload-file\">Select File *</Label>\n              <Input\n                id=\"upload-file\"\n                type=\"file\"\n                accept=\".xlsx,.xls,.csv\"\n                onChange={(e) => setUploadFile(e.target.files?.[0] || null)}\n                className=\"rounded-xl\"\n              />\n              {uploadFile && <p className=\"text-sm text-muted-foreground\">Selected: {uploadFile.name}</p>}\n            </div>\n\n            <div className=\"bg-muted/50 p-4 rounded-xl\">\n              <h4 className=\"text-sm font-semibold mb-2\">Sample Format</h4>\n              <div className=\"text-xs font-mono bg-background p-3 rounded-lg overflow-x-auto\">\n                <div>Branch,Dispenser,Opening,Closing,Tank,Opening Stock,Closing Stock</div>\n                <div>Nairobi,Dispenser 01,1000,1500,Tank 1,5000,4200</div>\n                <div>Mombasa,Dispenser 02,2000,2300,Tank 2,6000,5800</div>\n              </div>\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setGlobalUploadsOpen(false)} className=\"rounded-xl\">\n              Cancel\n            </Button>\n            <Button onClick={handleGlobalUpload} disabled={!uploadFile} className=\"rounded-xl\">\n              <Upload className=\"mr-2 h-4 w-4\" />\n              Upload\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      <GlobalShiftUploadDialog open={globalShiftUploadOpen} onOpenChange={setGlobalShiftUploadOpen} />\n    </div>\n  )\n}\n","\"use client\"\n\nimport type React from \"react\"\n\nimport { useState, useEffect } from \"react\"\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Download, Upload, Loader2 } from \"lucide-react\"\nimport { generateGlobalShiftCloseTemplate } from \"@/lib/excel-templates\"\nimport { toast } from \"sonner\"\n\ninterface GlobalShiftUploadDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\nexport function GlobalShiftUploadDialog({ open, onOpenChange }: GlobalShiftUploadDialogProps) {\n  const [uploading, setUploading] = useState(false)\n  const [selectedFile, setSelectedFile] = useState<File | null>(null)\n  const [branches, setBranches] = useState<{ name: string }[]>([])\n\n  useEffect(() => {\n    if (open) {\n      fetchBranches()\n    }\n  }, [open])\n\n  const fetchBranches = async () => {\n    try {\n      const response = await fetch('/api/branches?status=active')\n      const result = await response.json()\n\n      if (!result.success) {\n        console.error(\"Error fetching branches:\", result.error)\n        toast.error(\"Failed to fetch branches\")\n      } else {\n        setBranches(result.data || [])\n      }\n    } catch (error) {\n      console.error(\"Error fetching branches:\", error)\n      toast.error(\"Failed to fetch branches\")\n    }\n  }\n\n  const handleDownloadTemplate = () => {\n    if (branches.length === 0) {\n      toast.error(\"No active branches found\")\n      return\n    }\n\n    generateGlobalShiftCloseTemplate(branches)\n    toast.success(\"Global template downloaded successfully\")\n  }\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (file) {\n      setSelectedFile(file)\n    }\n  }\n\n  const handleUpload = async () => {\n    if (!selectedFile) {\n      toast.error(\"Please select a file to upload\")\n      return\n    }\n\n    setUploading(true)\n\n    try {\n      const formData = new FormData()\n      formData.append(\"file\", selectedFile)\n      formData.append(\"branchId\", \"global\") // Indicator for global upload\n\n      const response = await fetch(\"/api/shifts/close-excel\", {\n        method: \"POST\",\n        body: formData,\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || \"Upload failed\")\n      }\n\n      toast.success(`Successfully closed shifts for ${data.results?.length || 0} branches`)\n      if (data.errors && data.errors.length > 0) {\n        toast.warning(`Some errors occurred: ${data.errors.join(\", \")}`)\n      }\n      setSelectedFile(null)\n      onOpenChange(false)\n    } catch (error) {\n      console.error(\"Upload error:\", error)\n      toast.error(error instanceof Error ? error.message : \"Failed to close shifts\")\n    } finally {\n      setUploading(false)\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle>Global Shift Management - Close All Branch Shifts</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-6 py-4\">\n          <div className=\"space-y-2\">\n            <Label>Step 1: Download Global Template</Label>\n            <p className=\"text-sm text-muted-foreground\">\n              Download the Excel template with separate sheets for each branch. Each sheet contains the branch name in\n              the first row.\n            </p>\n            <Button\n              onClick={handleDownloadTemplate}\n              variant=\"outline\"\n              className=\"w-full bg-transparent\"\n              disabled={branches.length === 0}\n            >\n              <Download className=\"mr-2 h-4 w-4\" />\n              Download Global Shift Close Template ({branches.length} branches)\n            </Button>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label>Step 2: Fill Template & Upload</Label>\n            <p className=\"text-sm text-muted-foreground\">\n              Fill in the meter readings and tank volumes for each branch, then upload to close all shifts at once.\n            </p>\n            <Input type=\"file\" accept=\".xlsx,.xls\" onChange={handleFileChange} className=\"cursor-pointer\" />\n            {selectedFile && <p className=\"text-sm text-muted-foreground\">Selected: {selectedFile.name}</p>}\n          </div>\n\n          <Button onClick={handleUpload} disabled={!selectedFile || uploading} className=\"w-full\">\n            {uploading ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                Closing All Shifts...\n              </>\n            ) : (\n              <>\n                <Upload className=\"mr-2 h-4 w-4\" />\n                Upload & Close All Shifts\n              </>\n            )}\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":[],"mappings":"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"}