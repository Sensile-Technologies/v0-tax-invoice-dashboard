{"version":3,"sources":["../../../../components/hq-items-manager.tsx","../../../../components/hq-item-composition.tsx","../../../../app/headquarters/items/page.tsx","../../../../node_modules/lucide-react/src/icons/layers.ts"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\nimport { SearchableSelect } from \"@/components/ui/searchable-select\"\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Plus, Search, Package, Edit, RefreshCw, Building2 } from \"lucide-react\"\nimport { toast } from \"react-toastify\"\nimport { useCurrency } from \"@/lib/currency-utils\"\n\ninterface Item {\n  id: string\n  item_code: string\n  item_name: string\n  description?: string\n  item_type: string\n  class_code: string\n  tax_type: string\n  origin: string\n  quantity_unit: string\n  package_unit: string\n  status: string\n  assigned_branches: number\n  created_at: string\n}\n\ninterface KraCode {\n  cd: string\n  cd_nm: string\n}\n\ninterface Classification {\n  item_cls_cd: string\n  item_cls_nm: string\n}\n\ninterface Branch {\n  id: string\n  name: string\n  location: string\n}\n\nconst COUNTRY_ORIGINS = [\n  { cd: \"KE\", cd_nm: \"Kenya\" },\n  { cd: \"AE\", cd_nm: \"United Arab Emirates\" },\n  { cd: \"CN\", cd_nm: \"China\" },\n  { cd: \"DE\", cd_nm: \"Germany\" },\n  { cd: \"EG\", cd_nm: \"Egypt\" },\n  { cd: \"ET\", cd_nm: \"Ethiopia\" },\n  { cd: \"FR\", cd_nm: \"France\" },\n  { cd: \"GB\", cd_nm: \"United Kingdom\" },\n  { cd: \"IN\", cd_nm: \"India\" },\n  { cd: \"IT\", cd_nm: \"Italy\" },\n  { cd: \"JP\", cd_nm: \"Japan\" },\n  { cd: \"MY\", cd_nm: \"Malaysia\" },\n  { cd: \"NL\", cd_nm: \"Netherlands\" },\n  { cd: \"NG\", cd_nm: \"Nigeria\" },\n  { cd: \"PK\", cd_nm: \"Pakistan\" },\n  { cd: \"RU\", cd_nm: \"Russia\" },\n  { cd: \"SA\", cd_nm: \"Saudi Arabia\" },\n  { cd: \"SG\", cd_nm: \"Singapore\" },\n  { cd: \"TH\", cd_nm: \"Thailand\" },\n  { cd: \"TR\", cd_nm: \"Turkey\" },\n  { cd: \"TZ\", cd_nm: \"Tanzania\" },\n  { cd: \"UG\", cd_nm: \"Uganda\" },\n  { cd: \"US\", cd_nm: \"United States\" },\n  { cd: \"ZA\", cd_nm: \"South Africa\" },\n  { cd: \"ZM\", cd_nm: \"Zambia\" },\n  { cd: \"ZW\", cd_nm: \"Zimbabwe\" },\n  { cd: \"RW\", cd_nm: \"Rwanda\" },\n  { cd: \"BI\", cd_nm: \"Burundi\" },\n  { cd: \"CD\", cd_nm: \"DR Congo\" },\n  { cd: \"SS\", cd_nm: \"South Sudan\" },\n  { cd: \"SO\", cd_nm: \"Somalia\" },\n  { cd: \"DJ\", cd_nm: \"Djibouti\" },\n  { cd: \"ER\", cd_nm: \"Eritrea\" },\n  { cd: \"MW\", cd_nm: \"Malawi\" },\n  { cd: \"MZ\", cd_nm: \"Mozambique\" },\n  { cd: \"BW\", cd_nm: \"Botswana\" },\n  { cd: \"NA\", cd_nm: \"Namibia\" },\n  { cd: \"AU\", cd_nm: \"Australia\" },\n  { cd: \"BR\", cd_nm: \"Brazil\" },\n  { cd: \"CA\", cd_nm: \"Canada\" },\n  { cd: \"ES\", cd_nm: \"Spain\" },\n  { cd: \"ID\", cd_nm: \"Indonesia\" },\n  { cd: \"KR\", cd_nm: \"South Korea\" },\n  { cd: \"MX\", cd_nm: \"Mexico\" },\n  { cd: \"PH\", cd_nm: \"Philippines\" },\n  { cd: \"PL\", cd_nm: \"Poland\" },\n  { cd: \"VN\", cd_nm: \"Vietnam\" }\n].sort((a, b) => a.cd_nm.localeCompare(b.cd_nm))\n\nexport function HqItemsManager() {\n  const router = useRouter()\n  const [items, setItems] = useState<Item[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchQuery, setSearchQuery] = useState(\"\")\n  const [showEditDialog, setShowEditDialog] = useState(false)\n  const [showAssignDialog, setShowAssignDialog] = useState(false)\n  const [selectedItem, setSelectedItem] = useState<Item | null>(null)\n  const [saving, setSaving] = useState(false)\n  const [branches, setBranches] = useState<Branch[]>([])\n  const [assignFormData, setAssignFormData] = useState({\n    branchId: \"\",\n    salePrice: \"\"\n  })\n  const { formatCurrency } = useCurrency()\n\n  const [classifications, setClassifications] = useState<Classification[]>([])\n  const [codes, setCodes] = useState<{\n    itemTypes: KraCode[]\n    origins: KraCode[]\n    quantityUnits: KraCode[]\n    packageUnits: KraCode[]\n    taxTypes: KraCode[]\n  }>({\n    itemTypes: [],\n    origins: COUNTRY_ORIGINS,\n    quantityUnits: [],\n    packageUnits: [],\n    taxTypes: []\n  })\n\n  const [formData, setFormData] = useState({\n    itemName: \"\",\n    description: \"\",\n    itemType: \"\",\n    classCode: \"\",\n    taxType: \"\",\n    origin: \"\",\n    batchNumber: \"\",\n    purchasePrice: \"\",\n    salePrice: \"\",\n    sku: \"\",\n    quantityUnit: \"\",\n    packageUnit: \"\"\n  })\n\n  useEffect(() => {\n    fetchItems()\n    fetchKraData()\n    fetchBranches()\n  }, [])\n\n  const fetchItems = async () => {\n    try {\n      const response = await fetch(\"/api/headquarters/items\")\n      const result = await response.json()\n      if (result.success) {\n        setItems(result.items || [])\n      } else {\n        toast.error(result.error || \"Failed to fetch items\")\n      }\n    } catch (error) {\n      console.error(\"Error fetching items:\", error)\n      toast.error(\"Failed to fetch items\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const fetchKraData = async () => {\n    try {\n      const [codelistRes, classificationsRes] = await Promise.all([\n        fetch(\"/api/kra/saved-data?type=codelist\"),\n        fetch(\"/api/kra/saved-data?type=classifications\")\n      ])\n\n      const codelistData = await codelistRes.json()\n      const classificationsData = await classificationsRes.json()\n\n      if (codelistData.data) {\n        const codesArray = codelistData.data\n        const uniqueByCode = (arr: any[]) => {\n          const seen = new Set()\n          return arr.filter((item: any) => {\n            if (seen.has(item.cd)) return false\n            seen.add(item.cd)\n            return true\n          })\n        }\n        const kraCountries = uniqueByCode(codesArray.filter((c: any) => c.cd_cls === \"05\").map((c: any) => ({ cd: c.cd, cd_nm: c.cd_nm })))\n        setCodes({\n          itemTypes: uniqueByCode(codesArray.filter((c: any) => c.cd_cls === \"24\").map((c: any) => ({ cd: c.cd, cd_nm: c.cd_nm }))),\n          origins: kraCountries.length > 0 ? kraCountries : COUNTRY_ORIGINS,\n          quantityUnits: uniqueByCode(codesArray.filter((c: any) => c.cd_cls === \"10\").map((c: any) => ({ cd: c.cd, cd_nm: c.cd_nm }))),\n          packageUnits: uniqueByCode(codesArray.filter((c: any) => c.cd_cls === \"17\").map((c: any) => ({ cd: c.cd, cd_nm: c.cd_nm }))),\n          taxTypes: uniqueByCode(codesArray.filter((c: any) => c.cd_cls === \"04\").map((c: any) => ({ cd: c.cd, cd_nm: c.cd_nm })))\n        })\n      }\n\n      if (classificationsData.data) {\n        setClassifications(classificationsData.data)\n      }\n    } catch (error) {\n      console.error(\"Error fetching KRA data:\", error)\n    }\n  }\n\n  const fetchBranches = async () => {\n    try {\n      const response = await fetch(\"/api/branches/list\")\n      const result = await response.json()\n      // API returns array directly, not { success, branches }\n      if (Array.isArray(result)) {\n        setBranches(result)\n      } else if (result.success && result.branches) {\n        setBranches(result.branches)\n      }\n    } catch (error) {\n      console.error(\"Error fetching branches:\", error)\n    }\n  }\n\n  const openAssignDialog = (item: Item) => {\n    setSelectedItem(item)\n    setAssignFormData({\n      branchId: \"\",\n      salePrice: \"\"\n    })\n    setShowAssignDialog(true)\n  }\n\n  const handleAssignToBranch = async () => {\n    if (!selectedItem || !assignFormData.branchId) {\n      toast.error(\"Please select a branch\")\n      return\n    }\n\n    if (!assignFormData.salePrice) {\n      toast.error(\"Please enter a sale price\")\n      return\n    }\n\n    setSaving(true)\n    try {\n      const response = await fetch(\"/api/branch-items\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          branchId: assignFormData.branchId,\n          itemId: selectedItem.id,\n          salePrice: parseFloat(assignFormData.salePrice)\n        })\n      })\n\n      const result = await response.json()\n      if (result.success) {\n        toast.success(\"Item assigned to branch successfully\")\n        setShowAssignDialog(false)\n        setSelectedItem(null)\n        fetchItems()\n      } else {\n        toast.error(result.error || \"Failed to assign item\")\n      }\n    } catch (error) {\n      console.error(\"Error assigning item:\", error)\n      toast.error(\"Failed to assign item to branch\")\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const resetForm = () => {\n    setFormData({\n      itemName: \"\",\n      description: \"\",\n      itemType: \"\",\n      classCode: \"\",\n      taxType: \"\",\n      origin: \"\",\n      batchNumber: \"\",\n      purchasePrice: \"\",\n      salePrice: \"\",\n      sku: \"\",\n      quantityUnit: \"\",\n      packageUnit: \"\"\n    })\n  }\n\n  const handleEditItem = async () => {\n    if (!selectedItem) return\n\n    setSaving(true)\n    try {\n      const response = await fetch(\"/api/headquarters/items\", {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          id: selectedItem.id,\n          itemName: formData.itemName,\n          description: formData.description\n        })\n      })\n\n      const result = await response.json()\n      if (result.success) {\n        toast.success(\"Item updated successfully\")\n        setShowEditDialog(false)\n        setSelectedItem(null)\n        resetForm()\n        fetchItems()\n      } else {\n        toast.error(result.error || \"Failed to update item\")\n      }\n    } catch (error) {\n      console.error(\"Error updating item:\", error)\n      toast.error(\"Failed to update item\")\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const openEditDialog = (item: Item) => {\n    setSelectedItem(item)\n    setFormData({\n      itemName: item.item_name,\n      description: item.description || \"\",\n      itemType: item.item_type,\n      classCode: item.class_code,\n      taxType: item.tax_type,\n      origin: item.origin,\n      batchNumber: \"\",\n      purchasePrice: \"\",\n      salePrice: \"\",\n      sku: \"\",\n      quantityUnit: item.quantity_unit,\n      packageUnit: item.package_unit\n    })\n    setShowEditDialog(true)\n  }\n\n  const filteredItems = items.filter(item =>\n    item.item_name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    item.item_code.toLowerCase().includes(searchQuery.toLowerCase())\n  )\n\n  return (\n    <div className=\"space-y-6\">\n      <Card className=\"rounded-2xl shadow-lg border-2\">\n        <CardHeader className=\"flex flex-row items-center justify-between\">\n          <div>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Package className=\"h-5 w-5\" />\n              Item Catalog\n            </CardTitle>\n            <CardDescription>\n              Vendor-level items that can be assigned to branches with custom pricing\n            </CardDescription>\n          </div>\n          <div className=\"flex gap-2\">\n            <Button variant=\"outline\" onClick={fetchItems} className=\"rounded-xl\">\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\n              Refresh\n            </Button>\n            <Button onClick={() => router.push(\"/headquarters/items/add\")} className=\"rounded-xl\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Add Item\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"mb-4\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input\n                placeholder=\"Search by name or code...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"pl-9 rounded-xl\"\n              />\n            </div>\n          </div>\n\n          {loading ? (\n            <div className=\"text-center py-8 text-muted-foreground\">Loading items...</div>\n          ) : filteredItems.length === 0 ? (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              {searchQuery ? \"No items match your search\" : \"No items found. Create your first item to get started.\"}\n            </div>\n          ) : (\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Item Code</TableHead>\n                  <TableHead>Name</TableHead>\n                  <TableHead>Type</TableHead>\n                  <TableHead>Classification</TableHead>\n                  <TableHead className=\"text-center\">Branches</TableHead>\n                  <TableHead>Status</TableHead>\n                  <TableHead className=\"text-right\">Actions</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {filteredItems.map((item) => (\n                  <TableRow key={item.id}>\n                    <TableCell className=\"font-mono text-sm\">{item.item_code}</TableCell>\n                    <TableCell className=\"font-medium\">{item.item_name}</TableCell>\n                    <TableCell>{item.item_type}</TableCell>\n                    <TableCell>{item.class_code}</TableCell>\n                    <TableCell className=\"text-center\">\n                      <Badge variant=\"secondary\">{item.assigned_branches || 0}</Badge>\n                    </TableCell>\n                    <TableCell>\n                      <Badge className={item.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}>\n                        {item.status}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"text-right space-x-1\">\n                      <Button variant=\"ghost\" size=\"sm\" onClick={() => openAssignDialog(item)} title=\"Assign to Branch\">\n                        <Building2 className=\"h-4 w-4\" />\n                      </Button>\n                      <Button variant=\"ghost\" size=\"sm\" onClick={() => openEditDialog(item)} title=\"Edit\">\n                        <Edit className=\"h-4 w-4\" />\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          )}\n        </CardContent>\n      </Card>\n\n      <Dialog open={showEditDialog} onOpenChange={setShowEditDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Edit Item</DialogTitle>\n            <DialogDescription>\n              Update item details. Item code and KRA settings cannot be changed after creation.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"grid gap-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label>Item Code</Label>\n              <Input value={selectedItem?.item_code || \"\"} disabled className=\"bg-muted\" />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Item Name</Label>\n              <Input\n                value={formData.itemName}\n                onChange={(e) => setFormData({ ...formData, itemName: e.target.value })}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Description</Label>\n              <Input\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n              />\n            </div>\n            <p className=\"text-xs text-muted-foreground mt-2\">\n              Prices are managed at the branch level. Use \"Assign to Branch\" to set initial selling prices.\n            </p>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowEditDialog(false)}>Cancel</Button>\n            <Button onClick={handleEditItem} disabled={saving}>\n              {saving ? \"Saving...\" : \"Save Changes\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      <Dialog open={showAssignDialog} onOpenChange={setShowAssignDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Assign Item to Branch</DialogTitle>\n            <DialogDescription>\n              Assign \"{selectedItem?.item_name}\" to a branch with an initial selling price.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"grid gap-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label>Item Code</Label>\n              <Input value={selectedItem?.item_code || \"\"} disabled className=\"bg-muted font-mono\" />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Select Branch *</Label>\n              <SearchableSelect\n                value={assignFormData.branchId}\n                onValueChange={(v) => setAssignFormData({ ...assignFormData, branchId: v })}\n                placeholder=\"Select a branch\"\n                searchPlaceholder=\"Search branches...\"\n                options={branches.map((b) => ({ value: b.id, label: `${b.name} - ${b.location}` }))}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Initial Selling Price *</Label>\n              <Input\n                type=\"number\"\n                value={assignFormData.salePrice}\n                onChange={(e) => setAssignFormData({ ...assignFormData, salePrice: e.target.value })}\n                placeholder=\"0.00\"\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                This is the initial selling price. The branch can update it later from Inventory &gt; Set Prices.\n              </p>\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Purchase prices are set during the Purchase Order process.\n            </p>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowAssignDialog(false)}>Cancel</Button>\n            <Button onClick={handleAssignToBranch} disabled={saving}>\n              {saving ? \"Assigning...\" : \"Assign to Branch\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n","\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Plus, Trash2, Calculator } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\nimport { SearchableSelect } from \"@/components/ui/searchable-select\"\nimport { toast } from \"react-toastify\"\n\ninterface Item {\n  id: string\n  item_code: string\n  item_name: string\n  item_type: string\n  tax_type: string\n  status: string\n}\n\ninterface CompositeItem {\n  id: string\n  item_code: string\n  item_name: string\n  tax_type: string\n  compositions: Array<{\n    parent_item_id: string\n    parent_item_name: string\n    percentage: number\n  }>\n}\n\ninterface CompositionInput {\n  parent_item_id: string\n  percentage: number\n}\n\nexport function HqItemComposition() {\n  const [items, setItems] = useState<Item[]>([])\n  const [compositeItems, setCompositeItems] = useState<CompositeItem[]>([])\n  const [isCreating, setIsCreating] = useState(false)\n  const [loading, setLoading] = useState(false)\n\n  const [itemCode, setItemCode] = useState(\"\")\n  const [itemName, setItemName] = useState(\"\")\n  const [description, setDescription] = useState(\"\")\n  const [compositions, setCompositions] = useState<CompositionInput[]>([{ parent_item_id: \"\", percentage: 0 }])\n  const [calculatedTaxType, setCalculatedTaxType] = useState<string>(\"\")\n\n  useEffect(() => {\n    fetchItems()\n    fetchCompositeItems()\n  }, [])\n\n  useEffect(() => {\n    calculateCompositeValues()\n  }, [compositions, items])\n\n  const fetchItems = async () => {\n    try {\n      const response = await fetch(\"/api/headquarters/items\")\n      const result = await response.json()\n\n      if (!result.success) {\n        console.error(\"Error fetching items:\", result.error)\n        return\n      }\n\n      const nonComposites = (result.items || []).filter((item: Item) => item.item_type !== \"composite\")\n      setItems(nonComposites)\n    } catch (error) {\n      console.error(\"Error fetching items:\", error)\n    }\n  }\n\n  const fetchCompositeItems = async () => {\n    try {\n      const response = await fetch(\"/api/headquarters/items\")\n      const result = await response.json()\n\n      if (!result.success) {\n        console.error(\"Error fetching composite items:\", result.error)\n        return\n      }\n\n      const composites = (result.items || []).filter((item: Item) => item.item_type === \"composite\")\n\n      const compositesWithCompositions = await Promise.all(\n        composites.map(async (composite: any) => {\n          const compsRes = await fetch(`/api/item-compositions?composite_item_id=${composite.id}`)\n          const compsResult = await compsRes.json()\n          const comps = compsResult.success ? compsResult.data : []\n\n          return {\n            ...composite,\n            compositions: comps.map((c: any) => ({\n              parent_item_id: c.parent_item_id,\n              parent_item_name: c.parent_item_name || \"\",\n              percentage: c.percentage,\n            })),\n          }\n        }),\n      )\n\n      setCompositeItems(compositesWithCompositions)\n    } catch (error) {\n      console.error(\"Error fetching composite items:\", error)\n    }\n  }\n\n  const calculateCompositeValues = () => {\n    const taxTypes: Record<string, number> = {}\n\n    compositions.forEach((comp) => {\n      if (comp.parent_item_id && comp.percentage > 0) {\n        const parentItem = items.find((item) => item.id === comp.parent_item_id)\n        if (parentItem) {\n          taxTypes[parentItem.tax_type] = (taxTypes[parentItem.tax_type] || 0) + comp.percentage\n        }\n      }\n    })\n\n    let dominantTaxType = \"\"\n    let maxPercentage = 0\n    Object.entries(taxTypes).forEach(([taxType, percentage]) => {\n      if (percentage > maxPercentage) {\n        maxPercentage = percentage\n        dominantTaxType = taxType\n      }\n    })\n\n    setCalculatedTaxType(dominantTaxType || \"A\")\n  }\n\n  const addComposition = () => {\n    setCompositions([...compositions, { parent_item_id: \"\", percentage: 0 }])\n  }\n\n  const removeComposition = (index: number) => {\n    setCompositions(compositions.filter((_, i) => i !== index))\n  }\n\n  const updateComposition = (index: number, field: keyof CompositionInput, value: string | number) => {\n    const updated = [...compositions]\n    updated[index] = { ...updated[index], [field]: value }\n    setCompositions(updated)\n  }\n\n  const handleCreateComposite = async () => {\n    if (!itemCode || !itemName) {\n      toast.error(\"Please fill in all required fields\")\n      return\n    }\n\n    const totalPercentage = compositions.reduce((sum, comp) => sum + Number(comp.percentage), 0)\n    if (totalPercentage !== 100) {\n      toast.error(\"Total percentage must equal 100%\")\n      return\n    }\n\n    const validCompositions = compositions.filter((comp) => comp.parent_item_id && comp.percentage > 0)\n    if (validCompositions.length === 0) {\n      toast.error(\"Please add at least one parent item\")\n      return\n    }\n\n    setLoading(true)\n\n    try {\n      const itemRes = await fetch('/api/headquarters/items', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          itemName: itemName,\n          itemCode: itemCode,\n          description: description,\n          itemType: \"composite\",\n          taxType: calculatedTaxType,\n          origin: \"1\",\n          classCode: \"10101500\",\n          quantityUnit: \"U\",\n          packageUnit: \"NT\",\n        })\n      })\n\n      const itemResult = await itemRes.json()\n      if (!itemResult.success) throw new Error(itemResult.error)\n\n      const newItem = itemResult.item\n\n      for (const comp of validCompositions) {\n        await fetch('/api/item-compositions', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            composite_item_id: newItem.id,\n            parent_item_id: comp.parent_item_id,\n            percentage: comp.percentage,\n          })\n        })\n      }\n\n      toast.success(\"Composite item created successfully\")\n\n      setItemCode(\"\")\n      setItemName(\"\")\n      setDescription(\"\")\n      setCompositions([{ parent_item_id: \"\", percentage: 0 }])\n      setIsCreating(false)\n      fetchItems()\n      fetchCompositeItems()\n    } catch (error: any) {\n      console.error(\"Error creating composite item:\", error)\n      toast.error(error.message || \"Failed to create composite item\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleDeleteComposite = async (id: string) => {\n    if (!confirm(\"Are you sure you want to delete this composite item?\")) return\n\n    try {\n      const response = await fetch(`/api/headquarters/items?id=${id}`, { method: 'DELETE' })\n      const result = await response.json()\n\n      if (!result.success) {\n        toast.error(\"Failed to delete composite item\")\n        return\n      }\n\n      toast.success(\"Composite item deleted successfully\")\n      fetchCompositeItems()\n    } catch (error) {\n      console.error(\"Error deleting composite:\", error)\n      toast.error(\"Failed to delete composite item\")\n    }\n  }\n\n  const totalPercentage = compositions.reduce((sum, comp) => sum + Number(comp.percentage || 0), 0)\n\n  const itemOptions = items.map((item) => ({\n    value: item.id,\n    label: item.item_name\n  }))\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <p className=\"text-muted-foreground\">\n            Create composite items from parent items with percentage-based pricing\n          </p>\n        </div>\n        {!isCreating && (\n          <Button onClick={() => setIsCreating(true)} className=\"rounded-xl\">\n            <Plus className=\"mr-2 h-4 w-4\" />\n            Create Composite Item\n          </Button>\n        )}\n      </div>\n\n      {isCreating && (\n        <Card className=\"rounded-2xl shadow-lg border-2\">\n          <CardHeader>\n            <CardTitle>Create Composite Item</CardTitle>\n            <CardDescription>Define a new item composed of multiple parent items</CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            <div className=\"grid gap-4 md:grid-cols-2\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"item_code\">\n                  Item Code <span className=\"text-destructive\">*</span>\n                </Label>\n                <Input\n                  id=\"item_code\"\n                  value={itemCode}\n                  onChange={(e) => setItemCode(e.target.value)}\n                  placeholder=\"Enter item code\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"item_name\">\n                  Item Name <span className=\"text-destructive\">*</span>\n                </Label>\n                <Input\n                  id=\"item_name\"\n                  value={itemName}\n                  onChange={(e) => setItemName(e.target.value)}\n                  placeholder=\"Enter item name\"\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"description\">Description</Label>\n              <Input\n                id=\"description\"\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                placeholder=\"Enter description\"\n              />\n            </div>\n\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <Label>Parent Items Composition</Label>\n                <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={addComposition}>\n                  <Plus className=\"mr-2 h-4 w-4\" />\n                  Add Item\n                </Button>\n              </div>\n\n              <div className=\"space-y-3\">\n                {compositions.map((comp, index) => (\n                  <div key={index} className=\"flex gap-3\">\n                    <div className=\"flex-1\">\n                      <SearchableSelect\n                        value={comp.parent_item_id}\n                        onValueChange={(value) => updateComposition(index, \"parent_item_id\", value)}\n                        placeholder=\"Select parent item\"\n                        searchPlaceholder=\"Search items...\"\n                        options={itemOptions}\n                      />\n                    </div>\n                    <div className=\"w-32\">\n                      <Input\n                        type=\"number\"\n                        min=\"0\"\n                        max=\"100\"\n                        step=\"0.01\"\n                        value={comp.percentage}\n                        onChange={(e) =>\n                          updateComposition(index, \"percentage\", Number.parseFloat(e.target.value) || 0)\n                        }\n                        placeholder=\"%\"\n                      />\n                    </div>\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => removeComposition(index)}\n                      disabled={compositions.length === 1}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                ))}\n              </div>\n\n              <div className=\"rounded-lg border bg-muted/50 p-4\">\n                <div className=\"flex items-center justify-between text-sm\">\n                  <span className=\"font-medium\">Total Percentage:</span>\n                  <span className={totalPercentage === 100 ? \"text-green-600\" : \"text-destructive\"}>\n                    {totalPercentage.toFixed(2)}%\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <Card className=\"bg-blue-50 dark:bg-blue-950\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center text-lg\">\n                  <Calculator className=\"mr-2 h-5 w-5\" />\n                  Calculated Tax Type\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-2\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm text-muted-foreground\">Tax Type (based on composition):</span>\n                  <span className=\"font-semibold\">{calculatedTaxType || \"N/A\"}</span>\n                </div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Note: Set pricing for composite items per branch in Inventory Management.\n                </p>\n              </CardContent>\n            </Card>\n\n            <div className=\"flex gap-3\">\n              <Button onClick={handleCreateComposite} disabled={loading || totalPercentage !== 100}>\n                {loading ? \"Creating...\" : \"Create Composite Item\"}\n              </Button>\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  setIsCreating(false)\n                  setItemCode(\"\")\n                  setItemName(\"\")\n                  setDescription(\"\")\n                  setCompositions([{ parent_item_id: \"\", percentage: 0 }])\n                }}\n              >\n                Cancel\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      <Card className=\"rounded-2xl shadow-lg border-2\">\n        <CardHeader>\n          <CardTitle>Composite Items</CardTitle>\n          <CardDescription>View and manage existing composite items</CardDescription>\n        </CardHeader>\n        <CardContent>\n          {compositeItems.length === 0 ? (\n            <div className=\"py-12 text-center text-muted-foreground\">\n              No composite items found. Create one to get started.\n            </div>\n          ) : (\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>Item Code</TableHead>\n                  <TableHead>Item Name</TableHead>\n                  <TableHead>Composition</TableHead>\n                  <TableHead>Tax Type</TableHead>\n                  <TableHead className=\"text-right\">Actions</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {compositeItems.map((item) => (\n                  <TableRow key={item.id}>\n                    <TableCell className=\"font-medium\">{item.item_code}</TableCell>\n                    <TableCell>{item.item_name}</TableCell>\n                    <TableCell>\n                      <div className=\"space-y-1\">\n                        {item.compositions.map((comp, idx) => (\n                          <div key={idx} className=\"text-sm text-muted-foreground\">\n                            {comp.parent_item_name} ({comp.percentage}%)\n                          </div>\n                        ))}\n                      </div>\n                    </TableCell>\n                    <TableCell>{item.tax_type}</TableCell>\n                    <TableCell className=\"text-right\">\n                      <Button variant=\"ghost\" size=\"sm\" onClick={() => handleDeleteComposite(item.id)}>\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","\"use client\"\n\nimport { useState } from \"react\"\nimport { DashboardHeader } from \"@/components/dashboard-header\"\nimport { HqItemsManager } from \"@/components/hq-items-manager\"\nimport { HqItemComposition } from \"@/components/hq-item-composition\"\nimport { Button } from \"@/components/ui/button\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { ArrowLeft, Package, Layers, Loader2 } from \"lucide-react\"\nimport { useRouter } from \"next/navigation\"\nimport { useHQAccess } from \"@/lib/hooks/use-hq-access\"\n\nexport default function HqItemsPage() {\n  const { isChecking, hasAccess } = useHQAccess()\n  const router = useRouter()\n  const [activeTab, setActiveTab] = useState(\"catalog\")\n\n  if (isChecking) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    )\n  }\n\n  if (!hasAccess) {\n    return null\n  }\n\n  return (\n    <div className=\"flex h-screen flex-col overflow-hidden bg-gradient-to-b from-slate-50 to-white\">\n      <DashboardHeader currentBranch=\"hq\" />\n      <main className=\"flex-1 overflow-y-auto p-8\">\n        <div className=\"mb-6\">\n          <Button\n            variant=\"outline\"\n            onClick={() => router.push(\"/headquarters\")}\n            className=\"rounded-xl mb-4\"\n          >\n            <ArrowLeft className=\"mr-2 h-4 w-4\" />\n            Back to Headquarters\n          </Button>\n          <h1 className=\"text-3xl font-bold tracking-tight\">Item Management</h1>\n          <p className=\"mt-1 text-muted-foreground\">\n            Create and manage items centrally. Items created here will be available for all branches to use with their own pricing.\n          </p>\n        </div>\n\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-6\">\n          <TabsList className=\"grid w-full max-w-md grid-cols-2\">\n            <TabsTrigger value=\"catalog\" className=\"flex items-center gap-2\">\n              <Package className=\"h-4 w-4\" />\n              Item Catalog\n            </TabsTrigger>\n            <TabsTrigger value=\"composition\" className=\"flex items-center gap-2\">\n              <Layers className=\"h-4 w-4\" />\n              Item Composition\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"catalog\">\n            <HqItemsManager />\n          </TabsContent>\n\n          <TabsContent value=\"composition\">\n            <HqItemComposition />\n          </TabsContent>\n        </Tabs>\n      </main>\n    </div>\n  )\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Layers\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIuODMgMi4xOGEyIDIgMCAwIDAtMS42NiAwTDIuNiA2LjA4YTEgMSAwIDAgMCAwIDEuODNsOC41OCAzLjkxYTIgMiAwIDAgMCAxLjY2IDBsOC41OC0zLjlhMSAxIDAgMCAwIDAtMS44M1oiIC8+CiAgPHBhdGggZD0ibTIyIDE3LjY1LTkuMTcgNC4xNmEyIDIgMCAwIDEtMS42NiAwTDIgMTcuNjUiIC8+CiAgPHBhdGggZD0ibTIyIDEyLjY1LTkuMTcgNC4xNmEyIDIgMCAwIDEtMS42NiAwTDIgMTIuNjUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/layers\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Layers = createLucideIcon('Layers', [\n  [\n    'path',\n    {\n      d: 'm12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z',\n      key: '8b97xw',\n    },\n  ],\n  ['path', { d: 'm22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65', key: 'dd6zsq' }],\n  ['path', { d: 'm22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65', key: 'ep9fru' }],\n]);\n\nexport default Layers;\n"],"names":[],"mappings":"wDEEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OFAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAkCA,IAAM,EAAkB,CACtB,CAAE,GAAI,KAAM,MAAO,OAAQ,EAC3B,CAAE,GAAI,KAAM,MAAO,sBAAuB,EAC1C,CAAE,GAAI,KAAM,MAAO,OAAQ,EAC3B,CAAE,GAAI,KAAM,MAAO,SAAU,EAC7B,CAAE,GAAI,KAAM,MAAO,OAAQ,EAC3B,CAAE,GAAI,KAAM,MAAO,UAAW,EAC9B,CAAE,GAAI,KAAM,MAAO,QAAS,EAC5B,CAAE,GAAI,KAAM,MAAO,gBAAiB,EACpC,CAAE,GAAI,KAAM,MAAO,OAAQ,EAC3B,CAAE,GAAI,KAAM,MAAO,OAAQ,EAC3B,CAAE,GAAI,KAAM,MAAO,OAAQ,EAC3B,CAAE,GAAI,KAAM,MAAO,UAAW,EAC9B,CAAE,GAAI,KAAM,MAAO,aAAc,EACjC,CAAE,GAAI,KAAM,MAAO,SAAU,EAC7B,CAAE,GAAI,KAAM,MAAO,UAAW,EAC9B,CAAE,GAAI,KAAM,MAAO,QAAS,EAC5B,CAAE,GAAI,KAAM,MAAO,cAAe,EAClC,CAAE,GAAI,KAAM,MAAO,WAAY,EAC/B,CAAE,GAAI,KAAM,MAAO,UAAW,EAC9B,CAAE,GAAI,KAAM,MAAO,QAAS,EAC5B,CAAE,GAAI,KAAM,MAAO,UAAW,EAC9B,CAAE,GAAI,KAAM,MAAO,QAAS,EAC5B,CAAE,GAAI,KAAM,MAAO,eAAgB,EACnC,CAAE,GAAI,KAAM,MAAO,cAAe,EAClC,CAAE,GAAI,KAAM,MAAO,QAAS,EAC5B,CAAE,GAAI,KAAM,MAAO,UAAW,EAC9B,CAAE,GAAI,KAAM,MAAO,QAAS,EAC5B,CAAE,GAAI,KAAM,MAAO,SAAU,EAC7B,CAAE,GAAI,KAAM,MAAO,UAAW,EAC9B,CAAE,GAAI,KAAM,MAAO,aAAc,EACjC,CAAE,GAAI,KAAM,MAAO,SAAU,EAC7B,CAAE,GAAI,KAAM,MAAO,UAAW,EAC9B,CAAE,GAAI,KAAM,MAAO,SAAU,EAC7B,CAAE,GAAI,KAAM,MAAO,QAAS,EAC5B,CAAE,GAAI,KAAM,MAAO,YAAa,EAChC,CAAE,GAAI,KAAM,MAAO,UAAW,EAC9B,CAAE,GAAI,KAAM,MAAO,SAAU,EAC7B,CAAE,GAAI,KAAM,MAAO,WAAY,EAC/B,CAAE,GAAI,KAAM,MAAO,QAAS,EAC5B,CAAE,GAAI,KAAM,MAAO,QAAS,EAC5B,CAAE,GAAI,KAAM,MAAO,OAAQ,EAC3B,CAAE,GAAI,KAAM,MAAO,WAAY,EAC/B,CAAE,GAAI,KAAM,MAAO,aAAc,EACjC,CAAE,GAAI,KAAM,MAAO,QAAS,EAC5B,CAAE,GAAI,KAAM,MAAO,aAAc,EACjC,CAAE,GAAI,KAAM,MAAO,QAAS,EAC5B,CAAE,GAAI,KAAM,MAAO,SAAU,EAC9B,CAAC,IAAI,CAAC,CAAC,EAAG,IAAM,EAAE,KAAK,CAAC,aAAa,CAAC,EAAE,KAAK,GAEvC,SAAS,IACd,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,EAAE,EACvC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GACjC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GAC/C,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnD,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,MACxD,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC/B,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAW,EAAE,EAC/C,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACnD,SAAU,GACV,UAAW,EACb,GACM,gBAAE,CAAc,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IAEhC,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAmB,EAAE,EACrE,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAM/B,CACD,UAAW,EAAE,CACb,QAAS,EACT,cAAe,EAAE,CACjB,aAAc,EAAE,CAChB,SAAU,EAAE,AACd,GAEM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACvC,SAAU,GACV,YAAa,GACb,SAAU,GACV,UAAW,GACX,QAAS,GACT,OAAQ,GACR,YAAa,GACb,cAAe,GACf,UAAW,GACX,IAAK,GACL,aAAc,GACd,YAAa,EACf,GAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IACA,IACA,GACF,EAAG,EAAE,EAEL,IAAM,EAAa,UACjB,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,2BACvB,EAAS,MAAM,EAAS,IAAI,GAC9B,EAAO,OAAO,CAChB,CADkB,CACT,EAAO,KAAK,EAAI,EAAE,EAE3B,EAAA,KAAK,CAAC,KAAK,CAAC,EAAO,KAAK,EAAI,wBAEhC,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,wBAAyB,GACvC,EAAA,KAAK,CAAC,KAAK,CAAC,wBACd,QAAU,CACR,GAAW,EACb,CACF,EAEM,EAAe,UACnB,GAAI,CACF,GAAM,CAAC,EAAa,EAAmB,CAAG,MAAM,QAAQ,GAAG,CAAC,CAC1D,MAAM,qCACN,MAAM,4CACP,EAEK,EAAe,MAAM,EAAY,IAAI,GACrC,EAAsB,MAAM,EAAmB,IAAI,GAEzD,GAAI,EAAa,IAAI,CAAE,CACrB,IAAM,EAAa,EAAa,IAAI,CAC9B,EAAe,AAAC,IACpB,IAAM,EAAO,IAAI,IACjB,OAAO,EAAI,MAAM,CAAC,AAAC,GACjB,CAAI,EAAK,GAAG,CAAC,EAAK,EAAE,GAAG,CACvB,EAAK,GAAG,CADsB,AACrB,EAAK,EAAE,GACT,GAEX,EACM,EAAe,EAAa,EAAW,MAAM,CAAC,AAAC,GAAwB,OAAb,EAAE,MAAM,EAAW,GAAG,CAAC,AAAC,IAAW,AAAC,CAAE,GAAI,EAAE,EAAE,CAAE,MAAO,EAAE,KAAK,CAAC,CAAC,GAChI,EAAS,CACP,UAAW,EAAa,EAAW,MAAM,CAAC,AAAC,GAAwB,OAAb,EAAE,MAAM,EAAW,GAAG,CAAC,AAAC,GAAY,CAAD,CAAG,GAAI,EAAE,EAAE,CAAE,MAAO,EAAE,KAAK,AAAC,CAAC,IACtH,QAAS,EAAa,MAAM,CAAG,EAAI,EAAe,EAClD,cAAe,EAAa,EAAW,MAAM,CAAC,AAAC,GAAwB,OAAb,EAAE,MAAM,EAAW,GAAG,CAAC,AAAC,IAAW,AAAC,CAAE,GAAI,EAAE,EAAE,CAAE,MAAO,EAAE,KAAK,CAAC,CAAC,GAC1H,aAAc,EAAa,EAAW,MAAM,CAAC,AAAC,GAAwB,OAAb,EAAE,MAAM,EAAW,GAAG,CAAC,AAAC,IAAW,AAAC,CAAE,GAAI,EAAE,EAAE,CAAE,MAAO,EAAE,KAAK,CAAC,CAAC,GACzH,SAAU,EAAa,EAAW,MAAM,CAAE,AAAD,GAAyB,OAAb,EAAE,MAAM,EAAW,GAAG,CAAC,AAAC,IAAW,AAAC,CAAE,GAAI,EAAE,EAAE,CAAE,MAAO,EAAE,KAAK,CAAC,CAAC,EACvH,EACF,CAEI,EAAoB,IAAI,EAAE,AAC5B,EAAmB,EAAoB,IAAI,CAE/C,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,2BAA4B,EAC5C,CACF,EAEM,EAAgB,UACpB,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,sBACvB,EAAS,MAAM,EAAS,IAAI,GAE9B,MAAM,OAAO,CAAC,GAChB,EAAY,GACH,CAFgB,CAET,OAAO,EAAI,EAAO,QAAQ,EAAE,AAC5C,EAAY,EAAO,QAAQ,CAE/B,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,2BAA4B,EAC5C,CACF,EAWM,EAAuB,UAC3B,GAAI,CAAC,GAAgB,CAAC,EAAe,QAAQ,CAAE,YAC7C,EAAA,KAAK,CAAC,KAAK,CAAC,0BAId,GAAI,CAAC,EAAe,SAAS,CAAE,YAC7B,EAAA,KAAK,CAAC,KAAK,CAAC,6BAId,GAAU,GACV,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,oBAAqB,CAChD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CACnB,SAAU,EAAe,QAAQ,CACjC,OAAQ,EAAa,EAAE,CACvB,UAAW,WAAW,EAAe,SAAS,CAChD,EACF,GAEM,EAAS,MAAM,EAAS,IAAI,GAC9B,EAAO,OAAO,EAAE,AAClB,EAAA,KAAK,CAAC,OAAO,CAAC,wCACd,GAAoB,GACpB,EAAgB,MAChB,KAEA,EAAA,KAAK,CAAC,KAAK,CAAC,EAAO,KAAK,EAAI,wBAEhC,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,wBAAyB,GACvC,EAAA,KAAK,CAAC,KAAK,CAAC,kCACd,QAAU,CACR,GAAU,EACZ,CACF,EAmBM,EAAiB,UACrB,GAAK,CAAD,EAEJ,GAAU,GACV,GAAI,CACF,CAJiB,GAIX,EAAW,MAAM,MAAM,0BAA2B,CACtD,OAAQ,MACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CACnB,GAAI,EAAa,EAAE,CACnB,SAAU,EAAS,QAAQ,CAC3B,YAAa,EAAS,WAAW,AACnC,EACF,GAEM,EAAS,MAAM,EAAS,IAAI,GAC9B,EAAO,OAAO,EAChB,AADkB,EAClB,KAAK,CAAC,OAAO,CAAC,6BACd,GAAkB,GAClB,EAAgB,MAnCpB,EAAY,CACV,SAAU,GACV,YAAa,GACb,SAAU,GACV,UAAW,GACX,QAAS,GACT,OAAQ,GACR,YAAa,GACb,cAAe,GACf,UAAW,GACX,IAAK,GACL,aAAc,GACd,YAAa,EACf,GAwBI,KAEA,EAAA,KAAK,CAAC,KAAK,CAAC,EAAO,KAAK,EAAI,wBAEhC,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,uBAAwB,GACtC,EAAA,KAAK,CAAC,KAAK,CAAC,wBACd,QAAU,CACR,EAAU,GACZ,EACF,EAqBM,EAAgB,EAAM,MAAM,CAAC,GACjC,EAAK,SAAS,CAAC,WAAW,GAAG,QAAQ,CAAC,EAAY,WAAW,KAC7D,EAAK,SAAS,CAAC,WAAW,GAAG,QAAQ,CAAC,EAAY,WAAW,KAG/D,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,2CACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,uDACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,oCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,YAAY,kBAGjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,+EAInB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,QAAS,EAAY,UAAU,uBACvD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,iBAAiB,aAGxC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,EAAO,IAAI,CAAC,2BAA4B,UAAU,uBACvE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAAiB,oBAKvC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,WACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,2EAClB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,YAAY,4BACZ,MAAO,EACP,SAAW,AAAD,GAAO,EAAe,EAAE,MAAM,CAAC,KAAK,EAC9C,UAAU,yBAKf,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDAAyC,qBAC7B,IAAzB,EAAc,MAAM,CACtB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACZ,EAAc,6BAA+B,2DAGhD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,WACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,cACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,SACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,SACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,mBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,uBAAc,aACnC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,sBAAa,iBAGtC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACP,EAAc,GAAG,CAAC,AAAC,GAClB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,WACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,6BAAqB,EAAK,SAAS,GACxD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,uBAAe,EAAK,SAAS,GAClD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAE,EAAK,SAAS,GAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAE,EAAK,UAAU,GAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,uBACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,qBAAa,EAAK,iBAAiB,EAAI,MAExD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACR,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAA2B,WAAhB,EAAK,MAAM,CAAgB,8BAAgC,qCAC1E,EAAK,MAAM,KAGhB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,iCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,KAAK,QAAS,IAAM,CAlMnE,EAkMoF,GAjMpF,EAAkB,CAChB,QAFc,CAEJ,GACV,UAAW,EACb,GACA,GAAoB,IA6LuE,MAAM,4BAC7E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,cAEvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,KAAK,QAAS,IAAM,CAlGnE,KACA,EAAY,CACV,QAFc,CAEJ,EAAK,SAAS,CACxB,YAAa,EAAK,WAAW,EAAI,GACjC,SAAU,EAAK,SAAS,CACxB,UA6FgF,AA7FrE,EAAK,UAAU,CAC1B,QAAS,EAAK,QAAQ,CACtB,OAAQ,EAAK,MAAM,CACnB,YAAa,GACb,cAAe,GACf,UAAW,GACX,IAAK,GACL,aAAc,EAAK,aAAa,CAChC,YAAa,EAAK,YAAY,AAChC,GACA,GAAkB,IAmFuE,MAAM,gBAC3E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,mBAlBP,EAAK,EAAE,cA6BlC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAM,EAAgB,aAAc,WAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,WACZ,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UAAC,cACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,UAAC,yFAKrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,cACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,MAAO,GAAc,WAAa,GAAI,QAAQ,CAAA,CAAA,EAAC,UAAU,gBAElE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,cACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,MAAO,EAAS,QAAQ,CACxB,SAAU,AAAC,GAAM,EAAY,CAAE,GAAG,CAAQ,CAAE,SAAU,EAAE,MAAM,CAAC,KAAK,AAAC,QAGzE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,gBACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,MAAO,EAAS,WAAW,CAC3B,SAAU,AAAC,GAAM,EAAY,CAAE,GAAG,CAAQ,CAAE,YAAa,EAAE,MAAM,CAAC,KAAK,AAAC,QAG5E,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAqC,qGAKpD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,QAAS,IAAM,GAAkB,YAAQ,WACnE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,EAAgB,SAAU,WACxC,EAAS,YAAc,yBAMhC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAM,EAAkB,aAAc,WAC5C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,WACZ,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UAAC,0BACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,iBAAiB,CAAA,WAAC,WACR,GAAc,UAAU,qDAIrC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,cACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,MAAO,GAAc,WAAa,GAAI,QAAQ,CAAA,CAAA,EAAC,UAAU,0BAElE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,oBACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,gBAAgB,CAAA,CACf,MAAO,EAAe,QAAQ,CAC9B,cAAe,AAAC,GAAM,EAAkB,CAAE,GAAG,CAAc,CAAE,SAAU,CAAE,GACzE,YAAY,kBACZ,kBAAkB,qBAClB,QAAS,EAAS,GAAG,CAAC,AAAC,IAAM,AAAC,CAAE,MAAO,EAAE,EAAE,CAAE,MAAO,CAAA,EAAG,EAAE,IAAI,CAAC,GAAG,EAAE,EAAE,QAAQ,CAAA,CAAE,CAAC,CAAC,OAGrF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,4BACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,KAAK,SACL,MAAO,EAAe,SAAS,CAC/B,SAAU,AAAC,GAAM,EAAkB,CAAE,GAAG,CAAc,CAAE,UAAW,EAAE,MAAM,CAAC,KAAK,AAAC,GAClF,YAAY,SAEd,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,sGAI/C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,kEAK/C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,QAAS,IAAM,EAAoB,aAAQ,WACrE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,EAAsB,SAAU,WAC9C,EAAS,eAAiB,+BAOzC,CCxgBA,IAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAmCO,SAAS,IACd,GAAM,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,EAAE,EACvC,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAkB,EAAE,EAClE,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEjC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,CAAC,CAAE,eAAgB,GAAI,WAAY,CAAE,EAAE,EACtG,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IAEnE,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IACA,GACF,EAAG,EAAE,EAEL,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GACF,EAAG,CAAC,EAAc,EAAM,EAExB,IAAM,EAAa,UACjB,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,2BACvB,EAAS,MAAM,EAAS,IAAI,GAElC,GAAI,CAAC,EAAO,OAAO,CAAE,YACnB,QAAQ,KAAK,CAAC,wBAAyB,EAAO,KAAK,EAIrD,IAAM,EAAgB,AAAC,GAAO,KAAK,EAAI,EAAA,AAAE,EAAE,MAAM,CAAC,AAAC,GAAe,AAAmB,gBAAd,SAAS,EAChF,EAAS,EACX,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,wBAAyB,EACzC,CACF,EAEM,EAAsB,UAC1B,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,2BACvB,EAAS,MAAM,EAAS,IAAI,GAElC,GAAI,CAAC,EAAO,OAAO,CAAE,YACnB,QAAQ,KAAK,CAAC,kCAAmC,EAAO,KAAK,EAI/D,IAAM,EAAa,AAAC,GAAO,KAAK,EAAI,EAAA,AAAE,EAAE,MAAM,CAAE,AAAD,GAAgB,AAAmB,gBAAd,SAAS,EAEvE,EAA6B,MAAM,QAAQ,GAAG,CAClD,EAAW,GAAG,CAAC,MAAO,IACpB,IAAM,EAAW,MAAM,MAAM,CAAC,yCAAyC,EAAE,EAAU,EAAE,CAAA,CAAE,EACjF,EAAc,MAAM,EAAS,IAAI,GACjC,EAAQ,EAAY,OAAO,CAAG,EAAY,IAAI,CAAG,EAAE,CAEzD,MAAO,CACL,GAAG,CAAS,CACZ,aAAc,EAAM,GAAG,CAAC,AAAC,IAAW,AAAC,CACnC,eAAgB,EAAE,cAAc,CAChC,iBAAkB,EAAE,gBAAgB,EAAI,GACxC,WAAY,EAAE,UAAU,CAC1B,CAAC,CACH,CACF,IAGF,EAAkB,EACpB,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,kCAAmC,EACnD,CACF,EAEM,EAA2B,KAC/B,IAAM,EAAmC,CAAC,EAE1C,EAAa,OAAO,CAAE,AAAD,IACnB,GAAI,EAAK,cAAc,EAAI,EAAK,UAAU,CAAG,EAAG,CAC9C,IAAM,EAAa,EAAM,IAAI,CAAC,AAAC,GAAS,EAAK,EAAE,GAAK,EAAK,cAAc,EACnE,IACF,CAAQ,CAAC,EAAW,IADN,IACc,CAAC,CAAG,CAAC,CAAQ,CAAC,EAAW,QAAQ,CAAC,GAAI,CAAC,CAAI,EAAK,UAAA,AAAU,CAE1F,CACF,GAEA,IAAI,EAAkB,GAClB,EAAgB,EACpB,OAAO,OAAO,CAAC,GAAU,OAAO,CAAC,CAAC,CAAC,EAAS,EAAW,IACjD,EAAa,IACf,EAAgB,EAChB,EAAkB,EAEtB,GAJkC,AAMlC,EAAqB,GAAmB,IAC1C,EAUM,EAAoB,CAAC,EAAe,EAA+B,KACvE,IAAM,EAAU,IAAI,EAAa,CACjC,CAAO,CAAC,EAAM,CAAG,CAAE,GAAG,CAAO,CAAC,EAAM,CAAE,CAAC,EAAM,CAAE,CAAM,EACrD,EAAgB,EAClB,EAEM,EAAwB,UAC5B,GAAI,CAAC,GAAY,CAAC,EAAU,YAC1B,EAAA,KAAK,CAAC,KAAK,CAAC,sCAKd,GAAwB,AAApB,MADoB,EAAa,MAAM,CAAC,CAAC,EAAK,IAAS,EAAM,OAAO,EAAK,UAAU,EAAG,GAC7D,YAC3B,EAAA,KAAK,CAAC,KAAK,CAAC,oCAId,IAAM,EAAoB,EAAa,MAAM,CAAC,AAAC,GAAS,EAAK,cAAc,EAAI,EAAK,UAAU,CAAG,GACjG,GAAI,AAA6B,MAAX,MAAM,CAAQ,YAClC,EAAA,KAAK,CAAC,KAAK,CAAC,uCAId,GAAW,GAEX,GAAI,CACF,IAAM,EAAU,MAAM,MAAM,0BAA2B,CACrD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CACnB,SAAU,EACV,SAAU,EACV,YAAa,EACb,SAAU,YACV,QAAS,EACT,OAAQ,IACR,UAAW,WACX,aAAc,IACd,YAAa,IACf,EACF,GAEM,EAAa,MAAM,EAAQ,IAAI,GACrC,GAAI,CAAC,EAAW,OAAO,CAAE,MAAM,AAAI,MAAM,EAAW,KAAK,EAEzD,IAAM,EAAU,EAAW,IAAI,CAE/B,IAAK,IAAM,KAAQ,EACjB,MAAM,MAAM,IADwB,qBACE,CACpC,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CACnB,kBAAmB,EAAQ,EAAE,CAC7B,eAAgB,EAAK,cAAc,CACnC,WAAY,EAAK,UAAU,AAC7B,EACF,GAGF,EAAA,KAAK,CAAC,OAAO,CAAC,uCAEd,EAAY,IACZ,EAAY,IACZ,EAAe,IACf,EAAgB,CAAC,CAAE,eAAgB,GAAI,WAAY,CAAE,EAAE,EACvD,GAAc,GACd,IACA,GACF,CAAE,MAAO,EAAY,CACnB,QAAQ,KAAK,CAAC,iCAAkC,GAChD,EAAA,KAAK,CAAC,KAAK,CAAC,EAAM,OAAO,EAAI,kCAC/B,QAAU,CACR,GAAW,EACb,CACF,EAEM,EAAwB,MAAO,IACnC,GAAK,CAAD,OAAS,wDAEb,CAFsE,EAElE,CACF,IAAM,EAAW,MAAM,MAAM,CAAC,2BAA2B,EAAE,EAAA,CAAI,CAAE,CAAE,OAAQ,QAAS,GAGpF,GAAI,CAAC,CAFU,MAAM,EAAS,IAAI,EAAA,EAEtB,OAAO,CAAE,YACnB,EAAA,KAAK,CAAC,KAAK,CAAC,mCAId,EAAA,KAAK,CAAC,OAAO,CAAC,uCACd,GACF,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,4BAA6B,GAC3C,EAAA,KAAK,CAAC,KAAK,CAAC,kCACd,CACF,EAEM,EAAkB,EAAa,MAAM,CAAC,CAAC,EAAK,IAAS,EAAM,OAAO,EAAK,UAAU,EAAI,GAAI,GAEzF,EAAc,EAAM,GAAG,CAAE,AAAD,IAAW,CACvC,EADsC,IAC/B,EAAK,EAAE,CACd,MAAO,EAAK,SAAS,CACvB,CAAC,EAED,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,6EAItC,CAAC,GACA,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,EAAc,IAAO,UAAU,uBACpD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAAiB,8BAMtC,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,2CACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,0BACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,2DAEnB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,sBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,sBAAY,aACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BAAmB,SAE/C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,YACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,YAAY,uBAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,sBAAY,aACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BAAmB,SAE/C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,YACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,YAAY,0BAKlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,uBAAc,gBAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,cACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,KAAK,EAC9C,YAAY,yBAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UAAC,6BACP,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,QAAQ,UAAU,KAAK,KAAK,QA9KzC,CA8KkD,IA7KvE,EAAgB,IAAI,EAAc,CAAE,eAAgB,GAAI,WAAY,CAAE,EAAE,CAC1E,YA6KgB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAAiB,iBAKrC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAa,GAAG,CAAC,CAAC,EAAM,IACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAgB,UAAU,uBACzB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,gBAAgB,CAAA,CACf,MAAO,EAAK,cAAc,CAC1B,cAAe,AAAC,GAAU,EAAkB,EAAO,iBAAkB,GACrE,YAAY,qBACZ,kBAAkB,kBAClB,QAAS,MAGb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,KAAK,SACL,IAAI,IACJ,IAAI,MACJ,KAAK,OACL,MAAO,EAAK,UAAU,CACtB,SAAU,AAAC,GACT,EAAkB,EAAO,aAAc,OAAO,UAAU,CAAC,EAAE,MAAM,CAAC,KAAK,GAAK,GAE9E,YAAY,QAGhB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,SACL,QAAQ,QACR,KAAK,OACL,QAAS,IAAM,CA5MjC,EAAgB,EAAa,MAAM,CAAC,CAAC,EAAG,IAAM,IA4MK,EA5MC,GA6MlC,SAAU,AAAwB,MAAX,MAAM,UAE7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,gBA9BZ,MAoCd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sDACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAc,sBAC9B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAA+B,MAApB,EAA0B,iBAAmB,6BAC3D,EAAgB,OAAO,CAAC,GAAG,eAMpC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,wCACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,sCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,iBAAiB,2BAI3C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,sBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAgC,qCAChD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAiB,GAAqB,WAExD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,oFAMjD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,EAAuB,SAAU,GAA+B,MAApB,WAC1D,EAAU,cAAgB,0BAE7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,QAAS,KACP,GAAc,GACd,EAAY,IACZ,EAAY,IACZ,EAAe,IACf,EAAgB,CAAC,CAAE,eAAgB,GAAI,WAAY,CAAE,EAAE,CACzD,WACD,oBAQT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,2CACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,WACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,oBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,UAAC,gDAEnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACiB,AAA1B,MAAe,MAAM,CACpB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mDAA0C,yDAIzD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,WACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,cACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,cACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,gBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,aACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,sBAAa,iBAGtC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACP,EAAe,GAAG,CAAC,AAAC,GACnB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,WACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,uBAAe,EAAK,SAAS,GAClD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAE,EAAK,SAAS,GAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACR,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAK,YAAY,CAAC,GAAG,CAAC,CAAC,EAAM,IAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAc,UAAU,0CACtB,EAAK,gBAAgB,CAAC,KAAG,EAAK,UAAU,CAAC,OADlC,QAMhB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAE,EAAK,QAAQ,GACzB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,sBACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,KAAK,QAAS,IAAM,EAAsB,EAAK,EAAE,WAC5E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,kBAfT,EAAK,EAAE,eA2BxC,CC7bA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,KCKM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAS,CAAT,CAAA,CAAA,QAAS,OAAA,EAAiB,QAAU,CAAA,CAAA,AACxC,CAAA,AACE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AACA,CAAA,AACE,CAAG,CAAA,+GACH,CAAA,GAAK,CAAA,CAAA,CAAA,CAAA,CAAA,GACP,CAAA,CACF,CAAA,CACC,CAAA,CAAA,KAAQ,CAAE,AAAF,EAAK,CAAgD,8CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAAA,AAC7E,CAAC,OAAQ,CAAA,AAAE,EAAG,CAAgD,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAK,QAAA,CAAU,CAAA,CAC9E,CAAA,CAAA,ADfD,IAAA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,GAAM,YAAE,CAAU,WAAE,CAAS,CAAE,CAAG,CAAA,EAAA,EAAA,WAAA,AAAW,IACvC,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,kBAE3C,AAAI,EAEA,CAAA,EAAA,EAAA,GAAA,EAFY,AAEX,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,wCAKpB,EAKH,CAAA,EAAA,EAAA,IALc,AAKd,EAAC,MAAA,CAAI,UAAU,2FACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CAAC,cAAc,OAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,uCACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,UACR,QAAS,IAAM,EAAO,IAAI,CAAC,iBAC3B,UAAU,4BAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,iBAAiB,0BAGxC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6CAAoC,oBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,+HAK5C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,MAAO,EAAW,cAAe,EAAc,UAAU,sBAC7D,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,6CAClB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,MAAM,UAAU,UAAU,oCACrC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,YAAY,kBAGjC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,MAAM,cAAc,UAAU,oCACzC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAO,UAAU,YAAY,yBAKlC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,MAAM,mBACjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,KAGH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,MAAM,uBACjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,cAvCF,IA6CX","ignoreList":[3]}