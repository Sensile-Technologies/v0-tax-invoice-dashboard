{"version":3,"sources":["../../../../components/ui/input.tsx","../../../../node_modules/lucide-react/src/icons/loader-circle.ts","../../../../components/ui/table.tsx","../../../../lib/hooks/use-hq-access.ts","../../../../app/headquarters/roles/page.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name LoaderCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LoaderCircle = createLucideIcon('LoaderCircle', [\n  ['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }],\n]);\n\nexport default LoaderCircle;\n","'use client'\n\nimport * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Table({ className, ...props }: React.ComponentProps<'table'>) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn('w-full caption-bottom text-sm', className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<'thead'>) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn('[&_tr]:border-b', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<'tbody'>) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn('[&_tr:last-child]:border-0', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<'tfoot'>) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        'bg-muted/50 border-t font-medium [&>tr]:last:border-b-0',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<'tr'>) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        'hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<'th'>) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        'text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<'td'>) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        'p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<'caption'>) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn('text-muted-foreground mt-4 text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\n\ninterface HQAccessState {\n  isChecking: boolean\n  hasAccess: boolean\n  user: any | null\n}\n\nexport function useHQAccess(): HQAccessState {\n  const router = useRouter()\n  const [state, setState] = useState<HQAccessState>({\n    isChecking: true,\n    hasAccess: false,\n    user: null\n  })\n\n  useEffect(() => {\n    const checkAccess = async () => {\n      const restrictedRoles = ['supervisor', 'manager', 'cashier']\n\n      try {\n        const response = await fetch('/api/auth/session', { credentials: 'include' })\n        if (!response.ok) {\n          router.replace('/auth/login')\n          setState({ isChecking: false, hasAccess: false, user: null })\n          return\n        }\n\n        const data = await response.json()\n        if (!data.success || !data.user) {\n          router.replace('/auth/login')\n          setState({ isChecking: false, hasAccess: false, user: null })\n          return\n        }\n\n        const serverRole = (data.user.role || '').toLowerCase()\n        if (restrictedRoles.includes(serverRole)) {\n          const branchId = data.user.branch_id\n          router.replace(branchId ? `/sales/summary?branch=${branchId}` : '/sales/summary')\n          setState({ isChecking: false, hasAccess: false, user: data.user })\n          return\n        }\n\n        setState({ isChecking: false, hasAccess: true, user: data.user })\n      } catch (error) {\n        console.error('Error checking HQ access:', error)\n        router.replace('/auth/login')\n        setState({ isChecking: false, hasAccess: false, user: null })\n      }\n    }\n\n    checkAccess()\n  }, [router])\n\n  return state\n}\n","\"use client\"\nimport { DashboardHeader } from \"@/components/dashboard-header\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\nimport { Search, Loader2 } from \"lucide-react\"\nimport { useHQAccess } from \"@/lib/hooks/use-hq-access\"\n\nconst roles = [\n  {\n    id: 1,\n    role: \"Director\",\n    permissions: \"Full system access, financial approvals, user management, strategic reporting\",\n  },\n  {\n    id: 2,\n    role: \"Manager\",\n    permissions: \"Branch operations, staff supervision, inventory management, sales reporting\",\n  },\n  {\n    id: 3,\n    role: \"Supervisor\",\n    permissions: \"Daily operations, stock monitoring, customer management, basic reporting\",\n  },\n  {\n    id: 4,\n    role: \"Cashier\",\n    permissions: \"Sales transactions, customer invoicing, basic inventory view, receipt generation\",\n  },\n]\n\nexport default function RolesPage() {\n  const { isChecking, hasAccess } = useHQAccess()\n\n  if (isChecking) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    )\n  }\n\n  if (!hasAccess) {\n    return null\n  }\n\n  return (\n    <div className=\"flex h-screen flex-col overflow-hidden bg-gradient-to-b from-slate-900 via-blue-900 to-white\">\n      <DashboardHeader currentBranch=\"hq\" />\n\n      <main className=\"flex-1 overflow-y-auto p-8\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h1 className=\"text-3xl font-bold tracking-tight text-balance text-white\">Roles & Permissions</h1>\n            <p className=\"mt-1 text-white/80 text-pretty\">Define user access levels and permissions</p>\n          </div>\n          <div className=\"relative w-96\">\n            <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\n            <Input placeholder=\"Search roles...\" className=\"pl-10 rounded-xl\" />\n          </div>\n        </div>\n\n        <Card className=\"rounded-2xl\">\n          <CardContent className=\"p-6\">\n            <div className=\"rounded-xl border overflow-hidden\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead className=\"w-48\">Role</TableHead>\n                    <TableHead>Permissions & Access</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {roles.map((role) => (\n                    <TableRow key={role.id}>\n                      <TableCell className=\"font-semibold\">{role.role}</TableCell>\n                      <TableCell>{role.permissions}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          </CardContent>\n        </Card>\n      </main>\n\n      <footer className=\"border-t px-8 py-4 text-center text-sm text-muted-foreground\">\n        Powered by Sensile Technologies East Africa Ltd\n      </footer>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","ignoreList":[1]}