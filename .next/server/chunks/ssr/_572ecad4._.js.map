{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../lib/auth/client.ts","../../../../app/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","export async function signUp(email: string, password: string, metadata: { username?: string; phone?: string }) {\n  const response = await fetch(\"/api/auth/signup\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      email,\n      password,\n      data: metadata,\n    }),\n  })\n\n  const data = await response.json()\n  return { data, error: data.error || null }\n}\n\nexport async function signIn(identifier: string, password: string) {\n  const isEmail = identifier.includes(\"@\")\n\n  const response = await fetch(\"/api/auth/signin\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      email: isEmail ? identifier : undefined,\n      username: isEmail ? undefined : identifier,\n      password,\n    }),\n  })\n\n  const data = await response.json()\n\n  if (data.access_token) {\n    document.cookie = `sb-access-token=${data.access_token}; path=/; max-age=${60 * 60 * 24 * 7}`\n    document.cookie = `sb-refresh-token=${data.refresh_token}; path=/; max-age=${60 * 60 * 24 * 30}`\n    if (data.user) {\n      localStorage.setItem(\"currentUser\", JSON.stringify(data.user))\n      localStorage.setItem(\"user\", JSON.stringify(data.user))\n    }\n  }\n\n  return { data, error: data.error || null }\n}\n\nexport async function signOut() {\n  document.cookie = \"sb-access-token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT\"\n  document.cookie = \"sb-refresh-token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT\"\n  localStorage.removeItem(\"currentUser\")\n  localStorage.removeItem(\"user\")\n  localStorage.removeItem(\"selectedBranch\")\n  return { error: null }\n}\n\nexport function getCurrentUser() {\n  if (typeof window === \"undefined\") return null\n  const userStr = localStorage.getItem(\"currentUser\") || localStorage.getItem(\"user\")\n  if (!userStr) return null\n  try {\n    return JSON.parse(userStr)\n  } catch {\n    return null\n  }\n}\n\nexport function isAdmin() {\n  const user = getCurrentUser()\n  return user?.role === \"admin\"\n}\n\nexport async function signInWithGoogle() {\n  throw new Error(\"Google sign-in is not available with local authentication\")\n}\n\nexport async function getCurrentUserRole(): Promise<string | null> {\n  const user = getCurrentUser()\n  return user?.role || null\n}\n","\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { getCurrentUser } from \"@/lib/auth/client\"\n\nexport default function Home() {\n  const router = useRouter()\n  const [checking, setChecking] = useState(true)\n\n  useEffect(() => {\n    const user = getCurrentUser()\n    if (user) {\n      if (user.role === \"admin\") {\n        router.replace(\"/admin\")\n      } else if (user.role === \"sales\") {\n        router.replace(\"/admin/sales\")\n      } else {\n        // Directors and vendors go to HQ, branch staff go to branch UI\n        const role = (user.role || '').toLowerCase()\n        if (role === 'director' || role === 'vendor') {\n          router.replace(\"/headquarters\")\n        } else {\n          router.replace(\"/sales/summary\")\n        }\n      }\n    } else {\n      router.replace(\"/auth/login\")\n    }\n    setChecking(false)\n  }, [router])\n\n  if (checking) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <p className=\"text-muted-foreground\">Loading...</p>\n      </div>\n    )\n  }\n\n  return null\n}\n"],"names":["module","exports","require","vendored","ReactJsxRuntime"],"mappings":"6CAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEC,eAAe,yBCejC,eAAe,EAAO,CAAkB,CAAE,CAAgB,EAC/D,IAAM,EAAU,EAAW,QAAQ,CAAC,KAE9B,EAAW,MAAM,MAAM,mBAAoB,CAC/C,OAAQ,OACR,QAAS,CACP,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,CACnB,MAAO,EAAU,EAAa,OAC9B,SAAU,OAAU,EAAY,WAChC,CACF,EACF,GAEM,EAAO,MAAM,EAAS,IAAI,GAWhC,OATI,EAAK,YAAY,EAAE,CACrB,SAAS,MAAM,CAAG,CAAC,gBAAgB,EAAE,EAAK,YAAY,CAAC,kBAAkB,EAAE,KAAK,AAAa,CAC7F,IADqF,KAAK,AACjF,MAAM,CAAG,CAAC,iBAAiB,EAAE,EAAK,aAAa,CAAC,kBAAkB,EAAE,KAAK,CAAc,CAC5F,EAAK,CAD8E,GAC1E,EAD+E,AAC7E,CACb,aAAa,OAAO,CAAC,cAAe,KAAK,SAAS,CAAC,EAAK,IAAI,GAC5D,aAAa,OAAO,CAAC,OAAQ,KAAK,SAAS,CAAC,EAAK,IAAI,KAIlD,MAAE,EAAM,MAAO,EAAK,KAAK,EAAI,IAAK,CAC3C,CAEO,eAAe,IAMpB,OALA,SAAS,MAAM,CAAG,kEAClB,SAAS,MAAM,CAAG,mEAClB,aAAa,UAAU,CAAC,eACxB,aAAa,UAAU,CAAC,QACxB,aAAa,UAAU,CAAC,kBACjB,CAAE,MAAO,IAAK,CACvB,CAEO,SAAS,IACqB,OAAO,IAQ5C,CAOO,eAAe,IACpB,MAAM,AAAI,MAAM,4DAClB,gICvEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,SAwBzC,CAtBA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAO,CAAA,EAAA,EAAA,cAAA,AAAc,IAC3B,GAAI,EACF,GAAkB,CADV,QACmB,CAAvB,EAAK,IAAI,CACX,EAAO,OAAO,CAAC,eACV,GAAkB,SAAS,CAAvB,EAAK,IAAI,CAClB,EAAO,OAAO,CAAC,oBACV,CAEL,IAAM,EAAO,CAAC,EAAK,IAAI,EAAI,EAAA,CAAE,CAAE,WAAW,GAC7B,aAAT,GAAgC,UAAU,CAAnB,EACzB,EAAO,OAAO,CAAC,iBAEf,EAAO,OAAO,CAAC,iBAEnB,MAEA,EAAO,OAAO,CAAC,eAEjB,GAAY,EACd,EAAG,CAAC,EAAO,EAEP,GAEA,CAAA,EAAA,EAAA,EAFU,CAEV,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,iBAKpC,IACT","ignoreList":[0]}