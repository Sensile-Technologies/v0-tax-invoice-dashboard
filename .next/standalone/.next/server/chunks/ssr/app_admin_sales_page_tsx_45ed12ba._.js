module.exports=[86295,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(54161),g=a.i(5522),h=a.i(21958),i=a.i(46893),j=a.i(87682),k=a.i(65733),l=a.i(17171),m=a.i(15618),n=a.i(87532),o=a.i(67900),p=a.i(46842),q=a.i(92258),r=a.i(63519),s=a.i(90166),t=a.i(60246),u=a.i(24669),v=a.i(70106);let w=(0,v.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),x=(0,v.default)("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]),y=(0,v.default)("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]),z=(0,v.default)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);var A=a.i(10448);let B=(0,v.default)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var C=a.i(73320),D=a.i(4720),E=a.i(23292),F=a.i(56711);let G=[{id:"contact",label:"Contact",icon:w,color:"bg-slate-500"},{id:"negotiation",label:"Negotiation",icon:u.TrendingUp,color:"bg-blue-500"},{id:"demo",label:"Demo",icon:x,color:"bg-purple-500"},{id:"contracting",label:"Contracting",icon:y,color:"bg-orange-500"},{id:"onboarding",label:"Onboarding",icon:z,color:"bg-green-500"}],H=["Website","Referral","Cold Call","Trade Show","LinkedIn","Email Campaign","Partner","Other"];function I(){let[a,u]=(0,c.useState)("pipeline"),[v,w]=(0,c.useState)([]),[x,z]=(0,c.useState)([]),[I,J]=(0,c.useState)(!0),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)("all"),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)(!1),[U,V]=(0,c.useState)(null),[W,X]=(0,c.useState)(null),[Y,Z]=(0,c.useState)(!1),[$,_]=(0,c.useState)(null),[aa,ab]=(0,c.useState)(null),[ac,ad]=(0,c.useState)(!1),[ae,af]=(0,c.useState)(""),[ag,ah]=(0,c.useState)(null),[ai,aj]=(0,c.useState)(!1),ak=(0,c.useRef)(null),al=(0,c.useRef)(null),[am,an]=(0,c.useState)({company_name:"",trading_name:"",kra_pin:"",contact_name:"",contact_email:"",contact_phone:"",stage:"contact",assigned_to:"",notes:"",expected_value:"",expected_close_date:"",source:""}),[ao,ap]=(0,c.useState)({name:"",email:"",phone:""});(0,c.useEffect)(()=>{aq(),ar()},[M]);let aq=async()=>{try{let a=new URLSearchParams;"all"!==M&&a.append("stage",M);let b=await fetch(`/api/admin/leads?${a}`),c=await b.json();w(Array.isArray(c)?c:[])}catch(a){console.error("Error fetching leads:",a),w([])}finally{J(!1)}},ar=async()=>{try{let a=await fetch("/api/admin/sales-people"),b=await a.json();z(Array.isArray(b)?b:[])}catch(a){console.error("Error fetching sales people:",a),z([])}},as=async()=>{if(!am.company_name)return void E.toast.error("Please enter a company name");try{if(!(await fetch("/api/admin/leads",{method:U?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U?{...am,id:U.id}:am)})).ok)throw Error("Failed to save lead");E.toast.success(U?"Lead updated successfully":"Lead created successfully"),P(!1),aw(),aq()}catch(a){E.toast.error("Failed to save lead")}},at=async a=>{if(confirm("Are you sure you want to archive this lead? It will be hidden from the pipeline."))try{if(!(await fetch(`/api/admin/leads?id=${a}&action=archive`,{method:"DELETE"})).ok)throw Error("Failed to archive lead");E.toast.success("Lead archived successfully"),aq()}catch(a){E.toast.error("Failed to archive lead")}},au=async()=>{if(!aa||!$)return void E.toast.error("Please select a contract file");ad(!0);try{let a=new FormData;if(a.append("contract",aa),a.append("leadId",$.id),!(await fetch("/api/admin/leads/upload-contract",{method:"POST",body:a})).ok)throw Error("Failed to upload contract");E.toast.success("Contract uploaded and lead moved to Onboarding"),Z(!1),ab(null),_(null),aq()}catch(a){E.toast.error("Failed to upload contract")}finally{ad(!1)}},av=async()=>{if(!ao.name)return void E.toast.error("Please enter a name");try{if(!(await fetch("/api/admin/sales-people",{method:W?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W?{...ao,id:W.id,is_active:!0}:ao)})).ok)throw Error("Failed to save sales person");E.toast.success(W?"Sales person updated":"Sales person added"),T(!1),ax(),ar()}catch(a){E.toast.error("Failed to save sales person")}},aw=()=>{an({company_name:"",trading_name:"",kra_pin:"",contact_name:"",contact_email:"",contact_phone:"",stage:"contact",assigned_to:"",notes:"",expected_value:"",expected_close_date:"",source:""}),V(null)},ax=()=>{ap({name:"",email:"",phone:""}),X(null)},ay=a=>{V(a),af(a.stage),ah(null),an({company_name:a.company_name,trading_name:a.trading_name||"",kra_pin:a.kra_pin||"",contact_name:a.contact_name||"",contact_email:a.contact_email||"",contact_phone:a.contact_phone||"",stage:a.stage,assigned_to:a.assigned_to||"",notes:a.notes||"",expected_value:a.expected_value?.toString()||"",expected_close_date:a.expected_close_date||"",source:a.source||""}),R(!0)},az=async()=>{if(U){if("onboarding"===ae&&"onboarding"!==U.stage&&!ag)return void E.toast.error("Contract upload is required when moving to Onboarding stage");aj(!0);try{let a=null;if(ag){console.log("[Edit Lead] Uploading contract:",ag.name,"for lead:",U.id);let b=new FormData;b.append("contract",ag),b.append("leadId",U.id),console.log("[Edit Lead] FormData entries:",Array.from(b.entries()).map(([a,b])=>`${a}: ${b instanceof File?b.name:b}`));let c=await fetch("/api/admin/leads/upload-contract",{method:"POST",body:b});if(console.log("[Edit Lead] Upload response status:",c.status),!c.ok){let a=await c.json();throw console.error("[Edit Lead] Upload error:",a),Error(a.error||"Failed to upload contract")}let d=await c.json();console.log("[Edit Lead] Upload success:",d),a=d.contract_url}let b={...am,stage:ae,expected_value:am.expected_value?parseFloat(am.expected_value):null};if(a&&(b.contract_url=a),!(await fetch(`/api/admin/leads?id=${U.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)throw Error("Failed to update lead");E.toast.success("Lead updated successfully"),R(!1),V(null),ah(null),aw(),aq()}catch(a){E.toast.error("Failed to update lead")}finally{aj(!1)}}},aA=a=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(a),aB=v.filter(a=>a.company_name.toLowerCase().includes(K.toLowerCase())||a.contact_name?.toLowerCase().includes(K.toLowerCase())||a.contact_email?.toLowerCase().includes(K.toLowerCase())),aC=a=>aB.filter(b=>b.stage===a),aD=v.reduce((a,b)=>a+(Number(b.expected_value)||0),0);return I?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Sales Management"}),(0,b.jsx)("p",{className:"text-slate-500",children:"Track leads through your sales pipeline"})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Total Leads"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:v.length})]}),(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(t.Users,{className:"h-5 w-5 text-blue-600"})})]})})}),(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Pipeline Value"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:aA(aD)})]}),(0,b.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(s.DollarSign,{className:"h-5 w-5 text-green-600"})})]})})}),(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"In Contracting"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:aC("contracting").length})]}),(0,b.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(y,{className:"h-5 w-5 text-orange-600"})})]})})}),(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Sales Team"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:x.filter(a=>a.is_active).length})]}),(0,b.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(p.User,{className:"h-5 w-5 text-purple-600"})})]})})})]}),(0,b.jsxs)(h.Tabs,{value:a,onValueChange:u,children:[(0,b.jsxs)(h.TabsList,{children:[(0,b.jsx)(h.TabsTrigger,{value:"pipeline",children:"Pipeline"}),(0,b.jsx)(h.TabsTrigger,{value:"leads",children:"All Leads"}),(0,b.jsx)(h.TabsTrigger,{value:"team",children:"Sales Team"})]}),(0,b.jsxs)(h.TabsContent,{value:"pipeline",className:"mt-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-4",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),(0,b.jsx)(g.Input,{placeholder:"Search leads...",value:K,onChange:a=>L(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(k.Dialog,{open:O,onOpenChange:a=>{P(a),a||aw()},children:[(0,b.jsx)(k.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4 mr-2"}),"Add Lead"]})}),(0,b.jsxs)(k.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:U?"Edit Lead":"Add New Lead"}),(0,b.jsx)(k.DialogDescription,{children:"Enter the lead details"})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Company Name *"}),(0,b.jsx)(g.Input,{value:am.company_name,onChange:a=>an({...am,company_name:a.target.value}),placeholder:"Acme Corp"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Trading Name"}),(0,b.jsx)(g.Input,{value:am.trading_name,onChange:a=>an({...am,trading_name:a.target.value}),placeholder:"Acme Trading"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"KRA PIN"}),(0,b.jsx)(g.Input,{value:am.kra_pin,onChange:a=>an({...am,kra_pin:a.target.value}),placeholder:"A123456789X"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Contact Name"}),(0,b.jsx)(g.Input,{value:am.contact_name,onChange:a=>an({...am,contact_name:a.target.value}),placeholder:"John Doe"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Email"}),(0,b.jsx)(g.Input,{type:"email",value:am.contact_email,onChange:a=>an({...am,contact_email:a.target.value}),placeholder:"john@acme.com"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Phone"}),(0,b.jsx)(g.Input,{value:am.contact_phone,onChange:a=>an({...am,contact_phone:a.target.value}),placeholder:"+254 7XX XXX XXX"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Stage"}),(0,b.jsxs)(j.Select,{value:am.stage,onValueChange:a=>an({...am,stage:a}),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{})}),(0,b.jsx)(j.SelectContent,{children:G.map(a=>(0,b.jsx)(j.SelectItem,{value:a.id,children:a.label},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Assigned To"}),(0,b.jsxs)(j.Select,{value:am.assigned_to,onValueChange:a=>an({...am,assigned_to:a}),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Select sales person"})}),(0,b.jsx)(j.SelectContent,{children:x.filter(a=>a.is_active).map(a=>(0,b.jsx)(j.SelectItem,{value:a.id,children:a.name},a.id))})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Expected Value (KES)"}),(0,b.jsx)(g.Input,{type:"number",value:am.expected_value,onChange:a=>an({...am,expected_value:a.target.value}),placeholder:"100000"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Expected Close Date"}),(0,b.jsx)(g.Input,{type:"date",value:am.expected_close_date,onChange:a=>an({...am,expected_close_date:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Source"}),(0,b.jsxs)(j.Select,{value:am.source,onValueChange:a=>an({...am,source:a}),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Select source"})}),(0,b.jsx)(j.SelectContent,{children:H.map(a=>(0,b.jsx)(j.SelectItem,{value:a,children:a},a))})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Notes"}),(0,b.jsx)(i.Textarea,{value:am.notes,onChange:a=>an({...am,notes:a.target.value}),placeholder:"Additional notes about this lead...",rows:3})]}),(0,b.jsx)(e.Button,{onClick:as,className:"w-full",children:U?"Update Lead":"Create Lead"})]})]})]})]}),(0,b.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4 pr-4",children:G.map(a=>{let c=aC(a.id),e=a.icon;return(0,b.jsxs)("div",{className:"flex-shrink-0 w-[220px]",children:[(0,b.jsxs)("div",{className:`${a.color} text-white px-3 py-2 rounded-t-lg flex items-center justify-between`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"font-medium text-sm",children:a.label})]}),(0,b.jsx)(f.Badge,{variant:"secondary",className:"bg-white/20 text-white text-xs",children:c.length})]}),(0,b.jsxs)("div",{className:"bg-slate-100 p-2 rounded-b-lg min-h-[400px] space-y-2",children:[c.map(a=>(0,b.jsx)(d.Card,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>ay(a),children:(0,b.jsxs)(d.CardContent,{className:"p-3",children:[(0,b.jsx)("h4",{className:"font-medium text-sm truncate",children:a.company_name}),a.contact_name&&(0,b.jsx)("p",{className:"text-xs text-slate-500 truncate",children:a.contact_name}),Number(a.expected_value)>0&&(0,b.jsx)("p",{className:"text-xs text-green-600 font-medium mt-2",children:aA(Number(a.expected_value))}),a.assigned_to_name&&(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,b.jsx)(p.User,{className:"h-3 w-3 text-slate-400"}),(0,b.jsx)("span",{className:"text-xs text-slate-500 truncate",children:a.assigned_to_name})]})]})},a.id)),0===c.length&&(0,b.jsx)("div",{className:"text-center py-8 text-slate-400 text-sm",children:"No leads"})]})]},a.id)})})]}),(0,b.jsxs)(h.TabsContent,{value:"leads",className:"mt-4 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),(0,b.jsx)(g.Input,{placeholder:"Search leads...",value:K,onChange:a=>L(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(j.Select,{value:M,onValueChange:N,children:[(0,b.jsx)(j.SelectTrigger,{className:"w-40",children:(0,b.jsx)(j.SelectValue,{placeholder:"All Stages"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"All Stages"}),G.map(a=>(0,b.jsx)(j.SelectItem,{value:a.id,children:a.label},a.id))]})]})]}),(0,b.jsx)("div",{className:"space-y-3",children:aB.map(a=>{let c;return(0,b.jsx)(d.Card,{className:"hover:shadow-md transition-shadow",children:(0,b.jsx)(d.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)(o.Building2,{className:"h-5 w-5 text-slate-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h3",{className:"font-semibold",children:a.company_name}),(0,b.jsx)(f.Badge,{className:`${(c=a.stage,G.find(a=>a.id===c)?.color||"bg-slate-500")} text-white`,children:G.find(b=>b.id===a.stage)?.label})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-sm text-slate-500",children:[a.contact_name&&(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(p.User,{className:"h-3 w-3"}),a.contact_name]}),a.contact_email&&(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(q.Mail,{className:"h-3 w-3"}),a.contact_email]}),a.assigned_to_name&&(0,b.jsxs)("span",{className:"flex items-center gap-1 text-blue-600",children:[(0,b.jsx)(t.Users,{className:"h-3 w-3"}),a.assigned_to_name]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[Number(a.expected_value)>0&&(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-lg font-bold text-green-600",children:aA(Number(a.expected_value))}),a.expected_close_date&&(0,b.jsxs)("p",{className:"text-xs text-slate-500",children:["Close: ",(0,F.format)(new Date(a.expected_close_date),"MMM d, yyyy")]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>ay(a),children:(0,b.jsx)(A.Edit2,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:()=>at(a.id),className:"text-amber-600 hover:text-amber-800",children:(0,b.jsx)(B,{className:"h-4 w-4"})})]})]})]})})},a.id)})}),0===aB.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(t.Users,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-slate-500",children:"No leads found"})]})]}),(0,b.jsxs)(h.TabsContent,{value:"team",className:"mt-4 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Sales Team"}),(0,b.jsxs)(k.Dialog,{open:S,onOpenChange:a=>{T(a),a||ax()},children:[(0,b.jsx)(k.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4 mr-2"}),"Add Sales Person"]})}),(0,b.jsxs)(k.DialogContent,{children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:W?"Edit Sales Person":"Add Sales Person"}),(0,b.jsx)(k.DialogDescription,{children:"Enter the sales team member details"})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Name *"}),(0,b.jsx)(g.Input,{value:ao.name,onChange:a=>ap({...ao,name:a.target.value}),placeholder:"John Doe"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Email"}),(0,b.jsx)(g.Input,{type:"email",value:ao.email,onChange:a=>ap({...ao,email:a.target.value}),placeholder:"john@flow360.co.ke"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Phone"}),(0,b.jsx)(g.Input,{value:ao.phone,onChange:a=>ap({...ao,phone:a.target.value}),placeholder:"+254 7XX XXX XXX"})]}),(0,b.jsx)(e.Button,{onClick:av,className:"w-full",children:W?"Update":"Add Sales Person"})]})]})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(a=>{let c=v.filter(b=>b.assigned_to===a.id),g=c.reduce((a,b)=>a+(Number(b.expected_value)||0),0);return(0,b.jsx)(d.Card,{className:"hover:shadow-md transition-shadow",children:(0,b.jsxs)(d.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(p.User,{className:"h-6 w-6 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold",children:a.name}),(0,b.jsx)(f.Badge,{variant:a.is_active?"default":"secondary",children:a.is_active?"Active":"Inactive"})]})]}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>{X(a),ap({name:a.name,email:a.email||"",phone:a.phone||""}),T(!0)},children:(0,b.jsx)(A.Edit2,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"mt-4 space-y-2",children:[a.email&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,b.jsx)(q.Mail,{className:"h-4 w-4"}),a.email]}),a.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,b.jsx)(r.Phone,{className:"h-4 w-4"}),a.phone]})]}),(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Leads"}),(0,b.jsx)("p",{className:"text-lg font-bold",children:c.length})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Pipeline Value"}),(0,b.jsx)("p",{className:"text-lg font-bold text-green-600",children:aA(g)})]})]})]})},a.id)})}),0===x.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(t.Users,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-slate-500",children:"No sales team members added yet"})]})]})]}),(0,b.jsx)(k.Dialog,{open:Y,onOpenChange:a=>{Z(a),a||(ab(null),_(null))},children:(0,b.jsxs)(k.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Upload Contract"}),(0,b.jsxs)(k.DialogDescription,{children:["A signed contract is required to move ",$?.company_name," to the Onboarding stage."]})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Contract Document *"}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-slate-200 rounded-lg p-6 text-center cursor-pointer hover:border-blue-500 transition-colors",onClick:()=>ak.current?.click(),children:[(0,b.jsx)("input",{type:"file",ref:ak,className:"hidden",accept:".pdf,.doc,.docx",onChange:a=>{let b=a.target.files?.[0];b&&ab(b)}}),aa?(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-green-600",children:[(0,b.jsx)(D.FileText,{className:"h-8 w-8"}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("p",{className:"font-medium",children:aa.name}),(0,b.jsxs)("p",{className:"text-xs text-slate-500",children:[(aa.size/1024).toFixed(1)," KB"]})]})]}):(0,b.jsxs)("div",{className:"text-slate-500",children:[(0,b.jsx)(C.Upload,{className:"h-8 w-8 mx-auto mb-2"}),(0,b.jsx)("p",{className:"font-medium",children:"Click to upload contract"}),(0,b.jsx)("p",{className:"text-xs",children:"PDF, DOC, or DOCX (max 10MB)"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(e.Button,{variant:"outline",className:"flex-1",onClick:()=>{Z(!1),ab(null),_(null)},children:"Cancel"}),(0,b.jsx)(e.Button,{className:"flex-1",onClick:au,disabled:!aa||ac,children:ac?"Uploading...":"Upload & Move to Onboarding"})]})]})]})}),(0,b.jsx)(k.Dialog,{open:Q,onOpenChange:a=>{R(a),a||(V(null),ah(null),aw())},children:(0,b.jsxs)(k.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Edit Lead"}),(0,b.jsx)(k.DialogDescription,{children:"Update lead information and stage"})]}),U&&(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Company Name *"}),(0,b.jsx)(g.Input,{value:am.company_name,onChange:a=>an({...am,company_name:a.target.value}),placeholder:"Acme Corp"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Trading Name"}),(0,b.jsx)(g.Input,{value:am.trading_name,onChange:a=>an({...am,trading_name:a.target.value}),placeholder:"Acme Trading"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"KRA PIN"}),(0,b.jsx)(g.Input,{value:am.kra_pin,onChange:a=>an({...am,kra_pin:a.target.value}),placeholder:"A123456789X"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Contact Name"}),(0,b.jsx)(g.Input,{value:am.contact_name,onChange:a=>an({...am,contact_name:a.target.value}),placeholder:"John Doe"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Email"}),(0,b.jsx)(g.Input,{type:"email",value:am.contact_email,onChange:a=>an({...am,contact_email:a.target.value}),placeholder:"john@acme.com"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Phone"}),(0,b.jsx)(g.Input,{value:am.contact_phone,onChange:a=>an({...am,contact_phone:a.target.value}),placeholder:"+254 7XX XXX XXX"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Stage"}),(0,b.jsxs)(j.Select,{value:ae,onValueChange:a=>af(a),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{})}),(0,b.jsx)(j.SelectContent,{children:G.map(a=>(0,b.jsx)(j.SelectItem,{value:a.id,children:a.label},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Assigned To"}),(0,b.jsxs)(j.Select,{value:am.assigned_to,onValueChange:a=>an({...am,assigned_to:a}),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Select sales person"})}),(0,b.jsx)(j.SelectContent,{children:x.filter(a=>a.is_active).map(a=>(0,b.jsx)(j.SelectItem,{value:a.id,children:a.name},a.id))})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Expected Value (KES)"}),(0,b.jsx)(g.Input,{type:"number",value:am.expected_value,onChange:a=>an({...am,expected_value:a.target.value}),placeholder:"100000"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Source"}),(0,b.jsxs)(j.Select,{value:am.source,onValueChange:a=>an({...am,source:a}),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Select source"})}),(0,b.jsx)(j.SelectContent,{children:H.map(a=>(0,b.jsx)(j.SelectItem,{value:a,children:a},a))})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Notes"}),(0,b.jsx)(i.Textarea,{value:am.notes,onChange:a=>an({...am,notes:a.target.value}),placeholder:"Additional notes about this lead...",rows:3})]}),"onboarding"===ae&&"onboarding"!==U.stage&&(0,b.jsxs)("div",{className:"space-y-2 p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,b.jsx)(l.Label,{className:"text-amber-800",children:"Contract Document Required *"}),(0,b.jsx)("p",{className:"text-sm text-amber-600 mb-2",children:"A signed contract is required when moving to Onboarding stage."}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-amber-300 rounded-lg p-4 text-center cursor-pointer hover:border-amber-500 transition-colors bg-white",onClick:()=>al.current?.click(),children:[(0,b.jsx)("input",{type:"file",ref:al,className:"hidden",accept:".pdf,.doc,.docx",onChange:a=>{let b=a.target.files?.[0];b&&ah(b)}}),ag?(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-green-600",children:[(0,b.jsx)(D.FileText,{className:"h-6 w-6"}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:ag.name}),(0,b.jsxs)("p",{className:"text-xs text-slate-500",children:[(ag.size/1024).toFixed(1)," KB"]})]})]}):(0,b.jsxs)("div",{className:"text-amber-600",children:[(0,b.jsx)(C.Upload,{className:"h-6 w-6 mx-auto mb-1"}),(0,b.jsx)("p",{className:"font-medium text-sm",children:"Click to upload contract"}),(0,b.jsx)("p",{className:"text-xs",children:"PDF, DOC, or DOCX"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,b.jsx)(e.Button,{variant:"outline",className:"flex-1",onClick:()=>{R(!1),V(null),ah(null),aw()},children:"Cancel"}),(0,b.jsx)(e.Button,{className:"flex-1",onClick:az,disabled:ai,children:ai?"Saving...":"Save Changes"})]})]})]})})]})}a.s(["default",()=>I],86295)}];

//# sourceMappingURL=app_admin_sales_page_tsx_45ed12ba._.js.map