module.exports=[5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},62213,a=>{"use strict";let b=(0,a.i(70106).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["default",()=>b])},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(35112);var d=a.i(11011),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(97895);function h({className:a,...c}){return(0,b.jsx)(f,{"data-slot":"label",className:(0,g.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>h],17171)},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},41792,a=>{"use strict";var b=a.i(72131),c=a.i(50944);function d(){let a=(0,c.useRouter)(),[d,e]=(0,b.useState)({isChecking:!0,hasAccess:!1,user:null});return(0,b.useEffect)(()=>{(async()=>{try{let b=await fetch("/api/auth/session",{credentials:"include"});if(!b.ok){a.replace("/auth/login"),e({isChecking:!1,hasAccess:!1,user:null});return}let c=await b.json();if(!c.success||!c.user){a.replace("/auth/login"),e({isChecking:!1,hasAccess:!1,user:null});return}let d=(c.user.role||"").toLowerCase();if(["supervisor","manager","cashier"].includes(d)){let b=c.user.branch_id;a.replace(b?`/sales/summary?branch=${b}`:"/sales/summary"),e({isChecking:!1,hasAccess:!1,user:c.user});return}e({isChecking:!1,hasAccess:!0,user:c.user})}catch(b){console.error("Error checking HQ access:",b),a.replace("/auth/login"),e({isChecking:!1,hasAccess:!1,user:null})}})()},[a]),d}a.s(["useHQAccess",()=>d])},210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},33441,a=>{"use strict";var b=a.i(34157);a.s(["Check",()=>b.default])},70121,a=>{"use strict";var b=a.i(72131);function c(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function d(...a){return b=>{let d=!1,e=a.map(a=>{let e=c(a,b);return d||"function"!=typeof e||(d=!0),e});if(d)return()=>{for(let b=0;b<e.length;b++){let d=e[b];"function"==typeof d?d():c(a[b],null)}}}}function e(...a){return b.useCallback(d(...a),a)}a.s(["composeRefs",()=>d,"useComposedRefs",()=>e])},39723,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(33441),e=a.i(37539),f=a.i(97895),g=a.i(40695),h=a.i(29154),i=a.i(30342);function j({options:a,value:j,onValueChange:k,placeholder:l="Select option...",searchPlaceholder:m="Search...",emptyMessage:n="No results found.",disabled:o=!1,className:p}){let[q,r]=c.useState(!1),s=a.find(a=>a.value===j);return(0,b.jsxs)(i.Popover,{open:q,onOpenChange:r,children:[(0,b.jsx)(i.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",role:"combobox","aria-expanded":q,disabled:o,className:(0,f.cn)("w-full justify-between rounded-xl font-normal",!j&&"text-muted-foreground",p),children:[(0,b.jsx)("span",{className:"truncate",children:s?s.label:l}),(0,b.jsx)(e.ChevronsUpDown,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,b.jsx)(i.PopoverContent,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:(0,b.jsxs)(h.Command,{children:[(0,b.jsx)(h.CommandInput,{placeholder:m,className:"h-9"}),(0,b.jsxs)(h.CommandList,{children:[(0,b.jsx)(h.CommandEmpty,{children:n}),(0,b.jsx)(h.CommandGroup,{children:a.map(a=>(0,b.jsxs)(h.CommandItem,{value:a.label,onSelect:()=>{k?.(a.value),r(!1)},children:[(0,b.jsx)("span",{className:"truncate",children:a.label}),(0,b.jsx)(d.Check,{className:(0,f.cn)("ml-auto h-4 w-4",j===a.value?"opacity-100":"opacity-0")})]},a.value))})]})]})})]})}a.s(["SearchableSelect",()=>j])},39140,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(40695),f=a.i(3130),g=a.i(5522),h=a.i(17171),i=a.i(39723),j=a.i(69265),k=a.i(210);let l=(0,a.i(70106).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var m=a.i(96221),n=a.i(20094),o=a.i(41792);let p=[{cd:"KE",cd_nm:"Kenya"},{cd:"AE",cd_nm:"United Arab Emirates"},{cd:"CN",cd_nm:"China"},{cd:"DE",cd_nm:"Germany"},{cd:"GB",cd_nm:"United Kingdom"},{cd:"IN",cd_nm:"India"},{cd:"JP",cd_nm:"Japan"},{cd:"SA",cd_nm:"Saudi Arabia"},{cd:"TZ",cd_nm:"Tanzania"},{cd:"UG",cd_nm:"Uganda"},{cd:"US",cd_nm:"United States"},{cd:"ZA",cd_nm:"South Africa"}].sort((a,b)=>a.cd_nm.localeCompare(b.cd_nm));function q(){let{isChecking:a,hasAccess:q}=(0,o.useHQAccess)(),r=(0,d.useRouter)(),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)({itemTypes:[],origins:p,quantityUnits:[],packageUnits:[],taxTypes:[]}),[y,z]=(0,c.useState)({itemName:"",description:"",itemType:"",classCode:"",taxType:"",origin:"",batchNumber:"",purchasePrice:"",salePrice:"",sku:"",quantityUnit:"",packageUnit:""});if((0,c.useEffect)(()=>{q&&A()},[q]),a)return(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,b.jsx)(m.Loader2,{className:"h-8 w-8 animate-spin text-primary"})});if(!q)return null;let A=async()=>{try{let[a,b]=await Promise.all([fetch("/api/kra/saved-data?type=codelist"),fetch("/api/kra/saved-data?type=classifications")]),c=await a.json(),d=await b.json();if(c.data){let a=c.data,b=a=>{let b=new Set;return a.filter(a=>!b.has(a.cd)&&(b.add(a.cd),!0))},d=b(a.filter(a=>"05"===a.cd_cls).map(a=>({cd:a.cd,cd_nm:a.cd_nm})));x({itemTypes:b(a.filter(a=>"24"===a.cd_cls).map(a=>({cd:a.cd,cd_nm:a.cd_nm}))),origins:d.length>0?d:p,quantityUnits:b(a.filter(a=>"10"===a.cd_cls).map(a=>({cd:a.cd,cd_nm:a.cd_nm}))),packageUnits:b(a.filter(a=>"17"===a.cd_cls).map(a=>({cd:a.cd,cd_nm:a.cd_nm}))),taxTypes:b(a.filter(a=>"04"===a.cd_cls).map(a=>({cd:a.cd,cd_nm:a.cd_nm})))})}d.data&&v(d.data)}catch(a){console.error("Error fetching KRA data:",a)}},B=async()=>{if(!y.itemName||!y.itemType||!y.classCode||!y.taxType||!y.origin||!y.quantityUnit||!y.packageUnit)return void n.toast.error("Please fill in all required fields");t(!0);try{let a=await fetch("/api/headquarters/items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemName:y.itemName,description:y.description,itemType:y.itemType,classCode:y.classCode,taxType:y.taxType,origin:y.origin,batchNumber:y.batchNumber,purchasePrice:y.purchasePrice?parseFloat(y.purchasePrice):null,salePrice:y.salePrice?parseFloat(y.salePrice):null,sku:y.sku,quantityUnit:y.quantityUnit,packageUnit:y.packageUnit})}),b=await a.json();b.success?(n.toast.success("Item created successfully"),r.push("/headquarters/items")):n.toast.error(b.error||"Failed to create item")}catch(a){console.error("Error creating item:",a),n.toast.error("Failed to create item")}finally{t(!1)}};return(0,b.jsxs)("div",{className:"flex h-screen flex-col overflow-hidden bg-gradient-to-b from-slate-50 to-white",children:[(0,b.jsx)(j.DashboardHeader,{currentBranch:"hq"}),(0,b.jsx)("main",{className:"flex-1 overflow-y-auto p-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)(e.Button,{variant:"outline",onClick:()=>r.push("/headquarters/items"),className:"rounded-xl mb-4",children:[(0,b.jsx)(k.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back to Item Catalog"]}),(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Add New Item"}),(0,b.jsx)("p",{className:"mt-1 text-muted-foreground",children:"Create a new item in the vendor catalog. This item will be available for assignment to all branches."})]}),(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{children:["Item Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(g.Input,{value:y.itemName,onChange:a=>z({...y,itemName:a.target.value}),placeholder:"e.g., Super Petrol"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"SKU"}),(0,b.jsx)(g.Input,{value:y.sku,onChange:a=>z({...y,sku:a.target.value}),placeholder:"Optional stock keeping unit"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"Description"}),(0,b.jsx)(g.Input,{value:y.description,onChange:a=>z({...y,description:a.target.value}),placeholder:"Optional description of the item"})]}),(0,b.jsxs)("div",{className:"border-t pt-6",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-4",children:"KRA Classification"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{children:["Item Type ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(i.SearchableSelect,{value:y.itemType,onValueChange:a=>z({...y,itemType:a}),placeholder:"Select type",searchPlaceholder:"Search item types...",options:w.itemTypes.map(a=>({value:a.cd,label:a.cd_nm}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{children:["Country of Origin ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(i.SearchableSelect,{value:y.origin,onValueChange:a=>z({...y,origin:a}),placeholder:"Select country",searchPlaceholder:"Search countries...",options:w.origins.map(a=>({value:a.cd,label:`${a.cd_nm} (${a.cd})`}))})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{children:["Classification Code ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(i.SearchableSelect,{value:y.classCode,onValueChange:a=>z({...y,classCode:a}),placeholder:"Select classification",searchPlaceholder:"Search classifications...",options:u.map(a=>({value:a.item_cls_cd,label:`${a.item_cls_cd} - ${a.item_cls_nm}`}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{children:["Tax Type ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(i.SearchableSelect,{value:y.taxType,onValueChange:a=>z({...y,taxType:a}),placeholder:"Select tax type",searchPlaceholder:"Search tax types...",options:w.taxTypes.map(a=>({value:a.cd,label:a.cd_nm}))})]})]}),(0,b.jsxs)("div",{className:"border-t pt-6",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-4",children:"Units & Packaging"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{children:["Quantity Unit ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(i.SearchableSelect,{value:y.quantityUnit,onValueChange:a=>z({...y,quantityUnit:a}),placeholder:"Select unit",searchPlaceholder:"Search units...",options:w.quantityUnits.map(a=>({value:a.cd,label:a.cd_nm}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{children:["Package Unit ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(i.SearchableSelect,{value:y.packageUnit,onValueChange:a=>z({...y,packageUnit:a}),placeholder:"Select package",searchPlaceholder:"Search packages...",options:w.packageUnits.map(a=>({value:a.cd,label:a.cd_nm}))})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>r.push("/headquarters/items"),children:"Cancel"}),(0,b.jsxs)(e.Button,{onClick:B,disabled:s,children:[(0,b.jsx)(l,{className:"h-4 w-4 mr-2"}),s?"Creating...":"Create Item"]})]})]})})})]})})]})}a.s(["default",()=>q],39140)}];

//# sourceMappingURL=_c533158b._.js.map