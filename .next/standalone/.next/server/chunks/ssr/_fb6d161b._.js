module.exports=[62213,a=>{"use strict";let b=(0,a.i(70106).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["default",()=>b])},3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},30656,a=>{"use strict";function b(a,[b,c]){return Math.min(c,Math.max(b,a))}a.s(["clamp",()=>b])},87532,50537,a=>{"use strict";let b=(0,a.i(70106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["default",()=>b],50537),a.s(["Search",()=>b],87532)},46842,a=>{"use strict";let b=(0,a.i(70106).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(35112);var d=a.i(11011),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(97895);function h({className:a,...c}){return(0,b.jsx)(f,{"data-slot":"label",className:(0,g.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>h],17171)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},46893,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},99385,a=>{"use strict";let b=(0,a.i(70106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],99385)},38968,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(54161),g=a.i(5522),h=a.i(87682),i=a.i(65733),j=a.i(17171),k=a.i(46893),l=a.i(76971),m=a.i(15618),n=a.i(87532),o=a.i(99385),p=a.i(46842),q=a.i(23292),r=a.i(56711);function s(){let[a,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)("all"),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)({vendor_id:"",category_id:"",subject:"",description:"",priority:"medium"});(0,c.useEffect)(()=>{H(),I(),J()},[x]);let H=async()=>{try{let a=new URLSearchParams;"all"!==x&&a.append("status",x);let b=await fetch(`/api/admin/tickets?${a}`),c=await b.json();s(c)}catch(a){console.error("Error fetching tickets:",a)}finally{u(!1)}},I=async()=>{try{let a=await fetch("/api/admin/vendors"),b=await a.json();C(Array.isArray(b)?b:[])}catch(a){console.error("Error fetching vendors:",a),C([])}},J=async()=>{try{let a=await fetch("/api/db/ticket_categories"),b=await a.json();E(Array.isArray(b)?b:[])}catch(a){console.error("Error fetching categories:",a),E([])}},K=async()=>{if(!F.subject)return void q.toast.error("Subject is required");try{let a=JSON.parse(localStorage.getItem("user")||"{}");if(!(await fetch("/api/admin/tickets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...F,created_by:a.id})})).ok)throw Error("Failed to create ticket");q.toast.success("Ticket created successfully"),A(!1),G({vendor_id:"",category_id:"",subject:"",description:"",priority:"medium"}),H()}catch(a){q.toast.error("Failed to create ticket")}},L=a.filter(a=>a.subject?.toLowerCase().includes(v.toLowerCase())||a.vendor_name?.toLowerCase().includes(v.toLowerCase())||a.ticket_number?.toLowerCase().includes(v.toLowerCase()));return t?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Support Tickets"}),(0,b.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage support requests from vendors"})]}),(0,b.jsxs)(i.Dialog,{open:z,onOpenChange:A,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4 mr-2"}),"New Ticket"]})}),(0,b.jsxs)(i.DialogContent,{className:"max-w-lg",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Create Support Ticket"}),(0,b.jsx)(i.DialogDescription,{children:"Log a new support request"})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Vendor"}),(0,b.jsxs)(h.Select,{value:F.vendor_id,onValueChange:a=>G({...F,vendor_id:a}),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{placeholder:"Select vendor"})}),(0,b.jsx)(h.SelectContent,{children:B.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Category"}),(0,b.jsxs)(h.Select,{value:F.category_id,onValueChange:a=>G({...F,category_id:a}),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{placeholder:"Select category"})}),(0,b.jsx)(h.SelectContent,{children:D.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Priority"}),(0,b.jsxs)(h.Select,{value:F.priority,onValueChange:a=>G({...F,priority:a}),children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"low",children:"Low"}),(0,b.jsx)(h.SelectItem,{value:"medium",children:"Medium"}),(0,b.jsx)(h.SelectItem,{value:"high",children:"High"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Subject"}),(0,b.jsx)(g.Input,{value:F.subject,onChange:a=>G({...F,subject:a.target.value}),placeholder:"Brief description of the issue"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Description"}),(0,b.jsx)(k.Textarea,{value:F.description,onChange:a=>G({...F,description:a.target.value}),placeholder:"Detailed description...",rows:4})]}),(0,b.jsx)(e.Button,{onClick:K,className:"w-full",children:"Create Ticket"})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),(0,b.jsx)(g.Input,{placeholder:"Search tickets...",value:v,onChange:a=>w(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(h.Select,{value:x,onValueChange:y,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-40",children:(0,b.jsx)(h.SelectValue,{placeholder:"Filter by status"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(h.SelectItem,{value:"open",children:"Open"}),(0,b.jsx)(h.SelectItem,{value:"in_progress",children:"In Progress"}),(0,b.jsx)(h.SelectItem,{value:"resolved",children:"Resolved"}),(0,b.jsx)(h.SelectItem,{value:"closed",children:"Closed"})]})]})]}),(0,b.jsx)("div",{className:"space-y-4",children:L.map(a=>(0,b.jsx)(d.Card,{className:"hover:shadow-md transition-shadow",children:(0,b.jsx)(d.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-mono text-slate-500",children:a.ticket_number}),(0,b.jsx)(f.Badge,{className:(a=>{switch(a){case"open":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"resolved":return"bg-green-100 text-green-800";default:return"bg-slate-100 text-slate-800"}})(a.status),children:a.status.replace("_"," ")}),(0,b.jsx)(f.Badge,{variant:(a=>{switch(a){case"high":return"destructive";case"medium":return"default";default:return"secondary"}})(a.priority),children:a.priority}),a.category_name&&(0,b.jsx)(f.Badge,{style:{backgroundColor:a.category_color},className:"text-white",children:a.category_name})]}),(0,b.jsx)("h3",{className:"font-semibold text-slate-900",children:a.subject}),a.description&&(0,b.jsx)("p",{className:"text-sm text-slate-600 mt-1 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-3 text-xs text-slate-500",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(p.User,{className:"h-3 w-3"}),a.vendor_name]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(o.Clock,{className:"h-3 w-3"}),(0,r.format)(new Date(a.created_at),"MMM d, yyyy h:mm a")]}),a.assigned_username&&(0,b.jsxs)("span",{children:["Assigned to: ",a.assigned_username]})]})]}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",children:"View"})]})})},a.id))}),0===L.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(l.Ticket,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-slate-500",children:"No tickets found"})]})]})}a.s(["default",()=>s])}];

//# sourceMappingURL=_fb6d161b._.js.map