module.exports=[88237,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},13749,50522,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],13749);var c=a.i(11989);a.s(["ChevronRight",()=>c.default],50522)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},21161,a=>{"use strict";let b=(0,a.i(70106).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>b],21161)},30617,a=>{"use strict";let b=(0,a.i(70106).default)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);a.s(["LayoutDashboard",()=>b],30617)},83497,a=>{"use strict";let b=(0,a.i(70106).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],83497)},38784,a=>{"use strict";let b=(0,a.i(70106).default)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);a.s(["ShoppingCart",()=>b],38784)},5784,a=>{"use strict";var b=a.i(4699);a.s(["ChevronDown",()=>b.default])},73320,a=>{"use strict";let b=(0,a.i(70106).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);a.s(["Upload",()=>b],73320)},24669,a=>{"use strict";let b=(0,a.i(70106).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);a.s(["TrendingUp",()=>b],24669)},60246,a=>{"use strict";let b=(0,a.i(70106).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],60246)},4699,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["default",()=>b])},62213,a=>{"use strict";let b=(0,a.i(70106).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["default",()=>b])},90166,a=>{"use strict";let b=(0,a.i(70106).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>b],90166)},84505,a=>{"use strict";let b=(0,a.i(70106).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);a.s(["Download",()=>b],84505)},69520,a=>{"use strict";let b=(0,a.i(70106).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],69520)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},81464,a=>{"use strict";let b=(0,a.i(70106).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);a.s(["Filter",()=>b],81464)},40614,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40695),e=a.i(3130),f=a.i(88237),g=a.i(54161),h=a.i(69520),i=a.i(81560),j=a.i(84505),k=a.i(81464),l=a.i(67900),m=a.i(87682),n=a.i(5522),o=a.i(69265),p=a.i(344);function q(){let[a,q]=(0,c.useState)([]),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)("all"),[x,y]=(0,c.useState)("all"),[z,A]=(0,c.useState)("all"),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),J=async()=>{try{let a=localStorage.getItem("flow360_user");if(a){let b=JSON.parse(a),c=await fetch(`/api/branches/list?user_id=${b.id}`),d=await c.json();s(d.branches||[])}}catch(a){console.error("Error fetching branches:",a)}},K=async()=>{u(!0);try{let a=new URLSearchParams;z&&"all"!==z&&a.append("branch_id",z),x&&"all"!==x&&a.append("log_type",x);let b=await fetch(`/api/logs${a.toString()?"?"+a.toString():""}`),c=await b.json();q(c.logs||[])}catch(a){console.error("Error fetching logs:",a)}finally{u(!1)}};(0,c.useEffect)(()=>{J()},[]),(0,c.useEffect)(()=>{K()},[z,x]);let L=a.filter(a=>{let b="all"===v||"success"===v&&"success"===a.status||"error"===v&&"error"===a.status,c=!B||a.endpoint.toLowerCase().includes(B.toLowerCase())||a.log_type.toLowerCase().includes(B.toLowerCase());return b&&c}),M=async()=>{if(confirm("Are you sure you want to clear all logs?"))try{await fetch("/api/logs",{method:"DELETE"}),K()}catch(a){console.error("Error clearing logs:",a)}},N=a=>"success"===a?(0,b.jsx)(g.Badge,{className:"bg-green-600",children:"Success"}):(0,b.jsx)(g.Badge,{variant:"destructive",children:"Error"}),O=a=>(0,b.jsx)(g.Badge,{className:{kra_save_sales:"bg-blue-600",kra_stock_items:"bg-purple-600",kra_stock_master:"bg-indigo-600",kra_save_item:"bg-cyan-600",kra_stock_sync:"bg-teal-600",kra_initialize:"bg-orange-600"}[a]||"bg-gray-600",children:a.replace("kra_","").replace(/_/g," ").toUpperCase()});return(0,b.jsxs)("div",{className:"flex min-h-screen w-full overflow-x-hidden bg-background",children:[(0,b.jsx)(p.DashboardSidebar,{collapsed:F,onToggle:()=>G(!F),mobileOpen:H,onMobileClose:()=>I(!1)}),(0,b.jsx)("div",{className:"flex-1 flex flex-col min-w-0 lg:ml-8 my-2 lg:my-6 mx-2 lg:mr-6",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl lg:rounded-tl-3xl shadow-2xl flex-1 flex flex-col overflow-hidden",children:[(0,b.jsx)(o.DashboardHeader,{onMobileMenuToggle:()=>I(!H)}),(0,b.jsx)("main",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 lg:p-6",children:(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(e.CardTitle,{children:"KRA API Logs"}),(0,b.jsx)(e.CardDescription,{children:"Track all KRA eTIMS API calls including sales, stock sync, and item registration"})]}),(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:K,disabled:t,children:[(0,b.jsx)(h.RefreshCw,{className:`h-4 w-4 mr-2 ${t?"animate-spin":""}`}),"Refresh"]}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{let a=new Blob([JSON.stringify(L,null,2)],{type:"application/json"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`kra-logs-${new Date().toISOString()}.json`,c.click(),URL.revokeObjectURL(b)},children:[(0,b.jsx)(j.Download,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:M,children:[(0,b.jsx)(i.Trash2,{className:"h-4 w-4 mr-2"}),"Clear All"]})]})]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)("div",{className:"flex gap-4 mb-6 flex-wrap",children:[(0,b.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,b.jsx)(n.Input,{placeholder:"Search by endpoint or type...",value:B,onChange:a=>C(a.target.value)})}),(0,b.jsxs)(m.Select,{value:z,onValueChange:A,children:[(0,b.jsxs)(m.SelectTrigger,{className:"w-[200px]",children:[(0,b.jsx)(l.Building2,{className:"h-4 w-4 mr-2"}),(0,b.jsx)(m.SelectValue,{placeholder:"Filter by branch"})]}),(0,b.jsxs)(m.SelectContent,{children:[(0,b.jsx)(m.SelectItem,{value:"all",children:"All Branches"}),r.map(a=>(0,b.jsx)(m.SelectItem,{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)(m.Select,{value:x,onValueChange:y,children:[(0,b.jsxs)(m.SelectTrigger,{className:"w-[180px]",children:[(0,b.jsx)(k.Filter,{className:"h-4 w-4 mr-2"}),(0,b.jsx)(m.SelectValue,{placeholder:"Filter by type"})]}),(0,b.jsx)(m.SelectContent,{children:[{value:"all",label:"All Types"},{value:"kra_save_sales",label:"Sales"},{value:"kra_stock_items",label:"Stock Items"},{value:"kra_stock_master",label:"Stock Master"},{value:"kra_save_item",label:"Save Item"},{value:"kra_stock_sync",label:"Stock Sync"},{value:"kra_initialize",label:"Initialize"}].map(a=>(0,b.jsx)(m.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)(m.Select,{value:v,onValueChange:w,children:[(0,b.jsx)(m.SelectTrigger,{className:"w-[150px]",children:(0,b.jsx)(m.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(m.SelectContent,{children:[(0,b.jsx)(m.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(m.SelectItem,{value:"success",children:"Success"}),(0,b.jsx)(m.SelectItem,{value:"error",children:"Errors"})]})]})]}),(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto max-h-[600px]",children:(0,b.jsxs)(f.Table,{className:"min-w-[800px]",children:[(0,b.jsx)(f.TableHeader,{className:"bg-muted sticky top-0",children:(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableHead,{children:"Timestamp"}),(0,b.jsx)(f.TableHead,{children:"Type"}),(0,b.jsx)(f.TableHead,{children:"Endpoint"}),(0,b.jsx)(f.TableHead,{children:"Status"}),(0,b.jsx)(f.TableHead,{children:"Actions"})]})}),(0,b.jsx)(f.TableBody,{children:t?(0,b.jsx)(f.TableRow,{children:(0,b.jsx)(f.TableCell,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"Loading logs..."})}):0===L.length?(0,b.jsx)(f.TableRow,{children:(0,b.jsx)(f.TableCell,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No KRA logs found. Make a sale or sync stock to see logs here."})}):L.map(a=>(0,b.jsxs)(f.TableRow,{className:"cursor-pointer hover:bg-muted/50",children:[(0,b.jsx)(f.TableCell,{className:"font-mono text-xs",children:new Date(a.created_at).toLocaleString()}),(0,b.jsx)(f.TableCell,{children:O(a.log_type)}),(0,b.jsx)(f.TableCell,{className:"font-mono text-sm max-w-[300px] truncate",children:a.endpoint}),(0,b.jsx)(f.TableCell,{children:N(a.status)}),(0,b.jsx)(f.TableCell,{children:(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>E(a),children:"View Details"})})]},a.id))})]})})}),D&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,b.jsxs)(e.Card,{className:"w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:["Log Details",O(D.log_type)]}),(0,b.jsx)(e.CardDescription,{className:"font-mono text-xs mt-1",children:D.endpoint})]}),(0,b.jsx)(d.Button,{variant:"ghost",onClick:()=>E(null),children:"Close"})]})}),(0,b.jsx)(e.CardContent,{className:"overflow-y-auto max-h-[calc(90vh-120px)]",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Request Info"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Type:"})," ",O(D.log_type)]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Status:"})," ",N(D.status)]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Timestamp:"})," ",new Date(D.created_at).toLocaleString()]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Endpoint:"})," ",(0,b.jsx)("span",{className:"font-mono text-xs",children:D.endpoint})]})]})]}),D.payload&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Request Payload"}),(0,b.jsx)("pre",{className:"bg-muted p-4 rounded-lg overflow-x-auto text-xs max-h-[300px] overflow-y-auto",children:JSON.stringify(D.payload,null,2)})]}),D.response&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Response"}),(0,b.jsx)("pre",{className:`p-4 rounded-lg overflow-x-auto text-xs max-h-[300px] overflow-y-auto ${"error"===D.status?"bg-destructive/10":"bg-muted"}`,children:JSON.stringify(D.response,null,2)})]})]})})]})})]})]})})]})})]})}a.s(["default",()=>q])}];

//# sourceMappingURL=_83ddf4a2._.js.map