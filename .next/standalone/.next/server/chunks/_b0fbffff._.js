module.exports=[28286,t=>{"use strict";var e={},n=function(){function t(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(t,n){void 0===n&&(n=null),n?n.__autoTableDocumentDefaults=t:e=t},t.unifyColor=function(t){return Array.isArray(t)?t:"number"==typeof t?[t,t,t]:"string"==typeof t?[t]:null},t.prototype.applyStyles=function(e,n){void 0===n&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o,r,i,a=this.jsPDFDocument.internal.getFont(),l=a.fontStyle,s=a.fontName;if(e.font&&(s=e.font),e.fontStyle){l=e.fontStyle;var h=this.getFontList()[s];h&&-1===h.indexOf(l)&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(h[0]),l=h[0])}if(this.jsPDFDocument.setFont(s,l),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var u=t.unifyColor(e.fillColor);u&&(o=this.jsPDFDocument).setFillColor.apply(o,u),(u=t.unifyColor(e.textColor))&&(r=this.jsPDFDocument).setTextColor.apply(r,u),(u=t.unifyColor(e.lineColor))&&(i=this.jsPDFDocument).setDrawColor.apply(i,u),"number"==typeof e.lineWidth&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(t,e,n){return this.jsPDFDocument.splitTextToSize(t,e,n)},t.prototype.rect=function(t,e,n,o,r){return this.jsPDFDocument.rect(t,e,n,o,r)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return e||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return null==t.width&&(t={width:t.getWidth(),height:t.getHeight()}),t},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}"function"==typeof SuppressedError&&SuppressedError;var i=function(t){function e(e){var n=t.call(this)||this;return n._element=e,n}return r(e,t),e}(Array);function a(t,e,n){return n.applyStyles(e,!0),(Array.isArray(t)?t:[t]).map(function(t){return n.getTextWidth(t)}).reduce(function(t,e){return Math.max(t,e)},0)}function l(t,e,n,o){var r=e.settings.tableLineWidth,i=e.settings.tableLineColor;t.applyStyles({lineWidth:r,lineColor:i});var a=s(r,!1);a&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),o.y-n.y,a)}function s(t,e){var n=t>0,o=e||0===e;return n&&o?"DF":n?"S":o?"F":null}function h(t,e){var n,o,r,i;if(Array.isArray(t=t||e))if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};else{if(3===t.length)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(2===t.length)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t=1===t.length?t[0]:e}return"object"==typeof t?("number"==typeof t.vertical&&(t.top=t.vertical,t.bottom=t.vertical),"number"==typeof t.horizontal&&(t.right=t.horizontal,t.left=t.horizontal),{left:null!=(n=t.left)?n:e,top:null!=(o=t.top)?o:e,right:null!=(r=t.right)?r:e,bottom:null!=(i=t.bottom)?i:e}):("number"!=typeof t&&(t=e),{top:t,right:t,bottom:t,left:t})}function u(t,e){var n=h(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function d(t,e){var n=function t(e,n){var o=n(e);return"rgba(0, 0, 0, 0)"!==o&&"transparent"!==o&&"initial"!==o&&"inherit"!==o?o:null==e.parentElement?null:t(e.parentElement,n)}(t,e);if(!n)return null;var o=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!o||!Array.isArray(o))return null;var r=[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])];return 0===parseInt(o[4])||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function c(t,e,n,o,r){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(var i=Object(t),a=1;a<arguments.length;a++){var l=arguments[a];if(null!=l)for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(i[s]=l[s])}return i}var p=function(t,e,n){this.table=e,this.pageNumber=e.pageNumber,this.settings=e.settings,this.cursor=n,this.doc=t.getDocument()},f=function(t){function e(e,n,o,r,i,a){var l=t.call(this,e,n,a)||this;return l.cell=o,l.row=r,l.column=i,l.section=r.section,l}return r(e,t),e}(p),g=function(){function t(t,e){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=e.columns,this.head=e.head,this.body=e.body,this.foot=e.foot}return t.prototype.getHeadHeight=function(t){return this.head.reduce(function(e,n){return e+n.getMaxCellHeight(t)},0)},t.prototype.getFootHeight=function(t){return this.foot.reduce(function(e,n){return e+n.getMaxCellHeight(t)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(t,e,n,o,r,i){for(var a=0;a<e.length;a++){var l=!1===(0,e[a])(new f(t,this,n,o,r,i));if(n.text=Array.isArray(n.text)?n.text:[n.text],l)return!1}return!0},t.prototype.callEndPageHooks=function(t,e){t.applyStyles(t.userStyles);for(var n=0,o=this.hooks.didDrawPage;n<o.length;n++)(0,o[n])(new p(t,this,e))},t.prototype.callWillDrawPageHooks=function(t,e){for(var n=0,o=this.hooks.willDrawPage;n<o.length;n++)(0,o[n])(new p(t,this,e))},t.prototype.getWidth=function(t){if("number"==typeof this.settings.tableWidth)return this.settings.tableWidth;if("wrap"===this.settings.tableWidth)return this.columns.reduce(function(t,e){return t+e.wrappedWidth},0);var e=this.settings.margin;return t-e.left-e.right},t}(),y=function(){function t(t,e,n,o,r){void 0===r&&(r=!1),this.height=0,this.raw=t,t instanceof i&&(this.raw=t._element,this.element=t._element),this.index=e,this.section=n,this.cells=o,this.spansMultiplePages=r}return t.prototype.getMaxCellHeight=function(t){var e=this;return t.reduce(function(t,n){var o;return Math.max(t,(null==(o=e.cells[n.index])?void 0:o.height)||0)},0)},t.prototype.hasRowSpan=function(t){var e=this;return t.filter(function(t){var n=e.cells[t.index];return!!n&&n.rowSpan>1}).length>0},t.prototype.canEntireRowFit=function(t,e){return this.getMaxCellHeight(e)<=t},t.prototype.getMinimumRowHeight=function(t,e){var n=this;return t.reduce(function(t,o){var r=n.cells[o.index];if(!r)return 0;var i=e.getLineHeight(r.styles.fontSize),a=r.padding("vertical")+i;return a>t?a:t},0)},t}(),m=function(){function t(t,e,n){this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=e,this.section=n,this.raw=t;var o,r=t;null==t||"object"!=typeof t||Array.isArray(t)?(this.rowSpan=1,this.colSpan=1):(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,r=null!=(o=t.content)?o:t,t._element&&(this.raw=t._element));var i=null!=r?""+r:"";this.text=i.split(/\r\n|\r|\n/g)}return t.prototype.getTextPos=function(){if("top"===this.styles.valign)t=this.y+this.padding("top");else if("bottom"===this.styles.valign)t=this.y+this.height-this.padding("bottom");else{var t,e,n=this.height-this.padding("vertical");t=this.y+n/2+this.padding("top")}if("right"===this.styles.halign)e=this.x+this.width-this.padding("right");else if("center"===this.styles.halign){var o=this.width-this.padding("horizontal");e=this.x+o/2+this.padding("left")}else e=this.x+this.padding("left");return{x:e,y:t}},t.prototype.getContentHeight=function(t,e){return void 0===e&&(e=1.15),Math.max((Array.isArray(this.text)?this.text.length:1)*(this.styles.fontSize/t*e)+this.padding("vertical"),this.styles.minCellHeight)},t.prototype.padding=function(t){var e=h(this.styles.cellPadding,0);return"vertical"===t?e.top+e.bottom:"horizontal"===t?e.left+e.right:e[t]},t}(),v=function(){function t(t,e,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=e,this.index=n}return t.prototype.getMaxCustomCellWidth=function(t){for(var e=0,n=0,o=t.allRows();n<o.length;n++){var r=o[n].cells[this.index];r&&"number"==typeof r.styles.cellWidth&&(e=Math.max(e,r.styles.cellWidth))}return e},t}();function w(t,e,n){for(var o=e,r=t.reduce(function(t,e){return t+e.wrappedWidth},0),i=0;i<t.length;i++){var a=t[i],l=o*(a.wrappedWidth/r),s=a.width+l,h=n(a),u=s<h?h:s;e-=u-a.width,a.width=u}if(e=Math.round(1e10*e)/1e10){var d=t.filter(function(t){return!(e<0)||t.width>n(t)});d.length&&(e=w(d,e,n))}return e}function b(t,e,n,o,r){return t.map(function(t){var i=t,l=e,s=n,h=o,u=r,d=1e4*h.scaleFactor();if((l=Math.ceil(l*d)/d)>=a(i,s,h))return i;for(;l<a(i+u,s,h)&&!(i.length<=1);)i=i.substring(0,i.length-1);return i.trim()+u})}function x(t,e,n,o,r,i){var a={};return e.map(function(e,l){for(var s=0,h={},u=0,d=0,p=0;p<n.length;p++){var f=n[p];if(null==a[f.index]||0===a[f.index].left)if(0===d){var g=void 0;g=Array.isArray(e)?e[f.index-u-s]:e[f.dataKey];var v={};"object"!=typeof g||Array.isArray(g)||(v=(null==g?void 0:g.styles)||{});var w=new m(g,function(t,e,n,o,r,i,a){var l,s={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}}[o];"head"===t?l=r.headStyles:"body"===t?l=r.bodyStyles:"foot"===t&&(l=r.footStyles);var h=c({},s.table,s[t],r.styles,l),u=r.columnStyles[e.dataKey]||r.columnStyles[e.index]||{},d="body"===t&&n%2==0?c({},s.alternateRow,r.alternateRowStyles):{},p=c({},{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/i,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0},h,d,"body"===t?u:{});return c(p,a)}(t,f,l,r,o,i,v),t);h[f.dataKey]=w,h[f.index]=w,d=w.colSpan-1,a[f.index]={left:w.rowSpan-1,times:d}}else d--,u++;else a[f.index].left--,d=a[f.index].times,s++}return new y(e,l,t,h)})}function S(t,e){var n={};return t.forEach(function(t){if(null!=t.raw){var o=function(t,e){if("head"===t){if("object"==typeof e)return e.header||null;else if("string"==typeof e||"number"==typeof e)return e}else if("foot"===t&&"object"==typeof e)return e.footer;return null}(e,t.raw);null!=o&&(n[t.dataKey]=o)}}),Object.keys(n).length>0?n:null}function C(t,e,n,o){var r=e.settings;t.applyStyles(t.userStyles),("firstPage"===r.showHead||"everyPage"===r.showHead)&&e.head.forEach(function(r){return F(t,e,r,n,o)})}function D(t,e,n,o,r,i){t.applyStyles(t.userStyles);var a=Math.min(n+(i=null!=i?i:e.body.length),e.body.length),l=-1;return e.body.slice(n,a).forEach(function(i,a){var s=n+a===e.body.length-1,h=R(t,e,s,o);i.canEntireRowFit(h,r)&&(F(t,e,i,o,r),l=n+a)}),l}function P(t,e,n,o){var r=e.settings;t.applyStyles(t.userStyles),("lastPage"===r.showFoot||"everyPage"===r.showFoot)&&e.foot.forEach(function(r){return F(t,e,r,n,o)})}function W(t,e,n,o,r,i,a){var l=R(t,e,o,i);if(n.canEntireRowFit(l,a))F(t,e,n,i,a);else if(function(t,e,n,o){var r=t.pageSize().height,i=o.settings.margin,a=r-(i.top+i.bottom);"body"===e.section&&(a-=o.getHeadHeight(o.columns)+o.getFootHeight(o.columns));var l=e.getMinimumRowHeight(o.columns,t);if(l>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!(l<n))return!1;var s=e.hasRowSpan(o.columns);return e.getMaxCellHeight(o.columns)>a?(s&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!s&&"avoid"!==o.settings.rowPageBreak}(t,n,l,e)){var s=function(t,e,n,o){var r={};t.spansMultiplePages=!0,t.height=0;for(var i=0,a=0,l=n.columns;a<l.length;a++){var s=l[a],h=t.cells[s.index];if(h){Array.isArray(h.text)||(h.text=[h.text]);var u=new m(h.raw,h.styles,h.section);(u=c(u,h)).text=[];var d=function(t,e,n){var o=n.getLineHeight(t.styles.fontSize);return Math.max(0,Math.floor((e-t.padding("vertical"))/o))}(h,e,o);h.text.length>d&&(u.text=h.text.splice(d,h.text.length));var p=o.scaleFactor(),f=o.getLineHeightFactor();h.contentHeight=h.getContentHeight(p,f),h.contentHeight>=e&&(h.contentHeight=e,u.styles.minCellHeight-=e),h.contentHeight>t.height&&(t.height=h.contentHeight),u.contentHeight=u.getContentHeight(p,f),u.contentHeight>i&&(i=u.contentHeight),r[s.index]=u}}var g=new y(t.raw,-1,t.section,r,!0);g.height=i;for(var v=0,w=n.columns;v<w.length;v++){var s=w[v],u=g.cells[s.index];u&&(u.height=g.height);var h=t.cells[s.index];h&&(h.height=t.height)}return g}(n,l,e,t);F(t,e,n,i,a),H(t,e,r,i,a),W(t,e,s,o,r,i,a)}else H(t,e,r,i,a),W(t,e,n,o,r,i,a)}function F(t,e,n,o,r){o.x=e.settings.margin.left;for(var i=0;i<r.length;i++){var a=r[i],l=n.cells[a.index];if(!l||(t.applyStyles(l.styles),l.x=o.x,l.y=o.y,!1===e.callCellHooks(t,e.hooks.willDrawCell,l,n,a,o))){o.x+=a.width;continue}!function(t,e,n){var o=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),"number"==typeof o.lineWidth){var r=s(o.lineWidth,o.fillColor);r&&t.rect(e.x,n.y,e.width,e.height,r)}else"object"==typeof o.lineWidth&&(o.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),function(t,e,n,o){var r,i,a,l;function s(e,n,o,r,i){t.getDocument().setLineWidth(e),t.getDocument().line(n,o,r,i,"S")}o.top&&(r=n.x,i=n.y,a=n.x+e.width,l=n.y,o.right&&(a+=.5*o.right),o.left&&(r-=.5*o.left),s(o.top,r,i,a,l)),o.bottom&&(r=n.x,i=n.y+e.height,a=n.x+e.width,l=n.y+e.height,o.right&&(a+=.5*o.right),o.left&&(r-=.5*o.left),s(o.bottom,r,i,a,l)),o.left&&(r=n.x,i=n.y,a=n.x,l=n.y+e.height,o.top&&(i-=.5*o.top),o.bottom&&(l+=.5*o.bottom),s(o.left,r,i,a,l)),o.right&&(r=n.x+e.width,i=n.y,a=n.x+e.width,l=n.y+e.height,o.top&&(i-=.5*o.top),o.bottom&&(l+=.5*o.bottom),s(o.right,r,i,a,l))}(t,e,n,o.lineWidth))}(t,l,o);var h=l.getTextPos();!function(t,e,n,o,r){o=o||{};var i=r.internal.scaleFactor,a=r.internal.getFontSize()/i,l=a*(r.getLineHeightFactor?r.getLineHeightFactor():1.15),s="",h=1;if(("middle"===o.valign||"bottom"===o.valign||"center"===o.halign||"right"===o.halign)&&(h=(s="string"==typeof t?t.split(/\r\n|\r|\n/g):t).length||1),n+=.8500000000000001*a,"middle"===o.valign?n-=h/2*l:"bottom"===o.valign&&(n-=h*l),"center"===o.halign||"right"===o.halign){var u=a;if("center"===o.halign&&(u*=.5),s&&h>=1){for(var d=0;d<s.length;d++)r.text(s[d],e-r.getStringUnitWidth(s[d])*u,n),n+=l;return}e-=r.getStringUnitWidth(t)*u}"justify"===o.halign?r.text(t,e,n,{maxWidth:o.maxWidth||100,align:"justify"}):r.text(t,e,n)}(l.text,h.x,h.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,a,o),o.x+=a.width}o.y+=n.height}function R(t,e,n,o){var r=e.settings.margin.bottom,i=e.settings.showFoot;return("everyPage"===i||"lastPage"===i&&n)&&(r+=e.getFootHeight(e.columns)),t.pageSize().height-o.y-r}function H(t,e,n,o,r,i){void 0===r&&(r=[]),void 0===i&&(i=!1),t.applyStyles(t.userStyles),"everyPage"!==e.settings.showFoot||i||e.foot.forEach(function(n){return F(t,e,n,o,r)}),e.callEndPageHooks(t,o);var a=e.settings.margin;l(t,e,n,o),E(t),e.pageNumber++,o.x=a.left,o.y=a.top,n.y=a.top,e.callWillDrawPageHooks(t,o),"everyPage"===e.settings.showHead&&(e.head.forEach(function(n){return F(t,e,n,o,r)}),t.applyStyles(t.userStyles))}function E(t){var e=t.pageNumber();return t.setPage(e+1),t.pageNumber()===e&&(t.addPage(),!0)}function A(t,e){var o,r,s,p,f,y,m,R,A,_,T,N,k,j,z,L,M,O,I,B=function(t,e){for(var o,r,a,l,s,u,p,f,g,y,m,v,w,b,x,S,C,D,P,W,F,R,H,E,A,_,T,N,k,j=new n(t),z=j.getDocumentOptions(),L=j.getGlobalOptions(),M=0,O=[L,z,e];M<O.length;M++){var I=O[M];I&&"object"!=typeof I&&console.error("The options parameter should be of type object, is: "+typeof I),I.startY&&"number"!=typeof I.startY&&(console.error("Invalid value for startY option",I.startY),delete I.startY)}var B=c({},L,z,e),$=function(t,e,n){for(var o={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},r=function(r){if("columnStyles"===r)o.columnStyles=c({},t[r],e[r],n[r]);else{var i=[t,e,n].map(function(t){return t[r]||{}});o[r]=c({},i[0],i[1],i[2])}},i=0,a=Object.keys(o);i<a.length;i++)r(a[i]);return o}(L,z,e),U=function(t,e,n){for(var o={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},r=0,i=[t,e,n];r<i.length;r++){var a=i[r];a.didParseCell&&o.didParseCell.push(a.didParseCell),a.willDrawCell&&o.willDrawCell.push(a.willDrawCell),a.didDrawCell&&o.didDrawCell.push(a.didDrawCell),a.willDrawPage&&o.willDrawPage.push(a.willDrawPage),a.didDrawPage&&o.didDrawPage.push(a.didDrawPage)}return o}(L,z,e),q=(o=j,H=h((r=B).margin,40/o.scaleFactor()),E=null!=(a=o,l=r.startY,s=a.getLastAutoTable(),u=a.scaleFactor(),p=a.pageNumber(),f=!1,s&&s.startPageNumber&&(f=s.startPageNumber+s.pageNumber-1===p),g="number"==typeof l?l:(null==l||!1===l)&&f&&(null==s?void 0:s.finalY)!=null?s.finalY+20/u:null)?g:H.top,F=!0===r.showFoot?"everyPage":!1===r.showFoot?"never":null!=(y=r.showFoot)?y:"everyPage",R=!0===r.showHead?"everyPage":!1===r.showHead?"never":null!=(m=r.showHead)?m:"everyPage",A=null!=(v=r.useCss)&&v,_=r.theme||(A?"plain":"striped"),T=!!r.horizontalPageBreak,N=null!=(w=r.horizontalPageBreakRepeat)?w:null,{includeHiddenHtml:null!=(b=r.includeHiddenHtml)&&b,useCss:A,theme:_,startY:E,margin:H,pageBreak:null!=(x=r.pageBreak)?x:"auto",rowPageBreak:null!=(S=r.rowPageBreak)?S:"auto",tableWidth:null!=(C=r.tableWidth)?C:"auto",showHead:R,showFoot:F,tableLineWidth:null!=(D=r.tableLineWidth)?D:0,tableLineColor:null!=(P=r.tableLineColor)?P:200,horizontalPageBreak:T,horizontalPageBreakRepeat:N,horizontalPageBreakBehaviour:null!=(W=r.horizontalPageBreakBehaviour)?W:"afterAllRows"}),K=function(t,e,n){var o,r,a,l,s,u=e.head||[],c=e.body||[],p=e.foot||[];if(e.html){var f=e.includeHiddenHtml;if(n){var g=function(t,e,n,o,r){void 0===o&&(o=!1),void 0===r&&(r=!1);var a,l,s="string"==typeof e?n.document.querySelector(e):e,u=Object.keys(t.getFontList()),c=t.scaleFactor(),p=[],f=[],g=[];if(!s)return console.error("Html table could not be found with input: ",e),{head:p,body:f,foot:g};for(var y=0;y<s.rows.length;y++){var m=s.rows[y],v=null==(l=null==(a=null==m?void 0:m.parentElement)?void 0:a.tagName)?void 0:l.toLowerCase(),w=function(t,e,n,o,r,a){for(var l=new i(o),s=0;s<o.cells.length;s++){var u=o.cells[s],c=n.getComputedStyle(u);if(r||"none"!==c.display){var p=void 0;a&&(p=function(t,e,n,o,r){var i={},a=96/72,l=d(e,function(t){return r.getComputedStyle(t).backgroundColor});null!=l&&(i.fillColor=l);var s=d(e,function(t){return r.getComputedStyle(t).color});null!=s&&(i.textColor=s);var u=function(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],o=96/(72/e),r=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,i=h(n.map(function(t){return parseInt(t||"0")/o}),0);return r>i.top&&(i.top=r),r>i.bottom&&(i.bottom=r),i}(o,n);u&&(i.cellPadding=u);var c="borderTopColor",p=a*n,f=o.borderTopWidth;if(o.borderBottomWidth===f&&o.borderRightWidth===f&&o.borderLeftWidth===f){var g=(parseFloat(f)||0)/p;g&&(i.lineWidth=g)}else i.lineWidth={top:(parseFloat(o.borderTopWidth)||0)/p,right:(parseFloat(o.borderRightWidth)||0)/p,bottom:(parseFloat(o.borderBottomWidth)||0)/p,left:(parseFloat(o.borderLeftWidth)||0)/p},!i.lineWidth.top&&(i.lineWidth.right?c="borderRightColor":i.lineWidth.bottom?c="borderBottomColor":i.lineWidth.left&&(c="borderLeftColor"));var y=d(e,function(t){return r.getComputedStyle(t)[c]});null!=y&&(i.lineColor=y);var m=["left","right","center","justify"];-1!==m.indexOf(o.textAlign)&&(i.halign=o.textAlign),-1!==(m=["middle","bottom","top"]).indexOf(o.verticalAlign)&&(i.valign=o.verticalAlign);var v=parseInt(o.fontSize||"");isNaN(v)||(i.fontSize=v/a);var w=function(t){var e="";return("bold"===t.fontWeight||"bolder"===t.fontWeight||parseInt(t.fontWeight)>=700)&&(e="bold"),("italic"===t.fontStyle||"oblique"===t.fontStyle)&&(e+="italic"),e}(o);w&&(i.fontStyle=w);var b=(o.fontFamily||"").toLowerCase();return -1!==t.indexOf(b)&&(i.font=b),i}(t,u,e,c,n)),l.push({rowSpan:u.rowSpan,colSpan:u.colSpan,styles:p,_element:u,content:function(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join("\n"),e.innerText||e.textContent||""}(u)})}}var f=n.getComputedStyle(o);if(l.length>0&&(r||"none"!==f.display))return l}(u,c,n,m,o,r);w&&("thead"===v?p.push(w):"tfoot"===v?g.push(w):f.push(w))}return{head:p,body:f,foot:g}}(t,e.html,n,f,e.useCss)||{};u=g.head||u,c=g.body||u,p=g.foot||u}else console.error("Cannot parse html in non browser environment")}return{columns:e.columns||(o=u,r=c,a=p,l=o[0]||r[0]||a[0]||[],s=[],Object.keys(l).filter(function(t){return"_element"!==t}).forEach(function(t){var e,n=1;"object"!=typeof(e=Array.isArray(l)?l[parseInt(t)]:l[t])||Array.isArray(e)||(n=(null==e?void 0:e.colSpan)||1);for(var o=0;o<n;o++){var r={dataKey:Array.isArray(l)?s.length:t+(o>0?"_".concat(o):"")};s.push(r)}}),s),head:u,body:c,foot:p}}(j,B,k);return{id:e.tableId,content:K,hooks:U,styles:$,settings:q}}(t,e),$=(m=function(t,e){var n=t.content,o=n.columns.map(function(t,e){var n;return new v("object"==typeof t&&null!=(n=t.dataKey)?n:e,t,e)});if(0===n.head.length){var r=S(o,"head");r&&n.head.push(r)}if(0===n.foot.length){var r=S(o,"foot");r&&n.foot.push(r)}var i=t.settings.theme,a=t.styles;return{columns:o,head:x("head",n.head,o,a,i,e),body:x("body",n.body,o,a,i,e),foot:x("foot",n.foot,o,a,i,e)}}(B,(y=new n(t)).scaleFactor()),R=new g(B,m),o=y,r=R,s=o.scaleFactor(),p=r.settings.horizontalPageBreak,f=u(o,r),r.allRows().forEach(function(t){for(var e=0,n=r.columns;e<n.length;e++){var i=n[e],l=t.cells[i.index];if(l){var h=r.hooks.didParseCell;r.callCellHooks(o,h,l,t,i,null);var u=l.padding("horizontal");l.contentWidth=a(l.text,l.styles,o)+u;var d=a(l.text.join(" ").split(/[^\S\u00A0]+/),l.styles,o);if(l.minReadableWidth=d+l.padding("horizontal"),"number"==typeof l.styles.cellWidth)l.minWidth=l.styles.cellWidth,l.wrappedWidth=l.styles.cellWidth;else if("wrap"===l.styles.cellWidth||!0===p)l.contentWidth>f?(l.minWidth=f,l.wrappedWidth=f):(l.minWidth=l.contentWidth,l.wrappedWidth=l.contentWidth);else{var c=10/s;l.minWidth=l.styles.minCellWidth||c,l.wrappedWidth=l.contentWidth,l.minWidth>l.wrappedWidth&&(l.wrappedWidth=l.minWidth)}}}}),r.allRows().forEach(function(t){for(var e=0,n=r.columns;e<n.length;e++){var o=n[e],i=t.cells[o.index];if(i&&1===i.colSpan)o.wrappedWidth=Math.max(o.wrappedWidth,i.wrappedWidth),o.minWidth=Math.max(o.minWidth,i.minWidth),o.minReadableWidth=Math.max(o.minReadableWidth,i.minReadableWidth);else{var a=r.styles.columnStyles[o.dataKey]||r.styles.columnStyles[o.index]||{},l=a.cellWidth||a.minCellWidth;l&&"number"==typeof l&&(o.minWidth=l,o.wrappedWidth=l)}i&&(i.colSpan>1&&!o.minWidth&&(o.minWidth=i.minWidth),i.colSpan>1&&!o.wrappedWidth&&(o.wrappedWidth=i.minWidth))}}),A=[],_=0,R.columns.forEach(function(t){var e=t.getMaxCustomCellWidth(R);e?t.width=e:(t.width=t.wrappedWidth,A.push(t)),_+=t.width}),(T=R.getWidth(y.pageSize().width)-_)&&(T=w(A,T,function(t){return Math.max(t.minReadableWidth,t.minWidth)})),T&&(T=w(A,T,function(t){return t.minWidth})),T=Math.abs(T),!R.settings.horizontalPageBreak&&T>.1/y.scaleFactor()&&(T=T<1?T:Math.round(T),console.warn("Of the table content, ".concat(T," units width could not fit page"))),function(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var o=e[n],r=null,i=0,a=0,l=0;l<t.columns.length;l++){var s=t.columns[l];if((a-=1)>1&&t.columns[l+1])i+=s.width,delete o.cells[s.index];else if(r){var h=r;delete o.cells[s.index],r=null,h.width=s.width+i}else{var h=o.cells[s.index];if(!h)continue;if(a=h.colSpan,i=0,h.colSpan>1){r=h,i+=s.width;continue}h.width=s.width+i}}}(R),function(t,e){for(var n={count:0,height:0},o=0,r=t.allRows();o<r.length;o++){for(var i=r[o],a=0,l=t.columns;a<l.length;a++){var s=l[a],h=i.cells[s.index];if(h){e.applyStyles(h.styles,!0);var u=h.width-h.padding("horizontal");if("linebreak"===h.styles.overflow)h.text=e.splitTextToSize(h.text,u+1/e.scaleFactor(),{fontSize:h.styles.fontSize});else if("ellipsize"===h.styles.overflow)h.text=b(h.text,u,h.styles,e,"...");else if("hidden"===h.styles.overflow)h.text=b(h.text,u,h.styles,e,"");else if("function"==typeof h.styles.overflow){var d=h.styles.overflow(h.text,u);"string"==typeof d?h.text=[d]:h.text=d}h.contentHeight=h.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var c=h.contentHeight/h.rowSpan;h.rowSpan>1&&n.count*n.height<c*h.rowSpan?n={height:c,count:h.rowSpan}:n&&n.count>0&&n.height>c&&(c=n.height),c>i.height&&(i.height=c)}}n.count--}}(R,y),function(t){for(var e={},n=1,o=t.allRows(),r=0;r<o.length;r++)for(var i=o[r],a=0,l=t.columns;a<l.length;a++){var s=l[a],h=e[s.index];if(n>1)n--,delete i.cells[s.index];else if(h)h.cell.height+=i.height,n=h.cell.colSpan,delete i.cells[s.index],h.left--,h.left<=1&&delete e[s.index];else{var u=i.cells[s.index];if(!u)continue;if(u.height=i.height,u.rowSpan>1){var d=o.length-r,c=u.rowSpan>d?d:u.rowSpan;e[s.index]={cell:u,left:c,row:i}}}}}(R),y.applyStyles(y.userStyles),R);k=(N=$.settings).startY,z={x:(j=N.margin).left,y:k},L=$.getHeadHeight($.columns)+$.getFootHeight($.columns),M=k+j.bottom+L,"avoid"===N.pageBreak&&(M+=$.body.reduce(function(t,e){return t+e.height},0)),O=new n(t),("always"===N.pageBreak||null!=N.startY&&M>O.pageSize().height)&&(E(O),z.y=j.top),$.callWillDrawPageHooks(O,z),I=c({},z),$.startPageNumber=O.pageNumber(),N.horizontalPageBreak?function(t,e,n,o){var r=function(t,e){for(var n=[],o=0;o<e.columns.length;o++){var r=function(t,e,n){void 0===n&&(n={});var o,r=u(t,e),i=new Map,a=[],l=[],s=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?s=e.settings.horizontalPageBreakRepeat:("string"==typeof e.settings.horizontalPageBreakRepeat||"number"==typeof e.settings.horizontalPageBreakRepeat)&&(s=[e.settings.horizontalPageBreakRepeat]),s.forEach(function(t){var n=e.columns.find(function(e){return e.dataKey===t||e.index===t});n&&!i.has(n.index)&&(i.set(n.index,!0),a.push(n.index),l.push(e.columns[n.index]),r-=n.wrappedWidth)});for(var h=!0,d=null!=(o=null==n?void 0:n.start)?o:0;d<e.columns.length;){if(i.has(d)){d++;continue}var c=e.columns[d].wrappedWidth;if(h||r>=c)h=!1,a.push(d),l.push(e.columns[d]),r-=c;else break;d++}return{colIndexes:a,columns:l,lastIndex:d-1}}(t,e,{start:o});r.columns.length&&(n.push(r),o=r.lastIndex)}return n}(t,e);if("afterAllRows"===e.settings.horizontalPageBreakBehaviour)r.forEach(function(r,i){var a,l,s,h,u;t.applyStyles(t.userStyles),i>0?H(t,e,n,o,r.columns,!0):C(t,e,o,r.columns),a=t,l=e,s=n,h=o,u=r.columns,a.applyStyles(a.userStyles),l.body.forEach(function(t,e){var n=e===l.body.length-1;W(a,l,t,n,s,h,u)}),P(t,e,o,r.columns)});else for(var i=-1,a=r[0];i<e.body.length-1;)!function(){var l=i;if(a){t.applyStyles(t.userStyles);var s=a.columns;i>=0?H(t,e,n,o,s,!0):C(t,e,o,s),l=D(t,e,i+1,o,s),P(t,e,o,s)}var h=l-i;r.slice(1).forEach(function(r){t.applyStyles(t.userStyles),H(t,e,n,o,r.columns,!0),D(t,e,i+1,o,r.columns,h),P(t,e,o,r.columns)}),i=l}()}(O,$,I,z):(O.applyStyles(O.userStyles),("firstPage"===N.showHead||"everyPage"===N.showHead)&&$.head.forEach(function(t){return F(O,$,t,z,$.columns)}),O.applyStyles(O.userStyles),$.body.forEach(function(t,e){var n=e===$.body.length-1;W(O,$,t,n,I,z,$.columns)}),O.applyStyles(O.userStyles),("lastPage"===N.showFoot||"everyPage"===N.showFoot)&&$.foot.forEach(function(t){return F(O,$,t,z,$.columns)})),l(O,$,I,z),$.callEndPageHooks(O,z),$.finalY=z.y,t.lastAutoTable=$,O.applyStyles(O.userStyles)}t.s(["default",()=>A])},13358,t=>t.a(async(e,n)=>{try{var o=t.i(89171),r=t.i(70038),i=t.i(90793),a=t.i(40682),l=t.i(81504),s=t.i(28286),h=e([r,i]);async function u(t){try{let{searchParams:e}=new URL(t.url),n=e.get("branch_id"),r=e.get("format")||"excel",h=e.get("date"),u=e.get("date_from"),d=e.get("date_to"),c=e.get("fuel_type"),p=e.get("nozzle_id"),f=e.get("payment_method"),g=e.get("document_type");if(!n)return o.NextResponse.json({error:"Branch ID required"},{status:400});let y="WHERE branch_id = $1",m=[n],v=2;h&&(y+=` AND DATE(sale_date) = $${v}`,m.push(h),v++),u&&(y+=` AND DATE(sale_date) >= $${v}`,m.push(u),v++),d&&(y+=` AND DATE(sale_date) <= $${v}`,m.push(d),v++),c&&"all"!==c&&(y+=` AND fuel_type = $${v}`,m.push(c),v++),p&&"all"!==p&&(y+=` AND nozzle_id = $${v}`,m.push(p),v++),f&&"all"!==f&&(y+=` AND LOWER(payment_method) = $${v}`,m.push(f.toLowerCase()),v++),"invoices"===g?y+=" AND (is_credit_note IS NULL OR is_credit_note = false)":"credit_notes"===g&&(y+=" AND is_credit_note = true");let w=`SELECT * FROM sales ${y} ORDER BY sale_date DESC`,b=await (0,i.query)(w,m),x=await (0,i.query)("SELECT name FROM branches WHERE id = $1",[n]),S=x[0]?.name||"Unknown Branch",C=b.map(t=>({Date:new Date(t.sale_date).toLocaleDateString("en-US"),Invoice:t.invoice_number||t.receipt_number||"","Fuel Type":t.fuel_type||"","Quantity (L)":Number(t.quantity||0).toFixed(2),"Unit Price":Number(t.unit_price||0).toFixed(2),"Total Amount":Number(t.total_amount||0).toFixed(2),"Payment Method":t.payment_method||"cash",Customer:t.customer_name||"Walk-in",Status:t.kra_status||t.transmission_status||"pending"}));if("excel"===r){let t=a.utils.json_to_sheet(C),e=a.utils.book_new();a.utils.book_append_sheet(e,t,"Sales Report"),t["!cols"]=[{wch:12},{wch:20},{wch:15},{wch:12},{wch:12},{wch:14},{wch:15},{wch:20},{wch:12}];let n=a.write(e,{type:"buffer",bookType:"xlsx"});return new o.NextResponse(n,{headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","Content-Disposition":`attachment; filename="sales-report-${new Date().toISOString().split("T")[0]}.xlsx"`,"Cache-Control":"no-cache"}})}if("pdf"===r){let t=new l.default;t.setFontSize(18),t.text(`Sales Report - ${S}`,14,22),t.setFontSize(10),t.text(`Generated: ${new Date().toLocaleString()}`,14,30),t.text(`Total Records: ${b.length}`,14,36);let e=C.map(t=>[t.Date,t.Invoice,t["Fuel Type"],t["Quantity (L)"],t["Unit Price"],t["Total Amount"],t["Payment Method"],t.Status]);(0,s.default)(t,{head:[["Date","Invoice","Fuel","Qty (L)","Price","Total","Payment","Status"]],body:e,startY:42,styles:{fontSize:8},headStyles:{fillColor:[59,130,246]}});let n=b.reduce((t,e)=>t+Number(e.total_amount||0),0),r=b.reduce((t,e)=>t+Number(e.quantity||0),0),i=t.lastAutoTable?.finalY||50;t.setFontSize(10),t.text(`Total Quantity: ${r.toFixed(2)} L`,14,i+10),t.text(`Total Amount: KES ${n.toLocaleString("en-KE",{minimumFractionDigits:2})}`,14,i+16);let a=t.output("arraybuffer");return new o.NextResponse(a,{headers:{"Content-Type":"application/pdf","Content-Disposition":`attachment; filename="sales-report-${new Date().toISOString().split("T")[0]}.pdf"`,"Cache-Control":"no-cache"}})}return o.NextResponse.json({error:"Invalid format"},{status:400})}catch(t){return console.error("Error exporting sales:",t),o.NextResponse.json({error:"Failed to export sales",details:t.message},{status:500})}}[r,i]=h.then?(await h)():h,t.s(["GET",()=>u]),n()}catch(t){n(t)}},!1),63675,t=>t.a(async(e,n)=>{try{var o=t.i(47909),r=t.i(74017),i=t.i(96250),a=t.i(59756),l=t.i(61916),s=t.i(14444),h=t.i(37092),u=t.i(69741),d=t.i(16795),c=t.i(87718),p=t.i(95169),f=t.i(47587),g=t.i(66012),y=t.i(70101),m=t.i(26937),v=t.i(10372),w=t.i(93695);t.i(52474);var b=t.i(220),x=t.i(13358),S=e([x]);[x]=S.then?(await S)():S;let P=new o.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/sales/export/route",pathname:"/api/sales/export",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/sales/export/route.ts",nextConfigOutput:"standalone",userland:x}),{workAsyncStorage:W,workUnitAsyncStorage:F,serverHooks:R}=P;function C(){return(0,i.patchFetch)({workAsyncStorage:W,workUnitAsyncStorage:F})}async function D(t,e,n){P.isDev&&(0,a.addRequestMeta)(t,"devRequestTimingInternalsEnd",process.hrtime.bigint());let o="/api/sales/export/route";o=o.replace(/\/index$/,"")||"/";let i=await P.prepare(t,e,{srcPage:o,multiZoneDraftMode:!1});if(!i)return e.statusCode=400,e.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:x,params:S,nextConfig:C,parsedUrl:D,isDraftMode:W,prerenderManifest:F,routerServerContext:R,isOnDemandRevalidate:H,revalidateOnlyGenerated:E,resolvedPathname:A,clientReferenceManifest:_,serverActionsManifest:T}=i,N=(0,u.normalizeAppPath)(o),k=!!(F.dynamicRoutes[N]||F.routes[A]),j=async()=>((null==R?void 0:R.render404)?await R.render404(t,e,D,!1):e.end("This page could not be found"),null);if(k&&!W){let t=!!F.routes[A],e=F.dynamicRoutes[N];if(e&&!1===e.fallback&&!t){if(C.experimental.adapterPath)return await j();throw new w.NoFallbackError}}let z=null;!k||P.isDev||W||(z=A,z="/index"===z?"/":z);let L=!0===P.isDev||!k,M=k&&!L;T&&_&&(0,s.setReferenceManifestsSingleton)({page:o,clientReferenceManifest:_,serverActionsManifest:T,serverModuleMap:(0,h.createServerModuleMap)({serverActionsManifest:T})});let O=t.method||"GET",I=(0,l.getTracer)(),B=I.getActiveScopeSpan(),$={params:S,prerenderManifest:F,renderOpts:{experimental:{authInterrupts:!!C.experimental.authInterrupts},cacheComponents:!!C.cacheComponents,supportsDynamicResponse:L,incrementalCache:(0,a.getRequestMeta)(t,"incrementalCache"),cacheLifeProfiles:C.cacheLife,waitUntil:n.waitUntil,onClose:t=>{e.on("close",t)},onAfterTaskError:void 0,onInstrumentationRequestError:(e,n,o)=>P.onRequestError(t,e,o,R)},sharedContext:{buildId:x}},U=new d.NodeNextRequest(t),q=new d.NodeNextResponse(e),K=c.NextRequestAdapter.fromNodeNextRequest(U,(0,c.signalFromNodeResponse)(e));try{let i=async t=>P.handle(K,$).finally(()=>{if(!t)return;t.setAttributes({"http.status_code":e.statusCode,"next.rsc":!1});let n=I.getRootSpanAttributes();if(!n)return;if(n.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${n.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=n.get("next.route");if(r){let e=`${O} ${r}`;t.setAttributes({"next.route":r,"http.route":r,"next.span_name":e}),t.updateName(e)}else t.updateName(`${O} ${o}`)}),s=!!(0,a.getRequestMeta)(t,"minimalMode"),h=async a=>{var l,h;let u=async({previousCacheEntry:r})=>{try{if(!s&&H&&E&&!r)return e.statusCode=404,e.setHeader("x-nextjs-cache","REVALIDATED"),e.end("This page could not be found"),null;let o=await i(a);t.fetchMetrics=$.renderOpts.fetchMetrics;let l=$.renderOpts.pendingWaitUntil;l&&n.waitUntil&&(n.waitUntil(l),l=void 0);let h=$.renderOpts.collectedTags;if(!k)return await (0,g.sendResponse)(U,q,o,$.renderOpts.pendingWaitUntil),null;{let t=await o.blob(),e=(0,y.toNodeOutgoingHttpHeaders)(o.headers);h&&(e[v.NEXT_CACHE_TAGS_HEADER]=h),!e["content-type"]&&t.type&&(e["content-type"]=t.type);let n=void 0!==$.renderOpts.collectedRevalidate&&!($.renderOpts.collectedRevalidate>=v.INFINITE_CACHE)&&$.renderOpts.collectedRevalidate,r=void 0===$.renderOpts.collectedExpire||$.renderOpts.collectedExpire>=v.INFINITE_CACHE?void 0:$.renderOpts.collectedExpire;return{value:{kind:b.CachedRouteKind.APP_ROUTE,status:o.status,body:Buffer.from(await t.arrayBuffer()),headers:e},cacheControl:{revalidate:n,expire:r}}}}catch(e){throw(null==r?void 0:r.isStale)&&await P.onRequestError(t,e,{routerKind:"App Router",routePath:o,routeType:"route",revalidateReason:(0,f.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:H})},R),e}},d=await P.handleResponse({req:t,nextConfig:C,cacheKey:z,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:F,isRoutePPREnabled:!1,isOnDemandRevalidate:H,revalidateOnlyGenerated:E,responseGenerator:u,waitUntil:n.waitUntil,isMinimalMode:s});if(!k)return null;if((null==d||null==(l=d.value)?void 0:l.kind)!==b.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(h=d.value)?void 0:h.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||e.setHeader("x-nextjs-cache",H?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),W&&e.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let c=(0,y.fromNodeOutgoingHttpHeaders)(d.value.headers);return s&&k||c.delete(v.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||e.getHeader("Cache-Control")||c.get("Cache-Control")||c.set("Cache-Control",(0,m.getCacheControlHeader)(d.cacheControl)),await (0,g.sendResponse)(U,q,new Response(d.value.body,{headers:c,status:d.value.status||200})),null};B?await h(B):await I.withPropagatedContext(t.headers,()=>I.trace(p.BaseServerSpan.handleRequest,{spanName:`${O} ${o}`,kind:l.SpanKind.SERVER,attributes:{"http.method":O,"http.target":t.url}},h))}catch(e){if(e instanceof w.NoFallbackError||await P.onRequestError(t,e,{routerKind:"App Router",routePath:N,routeType:"route",revalidateReason:(0,f.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:H})}),k)throw e;return await (0,g.sendResponse)(U,q,new Response(null,{status:500})),null}}t.s(["handler",()=>D,"patchFetch",()=>C,"routeModule",()=>P,"serverHooks",()=>R,"workAsyncStorage",()=>W,"workUnitAsyncStorage",()=>F]),n()}catch(t){n(t)}},!1)];

//# sourceMappingURL=_b0fbffff._.js.map