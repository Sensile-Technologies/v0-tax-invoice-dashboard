module.exports=[18622,(e,r,t)=>{r.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},70406,(e,r,t)=>{r.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},93695,(e,r,t)=>{r.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},30056,e=>e.a(async(r,t)=>{try{let r=await e.y("pg");e.n(r),t()}catch(e){t(e)}},!0),90793,e=>e.a(async(r,t)=>{try{var s=e.i(30056),a=r([s]);[s]=a.then?(await a)():a;let i=new s.Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1}});async function n(e,r){let t=await i.connect();try{return(await t.query(e,r)).rows}finally{t.release()}}async function o(){return await i.connect()}e.s(["getClient",()=>o,"pool",()=>i,"query",()=>n]),t()}catch(e){t(e)}},!1),70038,e=>e.a(async(r,t)=>{try{var s=e.i(90793),a=r([s]);[s]=a.then?(await a)():a,e.s([]),t()}catch(e){t(e)}},!1),65488,e=>{"use strict";function r(e,r){let t="8088";if(!e)return`http://5.189.171.160:${r||t}`;let s=e.trim();return(/^https?:\/\//i.test(s)&&(s=s.replace(/^https?:\/\//i,"")),s=s.replace(/\/+$/,""),/:\d+$/.test(s))?`http://${s}`:`http://${s}:${r||t}`}e.s(["buildKraBaseUrl",()=>r])},57902,e=>e.a(async(r,t)=>{try{var s=e.i(70038),a=e.i(90793),n=r([s,a]);async function o(e){if(!e.branchId)return void console.warn("[API Logger] No branchId provided, skipping log");try{var r,t,s;let n=e.logType||((r=e.endpoint).includes("saveSales")?"kra_save_sales":r.includes("saveStockItems")?"kra_stock_items":r.includes("saveStockMaster")?"kra_stock_master":r.includes("selectInitInfo")?"kra_initialize":r.includes("saveItem")?"kra_save_item":"kra_api"),o=(t=e.response,s=e.statusCode,e.error||!t?"error":"000"===t.resultCd||"0"===t.resultCd||s&&s>=200&&s<300&&!t.resultCd?"success":"error");console.log(`[API Logger] Logging ${e.endpoint} for branch ${e.branchId} with status ${o}`),await (0,a.query)(`
      INSERT INTO branch_logs (branch_id, log_type, endpoint, request_payload, response_payload, status)
      VALUES ($1, $2, $3, $4, $5, $6)
    `,[e.branchId,n,e.endpoint,JSON.stringify(e.payload||{}),JSON.stringify(e.response||{error:e.error}),o]),console.log(`[API Logger] Successfully logged ${e.endpoint}`)}catch(r){console.error("[API Logger] Failed to log API call:",r),console.error("[API Logger] Entry was:",JSON.stringify({branchId:e.branchId,endpoint:e.endpoint,statusCode:e.statusCode}))}}function i(e,r="POST"){let t=Date.now();return{success:async(s,a,n,i)=>{let c=Date.now()-t;await o({endpoint:e,method:r,payload:s,response:a,statusCode:200,durationMs:c,branchId:n,externalEndpoint:i})},error:async(s,a,n=500,i,c)=>{let l=Date.now()-t;await o({endpoint:e,method:r,payload:s,error:a?.message||String(a),statusCode:n,durationMs:l,branchId:i,externalEndpoint:c})}}}[s,a]=n.then?(await n)():n,e.s(["createApiLogger",()=>i,"logApiCall",()=>o]),t()}catch(e){t(e)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__8f2cd8b2._.js.map