(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10708,e=>{"use strict";var a=e.i(43476),r=e.i(71645);e.i(74080);var t=e.i(91918),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let l=(0,t.createSlot)(`Primitive.${s}`),n=r.forwardRef((e,r)=>{let{asChild:t,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(t?l:s,{...n,ref:r})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{}),l=r.forwardRef((e,r)=>(0,a.jsx)(s.label,{...e,ref:r,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";var n=e.i(47163);function i({className:e,...r}){return(0,a.jsx)(l,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}e.s(["Label",()=>i],10708)},69035,e=>{"use strict";var a=e.i(43476),r=e.i(71645);e.i(74080);var t=e.i(91918),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let l=(0,t.createSlot)(`Primitive.${s}`),n=r.forwardRef((e,r)=>{let{asChild:t,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(t?l:s,{...n,ref:r})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{}),l="horizontal",n=["horizontal","vertical"],i=r.forwardRef((e,r)=>{var t;let{decorative:i,orientation:o=l,...d}=e,c=(t=o,n.includes(t))?o:l;return(0,a.jsx)(s.div,{"data-orientation":c,...i?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:r})});i.displayName="Separator";var o=e.i(47163);function d({className:e,orientation:r="horizontal",decorative:t=!0,...s}){return(0,a.jsx)(i,{"data-slot":"separator",decorative:t,orientation:r,className:(0,o.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...s})}e.s(["Separator",()=>d],69035)},7035,e=>{"use strict";var a=e.i(43476),r=e.i(69296),t=e.i(67881),s=e.i(70065),l=e.i(23750),n=e.i(10708),i=e.i(69035),o=e.i(57688),d=e.i(22016),c=e.i(18566),u=e.i(71645);function h(){let[e,h]=(0,u.useState)(1),[m,p]=(0,u.useState)(""),[x,v]=(0,u.useState)(""),[g,j]=(0,u.useState)(""),[f,y]=(0,u.useState)(""),[b,N]=(0,u.useState)(""),[w,C]=(0,u.useState)(""),[S,P]=(0,u.useState)(""),[L,F]=(0,u.useState)(""),[I,k]=(0,u.useState)(""),[q,B]=(0,u.useState)(""),[z,M]=(0,u.useState)(""),[T,R]=(0,u.useState)(""),[A,E]=(0,u.useState)(""),[O,D]=(0,u.useState)(""),[$,H]=(0,u.useState)(null),[J,K]=(0,u.useState)(!1),U=(0,c.useRouter)(),G=async e=>{e.preventDefault(),K(!0),H(null);try{let e=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m,password:f,data:{username:g,phone:x},branch:{name:w,location:S,trading_name:L,kra_pin:I,county:q,address:z,manager:T,email:A,phone:O}})}),a=await e.json();if(!e.ok||a.error)throw Error(a.error?.message||"Sign up failed");try{await fetch("/api/branches/register-backend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branchId:a.branch?.id,name:w,location:z,county:q,city:S})})}catch(e){console.log("[v0] Backend registration skipped:",e)}U.push("/auth/sign-up-success")}catch(e){H(e instanceof Error?e.message:"An error occurred")}finally{K(!1)}},_=async()=>{K(!0),H(null);try{await (0,r.signInWithGoogle)()}catch(e){H(e instanceof Error?e.message:"An error occurred"),K(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen w-full relative flex items-center justify-center p-6",children:[(0,a.jsxs)("div",{className:"absolute inset-0 z-0",children:[(0,a.jsx)(o.default,{src:"https://images.unsplash.com/photo-1505142468610-359e7d316be0?w=1920&h=1080&fit=crop",alt:"Ocean background",fill:!0,className:"object-cover",priority:!0}),(0,a.jsx)("div",{className:"absolute inset-0 bg-blue-900/30"})]}),(0,a.jsxs)(s.Card,{className:"w-full max-w-md relative z-10 shadow-2xl",children:[(0,a.jsxs)(s.CardHeader,{className:"space-y-4 pb-8",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(o.default,{src:"/flow360-logo.png",alt:"Flow360 Logo",width:80,height:80,className:"rounded-full"})}),(0,a.jsx)(s.CardTitle,{className:"text-3xl text-center font-bold text-primary",children:"Flow360"}),(0,a.jsx)("p",{className:"text-center text-muted-foreground",children:1===e?"Create your account":"Setup your first branch"}),(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,a.jsx)("div",{className:`h-2 w-2 rounded-full ${1===e?"bg-primary":"bg-gray-300"}`}),(0,a.jsx)("div",{className:`h-2 w-2 rounded-full ${2===e?"bg-primary":"bg-gray-300"}`})]})]}),(0,a.jsxs)(s.CardContent,{children:[1===e?(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f!==b?H("Passwords do not match"):(H(null),h(2))},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"email",children:"Email"}),(0,a.jsx)(l.Input,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:m,onChange:e=>p(e.target.value),className:"rounded-xl"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"phone",children:"Phone Number"}),(0,a.jsx)(l.Input,{id:"phone",type:"tel",placeholder:"+254 700 000000",value:x,onChange:e=>v(e.target.value),className:"rounded-xl"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"username",children:"Username"}),(0,a.jsx)(l.Input,{id:"username",type:"text",placeholder:"johndoe",required:!0,value:g,onChange:e=>j(e.target.value),className:"rounded-xl"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"password",children:"Password"}),(0,a.jsx)(l.Input,{id:"password",type:"password",placeholder:"Create a password",required:!0,value:f,onChange:e=>y(e.target.value),className:"rounded-xl"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"confirm-password",children:"Confirm Password"}),(0,a.jsx)(l.Input,{id:"confirm-password",type:"password",placeholder:"Confirm your password",required:!0,value:b,onChange:e=>N(e.target.value),className:"rounded-xl"})]}),$&&(0,a.jsx)("div",{className:"text-sm text-red-500 bg-red-50 p-3 rounded-xl",children:$}),(0,a.jsx)(t.Button,{type:"submit",className:"w-full rounded-xl",children:"Next"})]}):(0,a.jsxs)("form",{onSubmit:G,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"branchName",children:"Branch Name"}),(0,a.jsx)(l.Input,{id:"branchName",type:"text",placeholder:"Main Branch",required:!0,value:w,onChange:e=>C(e.target.value),className:"rounded-xl"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"branchLocation",children:"Location/City"}),(0,a.jsx)(l.Input,{id:"branchLocation",type:"text",placeholder:"Nairobi",required:!0,value:S,onChange:e=>P(e.target.value),className:"rounded-xl"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"tradingName",children:"Trading Name"}),(0,a.jsx)(l.Input,{id:"tradingName",type:"text",placeholder:"ABC Fuel Station",required:!0,value:L,onChange:e=>F(e.target.value),className:"rounded-xl"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"kraPin",children:"KRA PIN"}),(0,a.jsx)(l.Input,{id:"kraPin",type:"text",placeholder:"P051234567X",required:!0,value:I,onChange:e=>k(e.target.value),className:"rounded-xl"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"county",children:"County"}),(0,a.jsx)(l.Input,{id:"county",type:"text",placeholder:"Nairobi County",required:!0,value:q,onChange:e=>B(e.target.value),className:"rounded-xl"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"address",children:"Physical Address"}),(0,a.jsx)(l.Input,{id:"address",type:"text",placeholder:"123 Main Street",required:!0,value:z,onChange:e=>M(e.target.value),className:"rounded-xl"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"managerName",children:"Manager Name"}),(0,a.jsx)(l.Input,{id:"managerName",type:"text",placeholder:"John Doe",required:!0,value:T,onChange:e=>R(e.target.value),className:"rounded-xl"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"managerEmail",children:"Manager Email"}),(0,a.jsx)(l.Input,{id:"managerEmail",type:"email",placeholder:"manager@example.com",required:!0,value:A,onChange:e=>E(e.target.value),className:"rounded-xl"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"managerPhone",children:"Manager Phone"}),(0,a.jsx)(l.Input,{id:"managerPhone",type:"tel",placeholder:"+254 700 000000",required:!0,value:O,onChange:e=>D(e.target.value),className:"rounded-xl"})]}),$&&(0,a.jsx)("div",{className:"text-sm text-red-500 bg-red-50 p-3 rounded-xl",children:$}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(t.Button,{type:"button",variant:"outline",className:"flex-1 rounded-xl bg-transparent",onClick:()=>h(1),children:"Back"}),(0,a.jsx)(t.Button,{type:"submit",className:"flex-1 rounded-xl",disabled:J,children:J?"Creating...":"Complete Setup"})]})]}),1===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative my-6",children:[(0,a.jsx)(i.Separator,{}),(0,a.jsx)("span",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-card px-2 text-xs text-muted-foreground",children:"OR"})]}),(0,a.jsxs)(t.Button,{type:"button",variant:"outline",className:"w-full rounded-xl bg-transparent",onClick:_,disabled:J,children:[(0,a.jsxs)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})]}),(0,a.jsxs)("div",{className:"mt-6 text-center text-sm",children:["Already have an account?"," ",(0,a.jsx)(d.default,{href:"/auth/login",className:"font-semibold text-primary hover:underline",children:"Sign in"})]})]})]})]})}e.s(["default",()=>h])}]);