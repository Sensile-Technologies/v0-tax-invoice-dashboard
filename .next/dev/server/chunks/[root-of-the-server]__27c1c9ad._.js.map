{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/download/%5Bfilename%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { readFileSync, existsSync } from 'fs';\nimport path from 'path';\n\nconst ALLOWED_FILES = ['flow360-source.zip', 'flow360_database_backup.sql'];\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: Promise<{ filename: string }> }\n) {\n  const { filename } = await params;\n  \n  if (!ALLOWED_FILES.includes(filename)) {\n    return NextResponse.json({ error: 'File not found' }, { status: 404 });\n  }\n\n  const filePath = path.join(process.cwd(), filename);\n  \n  if (!existsSync(filePath)) {\n    return NextResponse.json({ error: 'File not found' }, { status: 404 });\n  }\n\n  const fileBuffer = readFileSync(filePath);\n  \n  const contentType = filename.endsWith('.zip') \n    ? 'application/zip' \n    : 'application/sql';\n\n  return new NextResponse(fileBuffer, {\n    headers: {\n      'Content-Type': contentType,\n      'Content-Disposition': `attachment; filename=\"${filename}\"`,\n    },\n  });\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,gBAAgB;IAAC;IAAsB;CAA8B;AAEpE,eAAe,IACpB,OAAoB,EACpB,EAAE,MAAM,EAA6C;IAErD,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM;IAE3B,IAAI,CAAC,cAAc,QAAQ,CAAC,WAAW;QACrC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACtE;IAEA,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;IAE1C,IAAI,CAAC,IAAA,2GAAU,EAAC,WAAW;QACzB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACtE;IAEA,MAAM,aAAa,IAAA,6GAAY,EAAC;IAEhC,MAAM,cAAc,SAAS,QAAQ,CAAC,UAClC,oBACA;IAEJ,OAAO,IAAI,gJAAY,CAAC,YAAY;QAClC,SAAS;YACP,gBAAgB;YAChB,uBAAuB,CAAC,sBAAsB,EAAE,SAAS,CAAC,CAAC;QAC7D;IACF;AACF"}}]
}