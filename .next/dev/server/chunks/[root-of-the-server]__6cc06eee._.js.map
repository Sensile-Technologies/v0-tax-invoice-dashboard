{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/branches/create/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { Pool } from \"pg\"\n\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n})\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json()\n    const {\n      name,\n      location,\n      manager,\n      email,\n      phone,\n      status,\n      bhf_id,\n      address,\n      county,\n      local_tax_office,\n      device_token,\n      storage_indices,\n      user_id,\n    } = body\n\n    const client = await pool.connect()\n\n    try {\n      const id = crypto.randomUUID()\n\n      const result = await client.query(\n        `INSERT INTO branches (id, user_id, name, bhf_id, location, address, county, local_tax_office, manager, email, phone, status, device_token, storage_indices, created_at, updated_at)\n         VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, NOW(), NOW())\n         RETURNING *`,\n        [\n          id,\n          user_id || null,\n          name,\n          bhf_id || null,\n          location || null,\n          address || null,\n          county || null,\n          local_tax_office || null,\n          manager || null,\n          email || null,\n          phone || null,\n          status || \"active\",\n          device_token || null,\n          storage_indices ? JSON.stringify(storage_indices) : null,\n        ]\n      )\n\n      const branch = result.rows[0]\n\n      return NextResponse.json({ success: true, branch })\n    } finally {\n      client.release()\n    }\n  } catch (error) {\n    console.error(\"[v0] Error in branch creation:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;;;;AAEA,MAAM,OAAO,IAAI,4GAAI,CAAC;IACpB,kBAAkB,QAAQ,GAAG,CAAC,YAAY;AAC5C;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EACJ,IAAI,EACJ,QAAQ,EACR,OAAO,EACP,KAAK,EACL,KAAK,EACL,MAAM,EACN,MAAM,EACN,OAAO,EACP,MAAM,EACN,gBAAgB,EAChB,YAAY,EACZ,eAAe,EACf,OAAO,EACR,GAAG;QAEJ,MAAM,SAAS,MAAM,KAAK,OAAO;QAEjC,IAAI;YACF,MAAM,KAAK,OAAO,UAAU;YAE5B,MAAM,SAAS,MAAM,OAAO,KAAK,CAC/B,CAAC;;oBAEW,CAAC,EACb;gBACE;gBACA,WAAW;gBACX;gBACA,UAAU;gBACV,YAAY;gBACZ,WAAW;gBACX,UAAU;gBACV,oBAAoB;gBACpB,WAAW;gBACX,SAAS;gBACT,SAAS;gBACT,UAAU;gBACV,gBAAgB;gBAChB,kBAAkB,KAAK,SAAS,CAAC,mBAAmB;aACrD;YAGH,MAAM,SAAS,OAAO,IAAI,CAAC,EAAE;YAE7B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAM;YAAO;QACnD,SAAU;YACR,OAAO,OAAO;QAChB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF"}}]
}