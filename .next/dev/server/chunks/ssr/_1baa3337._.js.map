{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/auth/client.ts"],"sourcesContent":["export async function signUp(email: string, password: string, metadata: { username?: string; phone?: string }) {\n  const response = await fetch(\"/api/auth/signup\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      email,\n      password,\n      data: metadata,\n    }),\n  })\n\n  const data = await response.json()\n  return { data, error: data.error || null }\n}\n\nexport async function signIn(identifier: string, password: string) {\n  const isEmail = identifier.includes(\"@\")\n  const currentDomain = typeof window !== 'undefined' ? window.location.hostname : ''\n\n  const response = await fetch(\"/api/auth/signin\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      email: isEmail ? identifier : undefined,\n      username: isEmail ? undefined : identifier,\n      password,\n      domain: currentDomain,\n    }),\n  })\n\n  const data = await response.json()\n\n  if (data.access_token) {\n    document.cookie = `sb-access-token=${data.access_token}; path=/; max-age=${60 * 60 * 24 * 7}`\n    document.cookie = `sb-refresh-token=${data.refresh_token}; path=/; max-age=${60 * 60 * 24 * 30}`\n    if (data.user) {\n      localStorage.setItem(\"currentUser\", JSON.stringify(data.user))\n      localStorage.setItem(\"user\", JSON.stringify(data.user))\n    }\n    // Store must_change_password flag\n    if (data.must_change_password) {\n      localStorage.setItem(\"must_change_password\", \"true\")\n    } else {\n      localStorage.removeItem(\"must_change_password\")\n    }\n  }\n\n  return { data, error: data.error || null, mustChangePassword: data.must_change_password || false }\n}\n\nexport async function signOut() {\n  document.cookie = \"sb-access-token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT\"\n  document.cookie = \"sb-refresh-token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT\"\n  localStorage.removeItem(\"currentUser\")\n  localStorage.removeItem(\"user\")\n  localStorage.removeItem(\"selectedBranch\")\n  return { error: null }\n}\n\nexport function getCurrentUser() {\n  if (typeof window === \"undefined\") return null\n  const userStr = localStorage.getItem(\"currentUser\") || localStorage.getItem(\"user\")\n  if (!userStr) return null\n  try {\n    return JSON.parse(userStr)\n  } catch {\n    return null\n  }\n}\n\nexport function isAdmin() {\n  const user = getCurrentUser()\n  return user?.role === \"admin\"\n}\n\nexport async function signInWithGoogle() {\n  throw new Error(\"Google sign-in is not available with local authentication\")\n}\n\nexport async function getCurrentUserRole(): Promise<string | null> {\n  const user = getCurrentUser()\n  return user?.role || null\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAO,eAAe,OAAO,KAAa,EAAE,QAAgB,EAAE,QAA+C;IAC3G,MAAM,WAAW,MAAM,MAAM,oBAAoB;QAC/C,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;YACnB;YACA;YACA,MAAM;QACR;IACF;IAEA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,OAAO;QAAE;QAAM,OAAO,KAAK,KAAK,IAAI;IAAK;AAC3C;AAEO,eAAe,OAAO,UAAkB,EAAE,QAAgB;IAC/D,MAAM,UAAU,WAAW,QAAQ,CAAC;IACpC,MAAM,gBAAgB,sCAAgC,0BAA2B;IAEjF,MAAM,WAAW,MAAM,MAAM,oBAAoB;QAC/C,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;YACnB,OAAO,UAAU,aAAa;YAC9B,UAAU,UAAU,YAAY;YAChC;YACA,QAAQ;QACV;IACF;IAEA,MAAM,OAAO,MAAM,SAAS,IAAI;IAEhC,IAAI,KAAK,YAAY,EAAE;QACrB,SAAS,MAAM,GAAG,CAAC,gBAAgB,EAAE,KAAK,YAAY,CAAC,kBAAkB,EAAE,KAAK,KAAK,KAAK,GAAG;QAC7F,SAAS,MAAM,GAAG,CAAC,iBAAiB,EAAE,KAAK,aAAa,CAAC,kBAAkB,EAAE,KAAK,KAAK,KAAK,IAAI;QAChG,IAAI,KAAK,IAAI,EAAE;YACb,aAAa,OAAO,CAAC,eAAe,KAAK,SAAS,CAAC,KAAK,IAAI;YAC5D,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,KAAK,IAAI;QACvD;QACA,kCAAkC;QAClC,IAAI,KAAK,oBAAoB,EAAE;YAC7B,aAAa,OAAO,CAAC,wBAAwB;QAC/C,OAAO;YACL,aAAa,UAAU,CAAC;QAC1B;IACF;IAEA,OAAO;QAAE;QAAM,OAAO,KAAK,KAAK,IAAI;QAAM,oBAAoB,KAAK,oBAAoB,IAAI;IAAM;AACnG;AAEO,eAAe;IACpB,SAAS,MAAM,GAAG;IAClB,SAAS,MAAM,GAAG;IAClB,aAAa,UAAU,CAAC;IACxB,aAAa,UAAU,CAAC;IACxB,aAAa,UAAU,CAAC;IACxB,OAAO;QAAE,OAAO;IAAK;AACvB;AAEO,SAAS;IACd,wCAAmC,OAAO;;;IAC1C,MAAM;AAOR;AAEO,SAAS;IACd,MAAM,OAAO;IACb,OAAO,MAAM,SAAS;AACxB;AAEO,eAAe;IACpB,MAAM,IAAI,MAAM;AAClB;AAEO,eAAe;IACpB,MAAM,OAAO;IACb,OAAO,MAAM,QAAQ;AACvB"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { getCurrentUser } from \"@/lib/auth/client\"\n\nexport default function Home() {\n  const router = useRouter()\n  const [checking, setChecking] = useState(true)\n\n  useEffect(() => {\n    const user = getCurrentUser()\n    if (user) {\n      if (user.role === \"admin\") {\n        router.replace(\"/admin\")\n      } else if (user.role === \"sales\") {\n        router.replace(\"/admin/sales\")\n      } else {\n        // Directors and vendors go to HQ, branch staff go to branch UI\n        const role = (user.role || '').toLowerCase()\n        if (role === 'director' || role === 'vendor') {\n          router.replace(\"/headquarters\")\n        } else {\n          router.replace(\"/sales/summary\")\n        }\n      }\n    } else {\n      router.replace(\"/auth/login\")\n    }\n    setChecking(false)\n  }, [router])\n\n  if (checking) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <p className=\"text-muted-foreground\">Loading...</p>\n      </div>\n    )\n  }\n\n  return null\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,IAAA,kNAAS,EAAC;QACR,MAAM,OAAO,IAAA,uIAAc;QAC3B,IAAI,MAAM;YACR,IAAI,KAAK,IAAI,KAAK,SAAS;gBACzB,OAAO,OAAO,CAAC;YACjB,OAAO,IAAI,KAAK,IAAI,KAAK,SAAS;gBAChC,OAAO,OAAO,CAAC;YACjB,OAAO;gBACL,+DAA+D;gBAC/D,MAAM,OAAO,CAAC,KAAK,IAAI,IAAI,EAAE,EAAE,WAAW;gBAC1C,IAAI,SAAS,cAAc,SAAS,UAAU;oBAC5C,OAAO,OAAO,CAAC;gBACjB,OAAO;oBACL,OAAO,OAAO,CAAC;gBACjB;YACF;QACF,OAAO;YACL,OAAO,OAAO,CAAC;QACjB;QACA,YAAY;IACd,GAAG;QAAC;KAAO;IAEX,IAAI,UAAU;QACZ,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;IAG3C;IAEA,OAAO;AACT"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}