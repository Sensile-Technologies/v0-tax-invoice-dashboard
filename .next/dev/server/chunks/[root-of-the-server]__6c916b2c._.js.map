{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/branches/create/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json()\n    const {\n      name,\n      location,\n      manager,\n      email,\n      phone,\n      status,\n      bhf_id,\n      address,\n      county,\n      local_tax_office,\n      device_token,\n      storage_indices,\n    } = body\n\n    // Insert branch into database using fetch to Supabase REST API\n    const response = await fetch(`${process.env.SUPABASE_URL}/rest/v1/branches`, {\n      method: \"POST\",\n      headers: {\n        apikey: process.env.SUPABASE_SERVICE_ROLE_KEY!,\n        Authorization: `Bearer ${process.env.SUPABASE_SERVICE_ROLE_KEY}`,\n        \"Content-Type\": \"application/json\",\n        Prefer: \"return=representation\",\n      },\n      body: JSON.stringify({\n        name,\n        location,\n        address,\n        manager,\n        email,\n        phone,\n        bhf_id,\n        county,\n        local_tax_office,\n        device_token,\n        storage_indices,\n        status: status || \"active\",\n      }),\n    })\n\n    if (!response.ok) {\n      const error = await response.text()\n      console.error(\"[v0] Error creating branch:\", error)\n      return NextResponse.json({ error: \"Failed to create branch\", details: error }, { status: 500 })\n    }\n\n    const branches = await response.json()\n    const branch = branches[0]\n\n    return NextResponse.json({ success: true, branch })\n  } catch (error) {\n    console.error(\"[v0] Error in branch creation:\", error)\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EACJ,IAAI,EACJ,QAAQ,EACR,OAAO,EACP,KAAK,EACL,KAAK,EACL,MAAM,EACN,MAAM,EACN,OAAO,EACP,MAAM,EACN,gBAAgB,EAChB,YAAY,EACZ,eAAe,EAChB,GAAG;QAEJ,+DAA+D;QAC/D,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,GAAG,CAAC,YAAY,CAAC,iBAAiB,CAAC,EAAE;YAC3E,QAAQ;YACR,SAAS;gBACP,QAAQ,QAAQ,GAAG,CAAC,yBAAyB;gBAC7C,eAAe,CAAC,OAAO,EAAE,QAAQ,GAAG,CAAC,yBAAyB,EAAE;gBAChE,gBAAgB;gBAChB,QAAQ;YACV;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA,QAAQ,UAAU;YACpB;QACF;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;YACjC,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;gBAA2B,SAAS;YAAM,GAAG;gBAAE,QAAQ;YAAI;QAC/F;QAEA,MAAM,WAAW,MAAM,SAAS,IAAI;QACpC,MAAM,SAAS,QAAQ,CAAC,EAAE;QAE1B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM;QAAO;IACnD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF"}}]
}